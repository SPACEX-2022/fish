"use strict";var HS=Object.defineProperty;var XS=(r,t,e)=>t in r?HS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Bn=(r,t,e)=>XS(r,typeof t!="symbol"?t+"":t,e);const VS=Object.freeze(Object.defineProperty({__proto__:null,get game(){return SH},get prelude(){return PH}},Symbol.toStringTag,{value:"Module"}));function et(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];throw new Error(typeof r=="number"?"[MobX] minified error nr: "+r+(e.length?" "+e.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+r)}var WS={};function X_(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:WS}var V_=Object.assign,Ns=Object.getOwnPropertyDescriptor,Ke=Object.defineProperty,du=Object.prototype,hh=[];Object.freeze(hh);var W_={};Object.freeze(W_);var YS=typeof Proxy<"u",qS=Object.toString();function Y_(){YS||et("Proxy not available")}function q_(r){var t=!1;return function(){if(!t)return t=!0,r.apply(this,arguments)}}var Jn=function(){};function Ue(r){return typeof r=="function"}function pn(r){var t=typeof r;switch(t){case"string":case"symbol":case"number":return!0}return!1}function pu(r){return r!==null&&typeof r=="object"}function Br(r){if(!pu(r))return!1;var t=Object.getPrototypeOf(r);if(t==null)return!0;var e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e.toString()===qS}function K_(r){var t=r==null?void 0:r.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function jd(r,t,e){Ke(r,t,{enumerable:!1,writable:!0,configurable:!0,value:e})}function Z_(r,t,e){Ke(r,t,{enumerable:!1,writable:!1,configurable:!0,value:e})}function xn(r,t){var e="isMobX"+r;return t.prototype[e]=!0,function(n){return pu(n)&&n[e]===!0}}function Ei(r){return r instanceof Map}function ko(r){return r instanceof Set}var J_=typeof Object.getOwnPropertySymbols<"u";function KS(r){var t=Object.keys(r);if(!J_)return t;var e=Object.getOwnPropertySymbols(r);return e.length?[].concat(t,e.filter(function(n){return du.propertyIsEnumerable.call(r,n)})):t}var kd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:J_?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames;function Q_(r){return r===null?null:typeof r=="object"?""+r:r}function Mr(r,t){return du.hasOwnProperty.call(r,t)}var ZS=Object.getOwnPropertyDescriptors||function(t){var e={};return kd(t).forEach(function(n){e[n]=Ns(t,n)}),e};function JS(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ew(n.key),n)}}function $d(r,t,e){return t&&JS(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function fi(){return fi=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},fi.apply(this,arguments)}function t0(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,ch(r,t)}function ch(r,t){return ch=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ch(r,t)}function al(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function QS(r,t){if(r){if(typeof r=="string")return Sv(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Sv(r,t)}}function Sv(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Qn(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e)return(e=e.call(r)).next.bind(e);if(Array.isArray(r)||(e=QS(r))||t){e&&(r=e);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tw(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function ew(r){var t=tw(r,"string");return typeof t=="symbol"?t:String(t)}var ti=Symbol("mobx-stored-annotations");function Ze(r){function t(e,n){if($o(n))return r.decorate_20223_(e,n);Oi(e,n,r)}return Object.assign(t,r)}function Oi(r,t,e){Mr(r,ti)||jd(r,ti,fi({},r[ti])),sw(e)||(r[ti][t]=e)}function $o(r){return typeof r=="object"&&typeof r.kind=="string"}var j=Symbol("mobx administration"),zo=function(){function r(e){e===void 0&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=tt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=r.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return g0(this)},t.reportChanged=function(){be(),_0(this),xe()},t.toString=function(){return this.name_},r}(),zd=xn("Atom",zo);function e0(r,t,e){t===void 0&&(t=Jn),e===void 0&&(e=Jn);var n=new zo(r);return t!==Jn&&lE(n,t),e!==Jn&&E0(n,e),n}function rw(r,t){return j0(r,t)}function nw(r,t){return Object.is?Object.is(r,t):r===t?r!==0||1/r===1/t:r!==r&&t!==t}var Ls={structural:rw,default:nw};function vn(r,t,e){return C0(r)?r:Array.isArray(r)?Ht.array(r,{name:e}):Br(r)?Ht.object(r,void 0,{name:e}):Ei(r)?Ht.map(r,{name:e}):ko(r)?Ht.set(r,{name:e}):typeof r=="function"&&!_u(r)&&!bo(r)?K_(r)?ci(r):_o(e,r):r}function iw(r,t,e){if(r==null||xu(r)||bu(r)||Sn(r)||Pi(r))return r;if(Array.isArray(r))return Ht.array(r,{name:e,deep:!1});if(Br(r))return Ht.object(r,void 0,{name:e,deep:!1});if(Ei(r))return Ht.map(r,{name:e,deep:!1});if(ko(r))return Ht.set(r,{name:e,deep:!1})}function vu(r){return r}function ow(r,t){return j0(r,t)?t:r}var aw="override";function sw(r){return r.annotationType_===aw}function Ho(r,t){return{annotationType_:r,options_:t,make_:uw,extend_:lw,decorate_20223_:fw}}function uw(r,t,e,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(r,t,e,!1)===null?0:1;if(n===r.target_)return this.extend_(r,t,e,!1)===null?0:2;if(_u(e.value))return 1;var o=r0(r,this,t,e,!1);return Ke(n,t,o),2}function lw(r,t,e,n){var i=r0(r,this,t,e);return r.defineProperty_(t,i,n)}function fw(r,t){var e=t.kind,n=t.name,i=t.addInitializer,o=this,a=function(l){var f,c,h,d;return mn((f=(c=o.options_)==null?void 0:c.name)!=null?f:n.toString(),l,(h=(d=o.options_)==null?void 0:d.autoAction)!=null?h:!1)};if(e=="field"){i(function(){Oi(this,n,o)});return}if(e=="method"){var s;return _u(r)||(r=a(r)),(s=this.options_)!=null&&s.bound&&i(function(){var u=this,l=u[n].bind(u);l.isMobxAction=!0,u[n]=l}),r}et("Cannot apply '"+o.annotationType_+"' to '"+String(n)+"' (kind: "+e+"):"+(`
'`+o.annotationType_+"' can only be used on properties with a function value."))}function hw(r,t,e,n){t.annotationType_,n.value}function r0(r,t,e,n,i){var o,a,s,u,l,f,c;i===void 0&&(i=B.safeDescriptors),hw(r,t,e,n);var h=n.value;if((o=t.options_)!=null&&o.bound){var d;h=h.bind((d=r.proxy_)!=null?d:r.target_)}return{value:mn((a=(s=t.options_)==null?void 0:s.name)!=null?a:e.toString(),h,(u=(l=t.options_)==null?void 0:l.autoAction)!=null?u:!1,(f=t.options_)!=null&&f.bound?(c=r.proxy_)!=null?c:r.target_:void 0),configurable:i?r.isPlainObject_:!0,enumerable:!1,writable:!i}}function n0(r,t){return{annotationType_:r,options_:t,make_:cw,extend_:dw,decorate_20223_:pw}}function cw(r,t,e,n){var i;if(n===r.target_)return this.extend_(r,t,e,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Mr(r.target_,t)||!bo(r.target_[t]))&&this.extend_(r,t,e,!1)===null)return 0;if(bo(e.value))return 1;var o=i0(r,this,t,e,!1,!1);return Ke(n,t,o),2}function dw(r,t,e,n){var i,o=i0(r,this,t,e,(i=this.options_)==null?void 0:i.bound);return r.defineProperty_(t,o,n)}function pw(r,t){var e,n=t.name,i=t.addInitializer;return bo(r)||(r=ci(r)),(e=this.options_)!=null&&e.bound&&i(function(){var o=this,a=o[n].bind(o);a.isMobXFlow=!0,o[n]=a}),r}function vw(r,t,e,n){t.annotationType_,n.value}function i0(r,t,e,n,i,o){o===void 0&&(o=B.safeDescriptors),vw(r,t,e,n);var a=n.value;if(bo(a)||(a=ci(a)),i){var s;a=a.bind((s=r.proxy_)!=null?s:r.target_),a.isMobXFlow=!0}return{value:a,configurable:o?r.isPlainObject_:!0,enumerable:!1,writable:!o}}function Hd(r,t){return{annotationType_:r,options_:t,make_:mw,extend_:yw,decorate_20223_:gw}}function mw(r,t,e){return this.extend_(r,t,e,!1)===null?0:1}function yw(r,t,e,n){return _w(r,this,t,e),r.defineComputedProperty_(t,fi({},this.options_,{get:e.get,set:e.set}),n)}function gw(r,t){var e=this,n=t.name,i=t.addInitializer;return i(function(){var o=Wo(this)[j],a=fi({},e.options_,{get:r,context:this});a.name||(a.name="ObservableObject."+n.toString()),o.values_.set(n,new hi(a))}),function(){return this[j].getObservablePropValue_(n)}}function _w(r,t,e,n){t.annotationType_,n.get}function mu(r,t){return{annotationType_:r,options_:t,make_:bw,extend_:xw,decorate_20223_:Tw}}function bw(r,t,e){return this.extend_(r,t,e,!1)===null?0:1}function xw(r,t,e,n){var i,o;return Sw(r,this),r.defineObservableProperty_(t,e.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:vn,n)}function Tw(r,t){var e=this,n=t.kind,i=t.name,o=new WeakSet;function a(s,u){var l,f,c=Wo(s)[j],h=new un(u,(l=(f=e.options_)==null?void 0:f.enhancer)!=null?l:vn,"ObservableObject."+i.toString(),!1);c.values_.set(i,h),o.add(s)}if(n=="accessor")return{get:function(){return o.has(this)||a(this,r.get.call(this)),this[j].getObservablePropValue_(i)},set:function(u){return o.has(this)||a(this,u),this[j].setObservablePropValue_(i,u)},init:function(u){return o.has(this)||a(this,u),u}}}function Sw(r,t,e,n){t.annotationType_}var ww="true",Ew=o0();function o0(r){return{annotationType_:ww,options_:r,make_:Ow,extend_:Pw,decorate_20223_:Cw}}function Ow(r,t,e,n){var i,o;if(e.get)return yu.make_(r,t,e,n);if(e.set){var a=mn(t.toString(),e.set);return n===r.target_?r.defineProperty_(t,{configurable:B.safeDescriptors?r.isPlainObject_:!0,set:a})===null?0:2:(Ke(n,t,{configurable:!0,set:a}),2)}if(n!==r.target_&&typeof e.value=="function"){var s;if(K_(e.value)){var u,l=(u=this.options_)!=null&&u.autoBind?ci.bound:ci;return l.make_(r,t,e,n)}var f=(s=this.options_)!=null&&s.autoBind?_o.bound:_o;return f.make_(r,t,e,n)}var c=((i=this.options_)==null?void 0:i.deep)===!1?Ht.ref:Ht;if(typeof e.value=="function"&&(o=this.options_)!=null&&o.autoBind){var h;e.value=e.value.bind((h=r.proxy_)!=null?h:r.target_)}return c.make_(r,t,e,n)}function Pw(r,t,e,n){var i,o;if(e.get)return yu.extend_(r,t,e,n);if(e.set)return r.defineProperty_(t,{configurable:B.safeDescriptors?r.isPlainObject_:!0,set:mn(t.toString(),e.set)},n);if(typeof e.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;e.value=e.value.bind((a=r.proxy_)!=null?a:r.target_)}var s=((o=this.options_)==null?void 0:o.deep)===!1?Ht.ref:Ht;return s.extend_(r,t,e,n)}function Cw(r,t){et("'"+this.annotationType_+"' cannot be used as a decorator")}var Aw="observable",Rw="observable.ref",Iw="observable.shallow",Mw="observable.struct",a0={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(a0);function pa(r){return r||a0}var dh=mu(Aw),Fw=mu(Rw,{enhancer:vu}),Dw=mu(Iw,{enhancer:iw}),Bw=mu(Mw,{enhancer:ow}),s0=Ze(dh);function va(r){return r.deep===!0?vn:r.deep===!1?vu:Lw(r.defaultDecorator)}function Nw(r){var t;return r?(t=r.defaultDecorator)!=null?t:o0(r):void 0}function Lw(r){var t,e;return r&&(t=(e=r.options_)==null?void 0:e.enhancer)!=null?t:vn}function u0(r,t,e){if($o(t))return dh.decorate_20223_(r,t);if(pn(t)){Oi(r,t,dh);return}return C0(r)?r:Br(r)?Ht.object(r,t,e):Array.isArray(r)?Ht.array(r,t):Ei(r)?Ht.map(r,t):ko(r)?Ht.set(r,t):typeof r=="object"&&r!==null?r:Ht.box(r,t)}V_(u0,s0);var Uw={box:function(t,e){var n=pa(e);return new un(t,va(n),n.name,!0,n.equals)},array:function(t,e){var n=pa(e);return(B.useProxies===!1||n.proxy===!1?CE:gE)(t,va(n),n.name)},map:function(t,e){var n=pa(e);return new M0(t,va(n),n.name)},set:function(t,e){var n=pa(e);return new B0(t,va(n),n.name)},object:function(t,e,n){return Ci(function(){return fE(B.useProxies===!1||(n==null?void 0:n.proxy)===!1?Wo({},n):vE({},n),t,e)})},ref:Ze(Fw),shallow:Ze(Dw),deep:s0,struct:Ze(Bw)},Ht=V_(u0,Uw),l0="computed",Gw="computed.struct",ph=Hd(l0),jw=Hd(Gw,{equals:Ls.structural}),yu=function(t,e){if($o(e))return ph.decorate_20223_(t,e);if(pn(e))return Oi(t,e,ph);if(Br(t))return Ze(Hd(l0,t));var n=Br(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new hi(n)};Object.assign(yu,ph);yu.struct=Ze(jw);var wv,Ev,Us=0,kw=1,$w=(wv=(Ev=Ns(function(){},"name"))==null?void 0:Ev.configurable)!=null?wv:!1,Ov={value:"action",configurable:!0,writable:!1,enumerable:!1};function mn(r,t,e,n){e===void 0&&(e=!1);function i(){return f0(r,e,t,n||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return t.toString()},$w&&(Ov.value=r,Ke(i,"name",Ov)),i}function f0(r,t,e,n,i){var o=zw(r,t);try{return e.apply(n,i)}catch(a){throw o.error_=a,a}finally{Hw(o)}}function zw(r,t,e,n){var i=!1,o=0,a=B.trackingDerivation,s=!t||!a;be();var u=B.allowStateChanges;s&&(Tn(),u=Xd(!0));var l=Wd(!0),f={runAsAction_:s,prevDerivation_:a,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:i,startTime_:o,actionId_:kw++,parentActionId_:Us};return Us=f.actionId_,f}function Hw(r){Us!==r.actionId_&&et(30),Us=r.parentActionId_,r.error_!==void 0&&(B.suppressReactionErrors=!0),Vd(r.prevAllowStateChanges_),ro(r.prevAllowStateReads_),xe(),r.runAsAction_&&mr(r.prevDerivation_),B.suppressReactionErrors=!1}function Xd(r){var t=B.allowStateChanges;return B.allowStateChanges=r,t}function Vd(r){B.allowStateChanges=r}var h0;h0=Symbol.toPrimitive;var un=function(r){t0(t,r);function t(n,i,o,a,s){var u;return o===void 0&&(o="ObservableValue"),s===void 0&&(s=Ls.default),u=r.call(this,o)||this,u.enhancer=void 0,u.name_=void 0,u.equals=void 0,u.hasUnreportedChange_=!1,u.interceptors_=void 0,u.changeListeners_=void 0,u.value_=void 0,u.dehancer=void 0,u.enhancer=i,u.name_=o,u.equals=s,u.value_=i(n,void 0,o),u}var e=t.prototype;return e.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},e.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==B.UNCHANGED&&this.setNewValue_(i)},e.prepareNewValue_=function(i){if(ge(this)){var o=_e(this,{object:this,type:Je,newValue:i});if(!o)return B.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?B.UNCHANGED:i},e.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),Me(this)&&Fe(this,{type:Je,object:this,newValue:i,oldValue:o})},e.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},e.intercept_=function(i){return Xo(this,i)},e.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:Je,newValue:this.value_,oldValue:void 0}),Vo(this,i)},e.raw=function(){return this.value_},e.toJSON=function(){return this.get()},e.toString=function(){return this.name_+"["+this.value_+"]"},e.valueOf=function(){return Q_(this.get())},e[h0]=function(){return this.valueOf()},t}(zo),c0;c0=Symbol.toPrimitive;var hi=function(){function r(e){this.dependenciesState_=tt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=tt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new js(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Gs.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||et(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=mn("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Ls.structural:Ls.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=r.prototype;return t.onBecomeStale_=function(){Yw(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing_&&et(32,this.name_,this.derivation),B.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)vh(this)&&(this.warnAboutUntrackedRead_(),be(),this.value_=this.computeValue_(!1),xe());else if(g0(this),vh(this)){var n=B.trackingContext;this.keepAlive_&&!n&&(B.trackingContext=this),this.trackAndCompute()&&Ww(this),B.trackingContext=n}var i=this.value_;if(ys(i))throw i.cause;return i},t.set=function(n){if(this.setter_){this.isRunningSetter_&&et(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else et(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===tt.NOT_TRACKING_,o=this.computeValue_(!0),a=i||ys(n)||ys(o)||!this.equals_(n,o);return a&&(this.value_=o),a},t.computeValue_=function(n){this.isComputing_=!0;var i=Xd(!1),o;if(n)o=d0(this,this.derivation,this.scope_);else if(B.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(a){o=new js(a)}return Vd(i),this.isComputing_=!1,o},t.suspend_=function(){this.keepAlive_||(mh(this),this.value_=void 0)},t.observe_=function(n,i){var o=this,a=!0,s=void 0;return iE(function(){var u=o.get();if(!a||i){var l=Tn();n({observableKind:"computed",debugObjectName:o.name_,type:Je,object:o,newValue:u,oldValue:s}),mr(l)}a=!1,s=u})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Q_(this.get())},t[c0]=function(){return this.valueOf()},r}(),gu=xn("ComputedValue",hi),tt;(function(r){r[r.NOT_TRACKING_=-1]="NOT_TRACKING_",r[r.UP_TO_DATE_=0]="UP_TO_DATE_",r[r.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",r[r.STALE_=2]="STALE_"})(tt||(tt={}));var Gs;(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Gs||(Gs={}));var js=function(t){this.cause=void 0,this.cause=t};function ys(r){return r instanceof js}function vh(r){switch(r.dependenciesState_){case tt.UP_TO_DATE_:return!1;case tt.NOT_TRACKING_:case tt.STALE_:return!0;case tt.POSSIBLY_STALE_:{for(var t=Wd(!0),e=Tn(),n=r.observing_,i=n.length,o=0;o<i;o++){var a=n[o];if(gu(a)){if(B.disableErrorBoundaries)a.get();else try{a.get()}catch{return mr(e),ro(t),!0}if(r.dependenciesState_===tt.STALE_)return mr(e),ro(t),!0}}return v0(r),mr(e),ro(t),!1}}}function d0(r,t,e){var n=Wd(!0);v0(r),r.newObserving_=new Array(r.runId_===0?100:r.observing_.length),r.unboundDepsCount_=0,r.runId_=++B.runId;var i=B.trackingDerivation;B.trackingDerivation=r,B.inBatch++;var o;if(B.disableErrorBoundaries===!0)o=t.call(e);else try{o=t.call(e)}catch(a){o=new js(a)}return B.inBatch--,B.trackingDerivation=i,Xw(r),ro(n),o}function Xw(r){for(var t=r.observing_,e=r.observing_=r.newObserving_,n=tt.UP_TO_DATE_,i=0,o=r.unboundDepsCount_,a=0;a<o;a++){var s=e[a];s.diffValue_===0&&(s.diffValue_=1,i!==a&&(e[i]=s),i++),s.dependenciesState_>n&&(n=s.dependenciesState_)}for(e.length=i,r.newObserving_=null,o=t.length;o--;){var u=t[o];u.diffValue_===0&&m0(u,r),u.diffValue_=0}for(;i--;){var l=e[i];l.diffValue_===1&&(l.diffValue_=0,Vw(l,r))}n!==tt.UP_TO_DATE_&&(r.dependenciesState_=n,r.onBecomeStale_())}function mh(r){var t=r.observing_;r.observing_=[];for(var e=t.length;e--;)m0(t[e],r);r.dependenciesState_=tt.NOT_TRACKING_}function p0(r){var t=Tn();try{return r()}finally{mr(t)}}function Tn(){var r=B.trackingDerivation;return B.trackingDerivation=null,r}function mr(r){B.trackingDerivation=r}function Wd(r){var t=B.allowStateReads;return B.allowStateReads=r,t}function ro(r){B.allowStateReads=r}function v0(r){if(r.dependenciesState_!==tt.UP_TO_DATE_){r.dependenciesState_=tt.UP_TO_DATE_;for(var t=r.observing_,e=t.length;e--;)t[e].lowestObserverState_=tt.UP_TO_DATE_}}var sl=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ul=!0,B=function(){var r=X_();return r.__mobxInstanceCount>0&&!r.__mobxGlobals&&(ul=!1),r.__mobxGlobals&&r.__mobxGlobals.version!==new sl().version&&(ul=!1),ul?r.__mobxGlobals?(r.__mobxInstanceCount+=1,r.__mobxGlobals.UNCHANGED||(r.__mobxGlobals.UNCHANGED={}),r.__mobxGlobals):(r.__mobxInstanceCount=1,r.__mobxGlobals=new sl):(setTimeout(function(){et(35)},1),new sl)}();function Vw(r,t){r.observers_.add(t),r.lowestObserverState_>t.dependenciesState_&&(r.lowestObserverState_=t.dependenciesState_)}function m0(r,t){r.observers_.delete(t),r.observers_.size===0&&y0(r)}function y0(r){r.isPendingUnobservation_===!1&&(r.isPendingUnobservation_=!0,B.pendingUnobservations.push(r))}function be(){B.inBatch++}function xe(){if(--B.inBatch===0){b0();for(var r=B.pendingUnobservations,t=0;t<r.length;t++){var e=r[t];e.isPendingUnobservation_=!1,e.observers_.size===0&&(e.isBeingObserved_&&(e.isBeingObserved_=!1,e.onBUO()),e instanceof hi&&e.suspend_())}B.pendingUnobservations=[]}}function g0(r){var t=B.trackingDerivation;return t!==null?(t.runId_!==r.lastAccessedBy_&&(r.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=r,!r.isBeingObserved_&&B.trackingContext&&(r.isBeingObserved_=!0,r.onBO())),r.isBeingObserved_):(r.observers_.size===0&&B.inBatch>0&&y0(r),!1)}function _0(r){r.lowestObserverState_!==tt.STALE_&&(r.lowestObserverState_=tt.STALE_,r.observers_.forEach(function(t){t.dependenciesState_===tt.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=tt.STALE_}))}function Ww(r){r.lowestObserverState_!==tt.STALE_&&(r.lowestObserverState_=tt.STALE_,r.observers_.forEach(function(t){t.dependenciesState_===tt.POSSIBLY_STALE_?t.dependenciesState_=tt.STALE_:t.dependenciesState_===tt.UP_TO_DATE_&&(r.lowestObserverState_=tt.UP_TO_DATE_)}))}function Yw(r){r.lowestObserverState_===tt.UP_TO_DATE_&&(r.lowestObserverState_=tt.POSSIBLY_STALE_,r.observers_.forEach(function(t){t.dependenciesState_===tt.UP_TO_DATE_&&(t.dependenciesState_=tt.POSSIBLY_STALE_,t.onBecomeStale_())}))}var yh=function(){function r(e,n,i,o){e===void 0&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=tt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Gs.NONE,this.name_=e,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=o}var t=r.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,B.pendingReactions.push(this),b0())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){be(),this.isScheduled_=!1;var n=B.trackingContext;if(B.trackingContext=this,vh(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}B.trackingContext=n,xe()}},t.track=function(n){if(!this.isDisposed_){be(),this.isRunning_=!0;var i=B.trackingContext;B.trackingContext=this;var o=d0(this,n,void 0);B.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&mh(this),ys(o)&&this.reportExceptionInDerivation_(o.cause),xe()}},t.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(B.disableErrorBoundaries)throw n;var o="[mobx] uncaught error in '"+this+"'";B.suppressReactionErrors||console.error(o,n),B.globalReactionErrorHandlers.forEach(function(a){return a(n,i)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(be(),mh(this),xe()))},t.getDisposer_=function(n){var i=this,o=function a(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",a)};return n==null||n.addEventListener==null||n.addEventListener("abort",o),o[j]=this,o},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){},r}(),qw=100,Kw=function(t){return t()};function b0(){B.inBatch>0||B.isRunningReactions||Kw(Zw)}function Zw(){B.isRunningReactions=!0;for(var r=B.pendingReactions,t=0;r.length>0;){++t===qw&&(console.error("[mobx] cycle in reaction: "+r[0]),r.splice(0));for(var e=r.splice(0),n=0,i=e.length;n<i;n++)e[n].runReaction_()}B.isRunningReactions=!1}var ks=xn("Reaction",yh);function no(){return!1}function Jw(r){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var x0="action",Qw="action.bound",T0="autoAction",tE="autoAction.bound",S0="<unnamed action>",gh=Ho(x0),eE=Ho(Qw,{bound:!0}),_h=Ho(T0,{autoAction:!0}),rE=Ho(tE,{autoAction:!0,bound:!0});function w0(r){var t=function(n,i){if(Ue(n))return mn(n.name||S0,n,r);if(Ue(i))return mn(n,i,r);if($o(i))return(r?_h:gh).decorate_20223_(n,i);if(pn(i))return Oi(n,i,r?_h:gh);if(pn(n))return Ze(Ho(r?T0:x0,{name:n,autoAction:r}))};return t}var Pr=w0(!1);Object.assign(Pr,gh);var _o=w0(!0);Object.assign(_o,_h);Pr.bound=Ze(eE);_o.bound=Ze(rE);function nE(r){return f0(r.name||S0,!1,r,this,void 0)}function _u(r){return Ue(r)&&r.isMobxAction===!0}function iE(r,t){var e,n,i,o,a;t===void 0&&(t=W_);var s=(e=(n=t)==null?void 0:n.name)!=null?e:"Autorun",u=!t.scheduler&&!t.delay,l;if(u)l=new yh(s,function(){this.track(h)},t.onError,t.requiresObservable);else{var f=aE(t),c=!1;l=new yh(s,function(){c||(c=!0,f(function(){c=!1,l.isDisposed_||l.track(h)}))},t.onError,t.requiresObservable)}function h(){r(l)}return(i=t)!=null&&(o=i.signal)!=null&&o.aborted||l.schedule_(),l.getDisposer_((a=t)==null?void 0:a.signal)}var oE=function(t){return t()};function aE(r){return r.scheduler?r.scheduler:r.delay?function(t){return setTimeout(t,r.delay)}:oE}var sE="onBO",uE="onBUO";function lE(r,t,e){return O0(sE,r,t,e)}function E0(r,t,e){return O0(uE,r,t,e)}function O0(r,t,e,n){var i=bh(t),o=Ue(n)?n:e,a=r+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var s=i[a];s&&(s.delete(o),s.size===0&&delete i[a])}}function fE(r,t,e,n){var i=ZS(t);return Ci(function(){var o=Wo(r,n)[j];kd(i).forEach(function(a){o.extend_(a,i[a],e&&a in e?e[a]:!0)})}),r}var hE=0;function P0(){this.message="FLOW_CANCELLED"}P0.prototype=Object.create(Error.prototype);var ll=n0("flow"),cE=n0("flow.bound",{bound:!0}),ci=Object.assign(function(t,e){if($o(e))return ll.decorate_20223_(t,e);if(pn(e))return Oi(t,e,ll);var n=t,i=n.name||"<unnamed flow>",o=function(){var s=this,u=arguments,l=++hE,f=Pr(i+" - runid: "+l+" - init",n).apply(s,u),c,h=void 0,d=new Promise(function(p,v){var m=0;c=v;function y(x){h=void 0;var b;try{b=Pr(i+" - runid: "+l+" - yield "+m++,f.next).call(f,x)}catch(T){return v(T)}g(b)}function _(x){h=void 0;var b;try{b=Pr(i+" - runid: "+l+" - yield "+m++,f.throw).call(f,x)}catch(T){return v(T)}g(b)}function g(x){if(Ue(x==null?void 0:x.then)){x.then(g,v);return}return x.done?p(x.value):(h=Promise.resolve(x.value),h.then(y,_))}y(void 0)});return d.cancel=Pr(i+" - runid: "+l+" - cancel",function(){try{h&&Pv(h);var p=f.return(void 0),v=Promise.resolve(p.value);v.then(Jn,Jn),Pv(v),c(new P0)}catch(m){c(m)}}),d};return o.isMobXFlow=!0,o},ll);ci.bound=Ze(cE);function Pv(r){Ue(r.cancel)&&r.cancel()}function bo(r){return(r==null?void 0:r.isMobXFlow)===!0}function dE(r,t){return r?xu(r)||!!r[j]||zd(r)||ks(r)||gu(r):!1}function C0(r){return dE(r)}function dr(r,t){t===void 0&&(t=void 0),be();try{return r.apply(t)}finally{xe()}}function Nn(r){return r[j]}var pE={has:function(t,e){return Nn(t).has_(e)},get:function(t,e){return Nn(t).get_(e)},set:function(t,e,n){var i;return pn(e)?(i=Nn(t).set_(e,n,!0))!=null?i:!0:!1},deleteProperty:function(t,e){var n;return pn(e)?(n=Nn(t).delete_(e,!0))!=null?n:!0:!1},defineProperty:function(t,e,n){var i;return(i=Nn(t).defineProperty_(e,n))!=null?i:!0},ownKeys:function(t){return Nn(t).ownKeys_()},preventExtensions:function(t){et(13)}};function vE(r,t){var e,n;return Y_(),r=Wo(r,t),(n=(e=r[j]).proxy_)!=null?n:e.proxy_=new Proxy(r,pE)}function ge(r){return r.interceptors_!==void 0&&r.interceptors_.length>0}function Xo(r,t){var e=r.interceptors_||(r.interceptors_=[]);return e.push(t),q_(function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)})}function _e(r,t){var e=Tn();try{for(var n=[].concat(r.interceptors_||[]),i=0,o=n.length;i<o&&(t=n[i](t),t&&!t.type&&et(14),!!t);i++);return t}finally{mr(e)}}function Me(r){return r.changeListeners_!==void 0&&r.changeListeners_.length>0}function Vo(r,t){var e=r.changeListeners_||(r.changeListeners_=[]);return e.push(t),q_(function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)})}function Fe(r,t){var e=Tn(),n=r.changeListeners_;if(n){n=n.slice();for(var i=0,o=n.length;i<o;i++)n[i](t);mr(e)}}var Cv="splice",Je="update",mE=1e4,yE={get:function(t,e){var n=t[j];return e===j?n:e==="length"?n.getArrayLength_():typeof e=="string"&&!isNaN(e)?n.get_(parseInt(e)):Mr($s,e)?$s[e]:t[e]},set:function(t,e,n){var i=t[j];return e==="length"&&i.setArrayLength_(n),typeof e=="symbol"||isNaN(e)?t[e]=n:i.set_(parseInt(e),n),!0},preventExtensions:function(){et(15)}},Yd=function(){function r(e,n,i,o){e===void 0&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new zo(e),this.enhancer_=function(a,s){return n(a,s,"ObservableArray[..]")}}var t=r.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return Xo(this,n)},t.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Vo(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&et("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var o=new Array(n-i),a=0;a<n-i;a++)o[a]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(n,i-n)},t.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&et(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&G0(n+i+1)},t.spliceWithArray_=function(n,i,o){var a=this;this.atom_;var s=this.values_.length;if(n===void 0?n=0:n>s?n=s:n<0&&(n=Math.max(0,s+n)),arguments.length===1?i=s-n:i==null?i=0:i=Math.max(0,Math.min(i,s-n)),o===void 0&&(o=hh),ge(this)){var u=_e(this,{object:this.proxy_,type:Cv,index:n,removedCount:i,added:o});if(!u)return hh;i=u.removedCount,o=u.added}if(o=o.length===0?o:o.map(function(c){return a.enhancer_(c,void 0)}),this.legacyMode_){var l=o.length-i;this.updateArrayLength_(s,l)}var f=this.spliceItemsIntoValues_(n,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(n,o,f),this.dehanceValues_(f)},t.spliceItemsIntoValues_=function(n,i,o){if(o.length<mE){var a;return(a=this.values_).splice.apply(a,[n,i].concat(o))}else{var s=this.values_.slice(n,n+i),u=this.values_.slice(n+i);this.values_.length+=o.length-i;for(var l=0;l<o.length;l++)this.values_[n+l]=o[l];for(var f=0;f<u.length;f++)this.values_[n+o.length+f]=u[f];return s}},t.notifyArrayChildUpdate_=function(n,i,o){var a=!this.owned_&&no(),s=Me(this),u=s||a?{observableKind:"array",object:this.proxy_,type:Je,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),s&&Fe(this,u)},t.notifyArraySplice_=function(n,i,o){var a=!this.owned_&&no(),s=Me(this),u=s||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Cv,index:n,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),s&&Fe(this,u)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,i){var o=this.values_;if(this.legacyMode_&&n>o.length&&et(17,n,o.length),n<o.length){this.atom_;var a=o[n];if(ge(this)){var s=_e(this,{type:Je,object:this.proxy_,index:n,newValue:i});if(!s)return;i=s.newValue}i=this.enhancer_(i,a);var u=i!==a;u&&(o[n]=i,this.notifyArrayChildUpdate_(n,i,a))}else{for(var l=new Array(n+1-o.length),f=0;f<l.length-1;f++)l[f]=void 0;l[l.length-1]=i,this.spliceWithArray_(o.length,0,l)}},r}();function gE(r,t,e,n){return e===void 0&&(e="ObservableArray"),n===void 0&&(n=!1),Y_(),Ci(function(){var i=new Yd(e,t,n,!1);Z_(i.values_,j,i);var o=new Proxy(i.values_,yE);return i.proxy_=o,r&&r.length&&i.spliceWithArray_(0,0,r),o})}var $s={clear:function(){return this.splice(0)},replace:function(t){var e=this[j];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var a=this[j];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(t);case 2:return a.spliceWithArray_(t,e)}return a.spliceWithArray_(t,e,i)},spliceWithArray:function(t,e,n){return this[j].spliceWithArray_(t,e,n)},push:function(){for(var t=this[j],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[j].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[j],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return B.trackingDerivation&&et(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){B.trackingDerivation&&et(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[j],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};lt("at",pe);lt("concat",pe);lt("flat",pe);lt("includes",pe);lt("indexOf",pe);lt("join",pe);lt("lastIndexOf",pe);lt("slice",pe);lt("toString",pe);lt("toLocaleString",pe);lt("toSorted",pe);lt("toSpliced",pe);lt("with",pe);lt("every",je);lt("filter",je);lt("find",je);lt("findIndex",je);lt("findLast",je);lt("findLastIndex",je);lt("flatMap",je);lt("forEach",je);lt("map",je);lt("some",je);lt("toReversed",je);lt("reduce",A0);lt("reduceRight",A0);function lt(r,t){typeof Array.prototype[r]=="function"&&($s[r]=t(r))}function pe(r){return function(){var t=this[j];t.atom_.reportObserved();var e=t.dehanceValues_(t.values_);return e[r].apply(e,arguments)}}function je(r){return function(t,e){var n=this,i=this[j];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[r](function(a,s){return t.call(e,a,s,n)})}}function A0(r){return function(){var t=this,e=this[j];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_),i=arguments[0];return arguments[0]=function(o,a,s){return i(o,a,s,t)},n[r].apply(n,arguments)}}var _E=xn("ObservableArrayAdministration",Yd);function bu(r){return pu(r)&&_E(r[j])}var R0,I0,bE={},Cr="add",zs="delete";R0=Symbol.iterator;I0=Symbol.toStringTag;var M0=function(){function r(e,n,i){var o=this;n===void 0&&(n=vn),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[j]=bE,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,Ue(Map)||et(18),Ci(function(){o.keysAtom_=e0("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,e&&o.merge(e)})}var t=r.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var i=this;if(!B.trackingDerivation)return this.has_(n);var o=this.hasMap_.get(n);if(!o){var a=o=new un(this.has_(n),vu,"ObservableMap.key?",!1);this.hasMap_.set(n,a),E0(a,function(){return i.hasMap_.delete(n)})}return o.get()},t.set=function(n,i){var o=this.has_(n);if(ge(this)){var a=_e(this,{type:o?Je:Cr,object:this,newValue:i,name:n});if(!a)return this;i=a.newValue}return o?this.updateValue_(n,i):this.addValue_(n,i),this},t.delete=function(n){var i=this;if(this.keysAtom_,ge(this)){var o=_e(this,{type:zs,object:this,name:n});if(!o)return!1}if(this.has_(n)){var a=no(),s=Me(this),u=s||a?{observableKind:"map",debugObjectName:this.name_,type:zs,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return dr(function(){var l;i.keysAtom_.reportChanged(),(l=i.hasMap_.get(n))==null||l.setNewValue_(!1);var f=i.data_.get(n);f.setNewValue_(void 0),i.data_.delete(n)}),s&&Fe(this,u),!0}return!1},t.updateValue_=function(n,i){var o=this.data_.get(n);if(i=o.prepareNewValue_(i),i!==B.UNCHANGED){var a=no(),s=Me(this),u=s||a?{observableKind:"map",debugObjectName:this.name_,type:Je,object:this,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),s&&Fe(this,u)}},t.addValue_=function(n,i){var o=this;this.keysAtom_,dr(function(){var l,f=new un(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(n,f),i=f.value_,(l=o.hasMap_.get(n))==null||l.setNewValue_(!0),o.keysAtom_.reportChanged()});var a=no(),s=Me(this),u=s||a?{observableKind:"map",debugObjectName:this.name_,type:Cr,object:this,name:n,newValue:i}:null;s&&Fe(this,u)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,i=this.keys();return xo({next:function(){var a=i.next(),s=a.done,u=a.value;return{done:s,value:s?void 0:n.get(u)}}})},t.entries=function(){var n=this,i=this.keys();return xo({next:function(){var a=i.next(),s=a.done,u=a.value;return{done:s,value:s?void 0:[u,n.get(u)]}}})},t[R0]=function(){return this.entries()},t.forEach=function(n,i){for(var o=Qn(this),a;!(a=o()).done;){var s=a.value,u=s[0],l=s[1];n.call(i,l,u,this)}},t.merge=function(n){var i=this;return Sn(n)&&(n=new Map(n)),dr(function(){Br(n)?KS(n).forEach(function(o){return i.set(o,n[o])}):Array.isArray(n)?n.forEach(function(o){var a=o[0],s=o[1];return i.set(a,s)}):Ei(n)?(n.constructor!==Map&&et(19,n),n.forEach(function(o,a){return i.set(a,o)})):n!=null&&et(20,n)}),this},t.clear=function(){var n=this;dr(function(){p0(function(){for(var i=Qn(n.keys()),o;!(o=i()).done;){var a=o.value;n.delete(a)}})})},t.replace=function(n){var i=this;return dr(function(){for(var o=xE(n),a=new Map,s=!1,u=Qn(i.data_.keys()),l;!(l=u()).done;){var f=l.value;if(!o.has(f)){var c=i.delete(f);if(c)s=!0;else{var h=i.data_.get(f);a.set(f,h)}}}for(var d=Qn(o.entries()),p;!(p=d()).done;){var v=p.value,m=v[0],y=v[1],_=i.data_.has(m);if(i.set(m,y),i.data_.has(m)){var g=i.data_.get(m);a.set(m,g),_||(s=!0)}}if(!s)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var x=i.data_.keys(),b=a.keys(),T=x.next(),S=b.next();!T.done;){if(T.value!==S.value){i.keysAtom_.reportChanged();break}T=x.next(),S=b.next()}i.data_=a}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,i){return Vo(this,n)},t.intercept_=function(n){return Xo(this,n)},$d(r,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:I0,get:function(){return"Map"}}]),r}(),Sn=xn("ObservableMap",M0);function xE(r){if(Ei(r)||Sn(r))return r;if(Array.isArray(r))return new Map(r);if(Br(r)){var t=new Map;for(var e in r)t.set(e,r[e]);return t}else return et(21,r)}var F0,D0,TE={};F0=Symbol.iterator;D0=Symbol.toStringTag;var B0=function(){function r(e,n,i){var o=this;n===void 0&&(n=vn),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[j]=TE,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Ue(Set)||et(22),this.enhancer_=function(a,s){return n(a,s,i)},Ci(function(){o.atom_=e0(o.name_),e&&o.replace(e)})}var t=r.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;dr(function(){p0(function(){for(var i=Qn(n.data_.values()),o;!(o=i()).done;){var a=o.value;n.delete(a)}})})},t.forEach=function(n,i){for(var o=Qn(this),a;!(a=o()).done;){var s=a.value;n.call(i,s,s,this)}},t.add=function(n){var i=this;if(this.atom_,ge(this)){var o=_e(this,{type:Cr,object:this,newValue:n});if(!o)return this}if(!this.has(n)){dr(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var a=!1,s=Me(this),u=s||a?{observableKind:"set",debugObjectName:this.name_,type:Cr,object:this,newValue:n}:null;s&&Fe(this,u)}return this},t.delete=function(n){var i=this;if(ge(this)){var o=_e(this,{type:zs,object:this,oldValue:n});if(!o)return!1}if(this.has(n)){var a=!1,s=Me(this),u=s||a?{observableKind:"set",debugObjectName:this.name_,type:zs,object:this,oldValue:n}:null;return dr(function(){i.atom_.reportChanged(),i.data_.delete(n)}),s&&Fe(this,u),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,i=Array.from(this.keys()),o=Array.from(this.values());return xo({next:function(){var s=n;return n+=1,s<o.length?{value:[i[s],o[s]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,i=0,o=Array.from(this.data_.values());return xo({next:function(){return i<o.length?{value:n.dehanceValue_(o[i++]),done:!1}:{done:!0}}})},t.replace=function(n){var i=this;return Pi(n)&&(n=new Set(n)),dr(function(){Array.isArray(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):ko(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):n!=null&&et("Cannot initialize set from "+n)}),this},t.observe_=function(n,i){return Vo(this,n)},t.intercept_=function(n){return Xo(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[F0]=function(){return this.values()},$d(r,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:D0,get:function(){return"Set"}}]),r}(),Pi=xn("ObservableSet",B0),Av=Object.create(null),Rv="remove",N0=function(){function r(e,n,i,o){n===void 0&&(n=new Map),o===void 0&&(o=Ew),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=n,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new zo("ObservableObject.keys"),this.isPlainObject_=Br(this.target_)}var t=r.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,i){var o=this.values_.get(n);if(o instanceof hi)return o.set(i),!0;if(ge(this)){var a=_e(this,{type:Je,object:this.proxy_||this.target_,name:n,newValue:i});if(!a)return null;i=a.newValue}if(i=o.prepareNewValue_(i),i!==B.UNCHANGED){var s=Me(this),u=!1,l=s||u?{type:Je,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),s&&Fe(this,l)}return!0},t.get_=function(n){return B.trackingDerivation&&!Mr(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,i,o){return o===void 0&&(o=!1),Mr(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):o?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(n){if(!B.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new un(n in this.target_,vu,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},t.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var o;if((o=this.target_[ti])!=null&&o[n])return;et(1,i.annotationType_,this.name_+"."+n.toString())}for(var a=this.target_;a&&a!==du;){var s=Ns(a,n);if(s){var u=i.make_(this,n,s,a);if(u===0)return;if(u===1)break}a=Object.getPrototypeOf(a)}Mv(this,i,n)}},t.extend_=function(n,i,o,a){if(a===void 0&&(a=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(n,i,a);var s=o.extend_(this,n,i,a);return s&&Mv(this,o,n),s},t.defineProperty_=function(n,i,o){o===void 0&&(o=!1),this.keysAtom_;try{be();var a=this.delete_(n);if(!a)return a;if(ge(this)){var s=_e(this,{object:this.proxy_||this.target_,name:n,type:Cr,newValue:i.value});if(!s)return null;var u=s.newValue;i.value!==u&&(i=fi({},i,{value:u}))}if(o){if(!Reflect.defineProperty(this.target_,n,i))return!1}else Ke(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{xe()}return!0},t.defineObservableProperty_=function(n,i,o,a){a===void 0&&(a=!1),this.keysAtom_;try{be();var s=this.delete_(n);if(!s)return s;if(ge(this)){var u=_e(this,{object:this.proxy_||this.target_,name:n,type:Cr,newValue:i});if(!u)return null;i=u.newValue}var l=Iv(n),f={configurable:B.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:l.get,set:l.set};if(a){if(!Reflect.defineProperty(this.target_,n,f))return!1}else Ke(this.target_,n,f);var c=new un(i,o,"ObservableObject.key",!1);this.values_.set(n,c),this.notifyPropertyAddition_(n,c.value_)}finally{xe()}return!0},t.defineComputedProperty_=function(n,i,o){o===void 0&&(o=!1),this.keysAtom_;try{be();var a=this.delete_(n);if(!a)return a;if(ge(this)){var s=_e(this,{object:this.proxy_||this.target_,name:n,type:Cr,newValue:void 0});if(!s)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var u=Iv(n),l={configurable:B.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:u.get,set:u.set};if(o){if(!Reflect.defineProperty(this.target_,n,l))return!1}else Ke(this.target_,n,l);this.values_.set(n,new hi(i)),this.notifyPropertyAddition_(n,void 0)}finally{xe()}return!0},t.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Mr(this.target_,n))return!0;if(ge(this)){var o=_e(this,{object:this.proxy_||this.target_,name:n,type:Rv});if(!o)return null}try{var a,s;be();var u=Me(this),l=!1,f=this.values_.get(n),c=void 0;if(!f&&(u||l)){var h;c=(h=Ns(this.target_,n))==null?void 0:h.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(f&&(this.values_.delete(n),f instanceof un&&(c=f.value_),_0(f)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(s=a.get(n))==null||s.set(n in this.target_),u||l){var d={type:Rv,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:n};u&&Fe(this,d)}}finally{xe()}return!0},t.observe_=function(n,i){return Vo(this,n)},t.intercept_=function(n){return Xo(this,n)},t.notifyPropertyAddition_=function(n,i){var o,a,s=Me(this),u=!1;if(s||u){var l=s||u?{type:Cr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;s&&Fe(this,l)}(o=this.pendingKeys_)==null||(a=o.get(n))==null||a.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),kd(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},r}();function Wo(r,t){var e;if(Mr(r,j))return r;var n=(e=t==null?void 0:t.name)!=null?e:"ObservableObject",i=new N0(r,new Map,String(n),Nw(t));return jd(r,j,i),r}var SE=xn("ObservableObjectAdministration",N0);function Iv(r){return Av[r]||(Av[r]={get:function(){return this[j].getObservablePropValue_(r)},set:function(e){return this[j].setObservablePropValue_(r,e)}})}function xu(r){return pu(r)?SE(r[j]):!1}function Mv(r,t,e){var n;(n=r.target_[ti])==null||delete n[e]}var wE=U0(0),EE=function(){var r=!1,t={};return Object.defineProperty(t,"0",{set:function(){r=!0}}),Object.create(t)[0]=1,r===!1}(),fl=0,L0=function(){};function OE(r,t){Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,t):r.prototype.__proto__!==void 0?r.prototype.__proto__=t:r.prototype=t}OE(L0,Array.prototype);var qd=function(r,t,e){t0(n,r);function n(o,a,s,u){var l;return s===void 0&&(s="ObservableArray"),u===void 0&&(u=!1),l=r.call(this)||this,Ci(function(){var f=new Yd(s,a,u,!0);f.proxy_=al(l),Z_(al(l),j,f),o&&o.length&&l.spliceWithArray(0,0,o),EE&&Object.defineProperty(al(l),"0",wE)}),l}var i=n.prototype;return i.concat=function(){this[j].atom_.reportObserved();for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return Array.prototype.concat.apply(this.slice(),s.map(function(l){return bu(l)?l.slice():l}))},i[e]=function(){var o=this,a=0;return xo({next:function(){return a<o.length?{value:o[a++],done:!1}:{done:!0,value:void 0}}})},$d(n,[{key:"length",get:function(){return this[j].getArrayLength_()},set:function(a){this[j].setArrayLength_(a)}},{key:t,get:function(){return"Array"}}]),n}(L0,Symbol.toStringTag,Symbol.iterator);Object.entries($s).forEach(function(r){var t=r[0],e=r[1];t!=="concat"&&jd(qd.prototype,t,e)});function U0(r){return{enumerable:!1,configurable:!0,get:function(){return this[j].get_(r)},set:function(e){this[j].set_(r,e)}}}function PE(r){Ke(qd.prototype,""+r,U0(r))}function G0(r){if(r>fl){for(var t=fl;t<r+100;t++)PE(t);fl=r}}G0(1e3);function CE(r,t,e){return new qd(r,t,e)}function bh(r,t){if(typeof r=="object"&&r!==null){if(bu(r))return t!==void 0&&et(23),r[j].atom_;if(Pi(r))return r.atom_;if(Sn(r)){if(t===void 0)return r.keysAtom_;var e=r.data_.get(t)||r.hasMap_.get(t);return e||et(25,t,xh(r)),e}if(xu(r)){if(!t)return et(26);var n=r[j].values_.get(t);return n||et(27,t,xh(r)),n}if(zd(r)||gu(r)||ks(r))return r}else if(Ue(r)&&ks(r[j]))return r[j];et(28)}function AE(r,t){if(r||et(29),zd(r)||gu(r)||ks(r)||Sn(r)||Pi(r))return r;if(r[j])return r[j];et(24,r)}function xh(r,t){var e;if(t!==void 0)e=bh(r,t);else{if(_u(r))return r.name;xu(r)||Sn(r)||Pi(r)?e=AE(r):e=bh(r)}return e.name_}function Ci(r){var t=Tn(),e=Xd(!0);be();try{return r()}finally{xe(),Vd(e),mr(t)}}var Fv=du.toString;function j0(r,t,e){return e===void 0&&(e=-1),Th(r,t,e)}function Th(r,t,e,n,i){if(r===t)return r!==0||1/r===1/t;if(r==null||t==null)return!1;if(r!==r)return t!==t;var o=typeof r;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var a=Fv.call(r);if(a!==Fv.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!=+r?+t!=+t:+r==0?1/+r===1/t:+r==+t;case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(r)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":e>=0&&e++;break}r=Dv(r),t=Dv(t);var s=a==="[object Array]";if(!s){if(typeof r!="object"||typeof t!="object")return!1;var u=r.constructor,l=t.constructor;if(u!==l&&!(Ue(u)&&u instanceof u&&Ue(l)&&l instanceof l)&&"constructor"in r&&"constructor"in t)return!1}if(e===0)return!1;e<0&&(e=-1),n=n||[],i=i||[];for(var f=n.length;f--;)if(n[f]===r)return i[f]===t;if(n.push(r),i.push(t),s){if(f=r.length,f!==t.length)return!1;for(;f--;)if(!Th(r[f],t[f],e-1,n,i))return!1}else{var c=Object.keys(r),h;if(f=c.length,Object.keys(t).length!==f)return!1;for(;f--;)if(h=c[f],!(Mr(t,h)&&Th(r[h],t[h],e-1,n,i)))return!1}return n.pop(),i.pop(),!0}function Dv(r){return bu(r)?r.slice():Ei(r)||Sn(r)||ko(r)||Pi(r)?Array.from(r.entries()):r}function xo(r){return r[Symbol.iterator]=RE,r}function RE(){return this}["Symbol","Map","Set"].forEach(function(r){var t=X_();typeof t[r]>"u"&&et("MobX requires global '"+r+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Jw,extras:{getDebugName:xh},$mobx:j});function IE(r){var t=this.constructor;return this.then(function(e){return t.resolve(r()).then(function(){return e})},function(e){return t.resolve(r()).then(function(){return t.reject(e)})})}function ME(r){var t=this;return new t(function(e,n){if(!(r&&typeof r.length<"u"))return n(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(r);if(i.length===0)return e([]);var o=i.length;function a(u,l){if(l&&(typeof l=="object"||typeof l=="function")){var f=l.then;if(typeof f=="function"){f.call(l,function(c){a(u,c)},function(c){i[u]={status:"rejected",reason:c},--o===0&&e(i)});return}}i[u]={status:"fulfilled",value:l},--o===0&&e(i)}for(var s=0;s<i.length;s++)a(s,i[s])})}function k0(r,t){this.name="AggregateError",this.errors=r,this.message=t||""}k0.prototype=Error.prototype;function FE(r){var t=this;return new t(function(e,n){if(!(r&&typeof r.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(r);if(i.length===0)return n();for(var o=[],a=0;a<i.length;a++)try{t.resolve(i[a]).then(e).catch(function(s){o.push(s),o.length===i.length&&n(new k0(o,"All promises were rejected"))})}catch(s){n(s)}})}var DE=setTimeout;function $0(r){return!!(r&&typeof r.length<"u")}function BE(){}function NE(r,t){return function(){r.apply(t,arguments)}}function Tt(r){if(!(this instanceof Tt))throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],H0(r,this)}function z0(r,t){for(;r._state===3;)r=r._value;if(r._state===0){r._deferreds.push(t);return}r._handled=!0,Tt._immediateFn(function(){var e=r._state===1?t.onFulfilled:t.onRejected;if(e===null){(r._state===1?Sh:To)(t.promise,r._value);return}var n;try{n=e(r._value)}catch(i){To(t.promise,i);return}Sh(t.promise,n)})}function Sh(r,t){try{if(t===r)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var e=t.then;if(t instanceof Tt){r._state=3,r._value=t,wh(r);return}else if(typeof e=="function"){H0(NE(e,t),r);return}}r._state=1,r._value=t,wh(r)}catch(n){To(r,n)}}function To(r,t){r._state=2,r._value=t,wh(r)}function wh(r){r._state===2&&r._deferreds.length===0&&Tt._immediateFn(function(){r._handled||Tt._unhandledRejectionFn(r._value)});for(var t=0,e=r._deferreds.length;t<e;t++)z0(r,r._deferreds[t]);r._deferreds=null}function LE(r,t,e){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof t=="function"?t:null,this.promise=e}function H0(r,t){var e=!1;try{r(function(n){e||(e=!0,Sh(t,n))},function(n){e||(e=!0,To(t,n))})}catch(n){if(e)return;e=!0,To(t,n)}}Tt.prototype.catch=function(r){return this.then(null,r)};Tt.prototype.then=function(r,t){var e=new this.constructor(BE);return z0(this,new LE(r,t,e)),e};Tt.prototype.finally=IE;Tt.all=function(r){return new Tt(function(t,e){if(!$0(r))return e(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(r);if(n.length===0)return t([]);var i=n.length;function o(s,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var l=u.then;if(typeof l=="function"){l.call(u,function(f){o(s,f)},e);return}}n[s]=u,--i===0&&t(n)}catch(f){e(f)}}for(var a=0;a<n.length;a++)o(a,n[a])})};Tt.any=FE;Tt.allSettled=ME;Tt.resolve=function(r){return r&&typeof r=="object"&&r.constructor===Tt?r:new Tt(function(t){t(r)})};Tt.reject=function(r){return new Tt(function(t,e){e(r)})};Tt.race=function(r){return new Tt(function(t,e){if(!$0(r))return e(new TypeError("Promise.race accepts an array"));for(var n=0,i=r.length;n<i;n++)Tt.resolve(r[n]).then(t,e)})};Tt._immediateFn=typeof setImmediate=="function"&&function(r){setImmediate(r)}||function(r){DE(r,0)};Tt._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function UE(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Bv=Object.getOwnPropertySymbols,GE=Object.prototype.hasOwnProperty,jE=Object.prototype.propertyIsEnumerable;function kE(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function $E(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var zE=$E()?Object.assign:function(r,t){for(var e,n=kE(r),i,o=1;o<arguments.length;o++){e=Object(arguments[o]);for(var a in e)GE.call(e,a)&&(n[a]=e[a]);if(Bv){i=Bv(e);for(var s=0;s<i.length;s++)jE.call(e,i[s])&&(n[i[s]]=e[i[s]])}}return n};const HE=Kd(zE);/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Tt);Object.assign||(Object.assign=HE);var XE=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var VE=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-VE}}var hl=Date.now(),Nv=["ms","moz","webkit","o"];for(var cl=0;cl<Nv.length&&!globalThis.requestAnimationFrame;++cl){var dl=Nv[cl];globalThis.requestAnimationFrame=globalThis[dl+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[dl+"CancelAnimationFrame"]||globalThis[dl+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var t=Date.now(),e=XE+hl-t;return e<0&&(e=0),hl=t,globalThis.self.setTimeout(function(){hl=Date.now(),r(performance.now())},e)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(r){return clearTimeout(r)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ge;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Ge||(Ge={}));var di;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(di||(di={}));var So;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(So||(So={}));var L;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(L||(L={}));var Te;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Te||(Te={}));var A;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(A||(A={}));var Fr;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Fr||(Fr={}));var U;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(U||(U={}));var wo;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(wo||(wo={}));var Qt;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Qt||(Qt={}));var De;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(De||(De={}));var le;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(le||(le={}));var we;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(we||(we={}));var ye;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(ye||(ye={}));var Eo;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Eo||(Eo={}));var te;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(te||(te={}));var At;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR"})(At||(At={}));var Eh;(function(r){r[r.RED=1]="RED",r[r.GREEN=2]="GREEN",r[r.BLUE=4]="BLUE",r[r.ALPHA=8]="ALPHA"})(Eh||(Eh={}));var ct;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(ct||(ct={}));var Be;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Be||(Be={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var X0={createCanvas:function(r,t){var e=document.createElement("canvas");return e.width=r,e.height=t,e},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var r;return(r=document.baseURI)!==null&&r!==void 0?r:window.location.href},fetch:function(r,t){return fetch(r,t)}},pl=/iPhone/i,Lv=/iPod/i,Uv=/iPad/i,Gv=/\biOS-universal(?:.+)Mac\b/i,vl=/\bAndroid(?:.+)Mobile\b/i,jv=/Android/i,Ln=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ma=/Silk/i,sr=/Windows Phone/i,kv=/\bWindows(?:.+)ARM\b/i,$v=/BlackBerry/i,zv=/BB10/i,Hv=/Opera Mini/i,Xv=/\b(CriOS|Chrome)(?:.+)Mobile/i,Vv=/Mobile(?:.+)Firefox\b/i,Wv=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function WE(r){return function(t){return t.test(r)}}function YE(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,n=e.split("[FBAN");typeof n[1]<"u"&&(e=n[0]),n=e.split("Twitter"),typeof n[1]<"u"&&(e=n[0]);var i=WE(e),o={apple:{phone:i(pl)&&!i(sr),ipod:i(Lv),tablet:!i(pl)&&(i(Uv)||Wv(t))&&!i(sr),universal:i(Gv),device:(i(pl)||i(Lv)||i(Uv)||i(Gv)||Wv(t))&&!i(sr)},amazon:{phone:i(Ln),tablet:!i(Ln)&&i(ma),device:i(Ln)||i(ma)},android:{phone:!i(sr)&&i(Ln)||!i(sr)&&i(vl),tablet:!i(sr)&&!i(Ln)&&!i(vl)&&(i(ma)||i(jv)),device:!i(sr)&&(i(Ln)||i(ma)||i(vl)||i(jv))||i(/\bokhttp\b/i)},windows:{phone:i(sr),tablet:i(kv),device:i(sr)||i(kv)},other:{blackberry:i($v),blackberry10:i(zv),opera:i(Hv),firefox:i(Vv),chrome:i(Xv),device:i($v)||i(zv)||i(Hv)||i(Vv)||i(Xv)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var Se=YE(globalThis.navigator);function qE(){return!Se.apple.device}function KE(r){var t=!0;if(Se.tablet||Se.phone){if(Se.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var n=parseInt(e[1],10);n<11&&(t=!1)}}if(Se.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var n=parseInt(e[1],10);n<7&&(t=!1)}}}return t?r:4}var R={ADAPTER:X0,MIPMAP_TEXTURES:le.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:ct.NONE,SPRITE_MAX_TEXTURES:KE(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Eo.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:De.CLAMP,SCALE_MODE:Qt.LINEAR,PRECISION_VERTEX:te.HIGH,PRECISION_FRAGMENT:Se.apple.device?te.HIGH:te.MEDIUM,CAN_UPLOAD_SAME_BUFFER:qE(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},V0={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(u,l,f){this.fn=u,this.context=l,this.once=f||!1}function o(u,l,f,c,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var d=new i(f,c||u,h),p=e?e+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],d]:u._events[p].push(d):(u._events[p]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],f,c;if(this._eventsCount===0)return l;for(c in f=this._events)t.call(f,c)&&l.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(f)):l},s.prototype.listeners=function(l){var f=e?e+l:l,c=this._events[f];if(!c)return[];if(c.fn)return[c.fn];for(var h=0,d=c.length,p=new Array(d);h<d;h++)p[h]=c[h].fn;return p},s.prototype.listenerCount=function(l){var f=e?e+l:l,c=this._events[f];return c?c.fn?1:c.length:0},s.prototype.emit=function(l,f,c,h,d,p){var v=e?e+l:l;if(!this._events[v])return!1;var m=this._events[v],y=arguments.length,_,g;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,c),!0;case 4:return m.fn.call(m.context,f,c,h),!0;case 5:return m.fn.call(m.context,f,c,h,d),!0;case 6:return m.fn.call(m.context,f,c,h,d,p),!0}for(g=1,_=new Array(y-1);g<y;g++)_[g-1]=arguments[g];m.fn.apply(m.context,_)}else{var x=m.length,b;for(g=0;g<x;g++)switch(m[g].once&&this.removeListener(l,m[g].fn,void 0,!0),y){case 1:m[g].fn.call(m[g].context);break;case 2:m[g].fn.call(m[g].context,f);break;case 3:m[g].fn.call(m[g].context,f,c);break;case 4:m[g].fn.call(m[g].context,f,c,h);break;default:if(!_)for(b=1,_=new Array(y-1);b<y;b++)_[b-1]=arguments[b];m[g].fn.apply(m[g].context,_)}}return!0},s.prototype.on=function(l,f,c){return o(this,l,f,c,!1)},s.prototype.once=function(l,f,c){return o(this,l,f,c,!0)},s.prototype.removeListener=function(l,f,c,h){var d=e?e+l:l;if(!this._events[d])return this;if(!f)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===f&&(!h||p.once)&&(!c||p.context===c)&&a(this,d);else{for(var v=0,m=[],y=p.length;v<y;v++)(p[v].fn!==f||h&&!p[v].once||c&&p[v].context!==c)&&m.push(p[v]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},s.prototype.removeAllListeners=function(l){var f;return l?(f=e?e+l:l,this._events[f]&&a(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,r.exports=s})(V0);var ZE=V0.exports;const wn=Kd(ZE);var Zd={exports:{}};Zd.exports=Tu;Zd.exports.default=Tu;function Tu(r,t,e){e=e||2;var n=t&&t.length,i=n?t[0]*e:r.length,o=W0(r,0,i,e,!0),a=[];if(!o||o.next===o.prev)return a;var s,u,l,f,c,h,d;if(n&&(o=rO(r,t,o,e)),r.length>80*e){s=l=r[0],u=f=r[1];for(var p=e;p<i;p+=e)c=r[p],h=r[p+1],c<s&&(s=c),h<u&&(u=h),c>l&&(l=c),h>f&&(f=h);d=Math.max(l-s,f-u),d=d!==0?32767/d:0}return Oo(o,a,e,s,u,d,0),a}function W0(r,t,e,n,i){var o,a;if(i===Ch(r,t,e,n)>0)for(o=t;o<e;o+=n)a=Yv(o,r[o],r[o+1],a);else for(o=e-n;o>=t;o-=n)a=Yv(o,r[o],r[o+1],a);return a&&Su(a,a.next)&&(Co(a),a=a.next),a}function yn(r,t){if(!r)return r;t||(t=r);var e=r,n;do if(n=!1,!e.steiner&&(Su(e,e.next)||bt(e.prev,e,e.next)===0)){if(Co(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function Oo(r,t,e,n,i,o,a){if(r){!a&&o&&sO(r,n,i,o);for(var s=r,u,l;r.prev!==r.next;){if(u=r.prev,l=r.next,o?QE(r,n,i,o):JE(r)){t.push(u.i/e|0),t.push(r.i/e|0),t.push(l.i/e|0),Co(r),r=l.next,s=l.next;continue}if(r=l,r===s){a?a===1?(r=tO(yn(r),t,e),Oo(r,t,e,n,i,o,2)):a===2&&eO(r,t,e,n,i,o):Oo(yn(r),t,e,n,i,o,1);break}}}}function JE(r){var t=r.prev,e=r,n=r.next;if(bt(t,e,n)>=0)return!1;for(var i=t.x,o=e.x,a=n.x,s=t.y,u=e.y,l=n.y,f=i<o?i<a?i:a:o<a?o:a,c=s<u?s<l?s:l:u<l?u:l,h=i>o?i>a?i:a:o>a?o:a,d=s>u?s>l?s:l:u>l?u:l,p=n.next;p!==t;){if(p.x>=f&&p.x<=h&&p.y>=c&&p.y<=d&&ei(i,s,o,u,a,l,p.x,p.y)&&bt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function QE(r,t,e,n){var i=r.prev,o=r,a=r.next;if(bt(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,l=a.x,f=i.y,c=o.y,h=a.y,d=s<u?s<l?s:l:u<l?u:l,p=f<c?f<h?f:h:c<h?c:h,v=s>u?s>l?s:l:u>l?u:l,m=f>c?f>h?f:h:c>h?c:h,y=Oh(d,p,t,e,n),_=Oh(v,m,t,e,n),g=r.prevZ,x=r.nextZ;g&&g.z>=y&&x&&x.z<=_;){if(g.x>=d&&g.x<=v&&g.y>=p&&g.y<=m&&g!==i&&g!==a&&ei(s,f,u,c,l,h,g.x,g.y)&&bt(g.prev,g,g.next)>=0||(g=g.prevZ,x.x>=d&&x.x<=v&&x.y>=p&&x.y<=m&&x!==i&&x!==a&&ei(s,f,u,c,l,h,x.x,x.y)&&bt(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;g&&g.z>=y;){if(g.x>=d&&g.x<=v&&g.y>=p&&g.y<=m&&g!==i&&g!==a&&ei(s,f,u,c,l,h,g.x,g.y)&&bt(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;x&&x.z<=_;){if(x.x>=d&&x.x<=v&&x.y>=p&&x.y<=m&&x!==i&&x!==a&&ei(s,f,u,c,l,h,x.x,x.y)&&bt(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function tO(r,t,e){var n=r;do{var i=n.prev,o=n.next.next;!Su(i,o)&&Y0(i,n,n.next,o)&&Po(i,o)&&Po(o,i)&&(t.push(i.i/e|0),t.push(n.i/e|0),t.push(o.i/e|0),Co(n),Co(n.next),n=r=o),n=n.next}while(n!==r);return yn(n)}function eO(r,t,e,n,i,o){var a=r;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&fO(a,s)){var u=q0(a,s);a=yn(a,a.next),u=yn(u,u.next),Oo(a,t,e,n,i,o,0),Oo(u,t,e,n,i,o,0);return}s=s.next}a=a.next}while(a!==r)}function rO(r,t,e,n){var i=[],o,a,s,u,l;for(o=0,a=t.length;o<a;o++)s=t[o]*n,u=o<a-1?t[o+1]*n:r.length,l=W0(r,s,u,n,!1),l===l.next&&(l.steiner=!0),i.push(lO(l));for(i.sort(nO),o=0;o<i.length;o++)e=iO(i[o],e);return e}function nO(r,t){return r.x-t.x}function iO(r,t){var e=oO(r,t);if(!e)return t;var n=q0(e,r);return yn(n,n.next),yn(e,e.next)}function oO(r,t){var e=t,n=r.x,i=r.y,o=-1/0,a;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var s=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(s<=n&&s>o&&(o=s,a=e.x<e.next.x?e:e.next,s===n))return a}e=e.next}while(e!==t);if(!a)return null;var u=a,l=a.x,f=a.y,c=1/0,h;e=a;do n>=e.x&&e.x>=l&&n!==e.x&&ei(i<f?n:o,i,l,f,i<f?o:n,i,e.x,e.y)&&(h=Math.abs(i-e.y)/(n-e.x),Po(e,r)&&(h<c||h===c&&(e.x>a.x||e.x===a.x&&aO(a,e)))&&(a=e,c=h)),e=e.next;while(e!==u);return a}function aO(r,t){return bt(r.prev,r,t.prev)<0&&bt(t.next,r,r.next)<0}function sO(r,t,e,n){var i=r;do i.z===0&&(i.z=Oh(i.x,i.y,t,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,uO(i)}function uO(r){var t,e,n,i,o,a,s,u,l=1;do{for(e=r,r=null,o=null,a=0;e;){for(a++,n=e,s=0,t=0;t<l&&(s++,n=n.nextZ,!!n);t++);for(u=l;s>0||u>0&&n;)s!==0&&(u===0||!n||e.z<=n.z)?(i=e,e=e.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:r=i,i.prevZ=o,o=i;e=n}o.nextZ=null,l*=2}while(a>1);return r}function Oh(r,t,e,n,i){return r=(r-e)*i|0,t=(t-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function lO(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function ei(r,t,e,n,i,o,a,s){return(i-a)*(t-s)>=(r-a)*(o-s)&&(r-a)*(n-s)>=(e-a)*(t-s)&&(e-a)*(o-s)>=(i-a)*(n-s)}function fO(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!hO(r,t)&&(Po(r,t)&&Po(t,r)&&cO(r,t)&&(bt(r.prev,r,t.prev)||bt(r,t.prev,t))||Su(r,t)&&bt(r.prev,r,r.next)>0&&bt(t.prev,t,t.next)>0)}function bt(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Su(r,t){return r.x===t.x&&r.y===t.y}function Y0(r,t,e,n){var i=ga(bt(r,t,e)),o=ga(bt(r,t,n)),a=ga(bt(e,n,r)),s=ga(bt(e,n,t));return!!(i!==o&&a!==s||i===0&&ya(r,e,t)||o===0&&ya(r,n,t)||a===0&&ya(e,r,n)||s===0&&ya(e,t,n))}function ya(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function ga(r){return r>0?1:r<0?-1:0}function hO(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&Y0(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function Po(r,t){return bt(r.prev,r,r.next)<0?bt(r,t,r.next)>=0&&bt(r,r.prev,t)>=0:bt(r,t,r.prev)<0||bt(r,r.next,t)<0}function cO(r,t){var e=r,n=!1,i=(r.x+t.x)/2,o=(r.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&i<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==r);return n}function q0(r,t){var e=new Ph(r.i,r.x,r.y),n=new Ph(t.i,t.x,t.y),i=r.next,o=t.prev;return r.next=t,t.prev=r,e.next=i,i.prev=e,n.next=e,e.prev=n,o.next=n,n.prev=o,n}function Yv(r,t,e,n){var i=new Ph(r,t,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Co(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Ph(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Tu.deviation=function(r,t,e,n){var i=t&&t.length,o=i?t[0]*e:r.length,a=Math.abs(Ch(r,0,o,e));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*e,f=s<u-1?t[s+1]*e:r.length;a-=Math.abs(Ch(r,l,f,e))}var c=0;for(s=0;s<n.length;s+=3){var h=n[s]*e,d=n[s+1]*e,p=n[s+2]*e;c+=Math.abs((r[h]-r[p])*(r[d+1]-r[h+1])-(r[h]-r[d])*(r[p+1]-r[h+1]))}return a===0&&c===0?0:Math.abs((c-a)/a)};function Ch(r,t,e,n){for(var i=0,o=t,a=e-n;o<e;o+=n)i+=(r[a]-r[o])*(r[o+1]+r[a+1]),a=o;return i}Tu.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},n=0,i=0;i<r.length;i++){for(var o=0;o<r[i].length;o++)for(var a=0;a<t;a++)e.vertices.push(r[i][o][a]);i>0&&(n+=r[i-1].length,e.holes.push(n))}return e};var dO=Zd.exports;const Jd=Kd(dO);var Hs={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Hs.exports;(function(r,t){(function(e){var n=t&&!t.nodeType&&t,i=r&&!r.nodeType&&r,o=typeof oi=="object"&&oi;(o.global===o||o.window===o||o.self===o)&&(e=o);var a,s=2147483647,u=36,l=1,f=26,c=38,h=700,d=72,p=128,v="-",m=/^xn--/,y=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=u-l,b=Math.floor,T=String.fromCharCode,S;function O(I){throw new RangeError(g[I])}function w(I,C){for(var W=I.length,Q=[];W--;)Q[W]=C(I[W]);return Q}function E(I,C){var W=I.split("@"),Q="";W.length>1&&(Q=W[0]+"@",I=W[1]),I=I.replace(_,".");var rt=I.split("."),Ot=w(rt,C).join(".");return Q+Ot}function P(I){for(var C=[],W=0,Q=I.length,rt,Ot;W<Q;)rt=I.charCodeAt(W++),rt>=55296&&rt<=56319&&W<Q?(Ot=I.charCodeAt(W++),(Ot&64512)==56320?C.push(((rt&1023)<<10)+(Ot&1023)+65536):(C.push(rt),W--)):C.push(rt);return C}function D(I){return w(I,function(C){var W="";return C>65535&&(C-=65536,W+=T(C>>>10&1023|55296),C=56320|C&1023),W+=T(C),W}).join("")}function N(I){return I-48<10?I-22:I-65<26?I-65:I-97<26?I-97:u}function H(I,C){return I+22+75*(I<26)-((C!=0)<<5)}function M(I,C,W){var Q=0;for(I=W?b(I/h):I>>1,I+=b(I/C);I>x*f>>1;Q+=u)I=b(I/x);return b(Q+(x+1)*I/(I+c))}function F(I){var C=[],W=I.length,Q,rt=0,Ot=p,dt=d,pt,jt,Wt,Pt,at,ht,vt,J,Jt;for(pt=I.lastIndexOf(v),pt<0&&(pt=0),jt=0;jt<pt;++jt)I.charCodeAt(jt)>=128&&O("not-basic"),C.push(I.charCodeAt(jt));for(Wt=pt>0?pt+1:0;Wt<W;){for(Pt=rt,at=1,ht=u;Wt>=W&&O("invalid-input"),vt=N(I.charCodeAt(Wt++)),(vt>=u||vt>b((s-rt)/at))&&O("overflow"),rt+=vt*at,J=ht<=dt?l:ht>=dt+f?f:ht-dt,!(vt<J);ht+=u)Jt=u-J,at>b(s/Jt)&&O("overflow"),at*=Jt;Q=C.length+1,dt=M(rt-Pt,Q,Pt==0),b(rt/Q)>s-Ot&&O("overflow"),Ot+=b(rt/Q),rt%=Q,C.splice(rt++,0,Ot)}return D(C)}function $(I){var C,W,Q,rt,Ot,dt,pt,jt,Wt,Pt,at,ht=[],vt,J,Jt,ne;for(I=P(I),vt=I.length,C=p,W=0,Ot=d,dt=0;dt<vt;++dt)at=I[dt],at<128&&ht.push(T(at));for(Q=rt=ht.length,rt&&ht.push(v);Q<vt;){for(pt=s,dt=0;dt<vt;++dt)at=I[dt],at>=C&&at<pt&&(pt=at);for(J=Q+1,pt-C>b((s-W)/J)&&O("overflow"),W+=(pt-C)*J,C=pt,dt=0;dt<vt;++dt)if(at=I[dt],at<C&&++W>s&&O("overflow"),at==C){for(jt=W,Wt=u;Pt=Wt<=Ot?l:Wt>=Ot+f?f:Wt-Ot,!(jt<Pt);Wt+=u)ne=jt-Pt,Jt=u-Pt,ht.push(T(H(Pt+ne%Jt,0))),jt=b(ne/Jt);ht.push(T(H(jt,0))),Ot=M(W,J,Q==rt),W=0,++Q}++W,++C}return ht.join("")}function It(I){return E(I,function(C){return m.test(C)?F(C.slice(4).toLowerCase()):C})}function q(I){return E(I,function(C){return y.test(C)?"xn--"+$(C):C})}if(a={version:"1.4.1",ucs2:{decode:P,encode:D},decode:F,encode:$,toASCII:q,toUnicode:It},n&&i)if(r.exports==n)i.exports=a;else for(S in a)a.hasOwnProperty(S)&&(n[S]=a[S]);else e.punycode=a})(oi)})(Hs,Hs.exports);var pO=Hs.exports,K0=Object,vO=Error,mO=EvalError,yO=RangeError,gO=ReferenceError,Z0=SyntaxError,Ai=TypeError,_O=URIError,bO=Math.abs,xO=Math.floor,TO=Math.max,SO=Math.min,wO=Math.pow,EO=Math.round,OO=Number.isNaN||function(t){return t!==t},PO=OO,CO=function(t){return PO(t)||t===0?t:t<0?-1:1},AO=Object.getOwnPropertyDescriptor,gs=AO;if(gs)try{gs([],"length")}catch{gs=null}var wu=gs,_s=Object.defineProperty||!1;if(_s)try{_s({},"a",{value:1})}catch{_s=!1}var Eu=_s,ml,qv;function RO(){return qv||(qv=1,ml=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[e]=i;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,e);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),ml}var yl,Kv;function IO(){if(Kv)return yl;Kv=1;var r=typeof Symbol<"u"&&Symbol,t=RO();return yl=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},yl}var gl,Zv;function J0(){return Zv||(Zv=1,gl=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),gl}var _l,Jv;function Q0(){if(Jv)return _l;Jv=1;var r=K0;return _l=r.getPrototypeOf||null,_l}var bl,Qv;function MO(){if(Qv)return bl;Qv=1;var r="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,n="[object Function]",i=function(u,l){for(var f=[],c=0;c<u.length;c+=1)f[c]=u[c];for(var h=0;h<l.length;h+=1)f[h+u.length]=l[h];return f},o=function(u,l){for(var f=[],c=l,h=0;c<u.length;c+=1,h+=1)f[h]=u[c];return f},a=function(s,u){for(var l="",f=0;f<s.length;f+=1)l+=s[f],f+1<s.length&&(l+=u);return l};return bl=function(u){var l=this;if(typeof l!="function"||t.apply(l)!==n)throw new TypeError(r+l);for(var f=o(arguments,1),c,h=function(){if(this instanceof c){var y=l.apply(this,i(f,arguments));return Object(y)===y?y:this}return l.apply(u,i(f,arguments))},d=e(0,l.length-f.length),p=[],v=0;v<d;v++)p[v]="$"+v;if(c=Function("binder","return function ("+a(p,",")+"){ return binder.apply(this,arguments); }")(h),l.prototype){var m=function(){};m.prototype=l.prototype,c.prototype=new m,m.prototype=null}return c},bl}var FO=MO(),Yo=Function.prototype.bind||FO,xl,tm;function Qd(){return tm||(tm=1,xl=Function.prototype.call),xl}var Tl,em;function tb(){return em||(em=1,Tl=Function.prototype.apply),Tl}var Sl,rm;function DO(){return rm||(rm=1,Sl=typeof Reflect<"u"&&Reflect&&Reflect.apply),Sl}var wl,nm;function BO(){if(nm)return wl;nm=1;var r=Yo,t=tb(),e=Qd(),n=DO();return wl=n||r.call(e,t),wl}var El,im;function NO(){if(im)return El;im=1;var r=Yo,t=Ai,e=Qd(),n=BO();return El=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return n(r,e,o)},El}var Ol,om;function LO(){if(om)return Ol;om=1;var r=NO(),t=wu,e;try{e=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!e&&t&&t(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return Ol=n&&typeof n.get=="function"?r([n.get]):typeof o=="function"?function(s){return o(s==null?s:i(s))}:!1,Ol}var Pl,am;function UO(){if(am)return Pl;am=1;var r=J0(),t=Q0(),e=LO();return Pl=r?function(i){return r(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:e?function(i){return e(i)}:null,Pl}var Cl,sm;function GO(){if(sm)return Cl;sm=1;var r=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=Yo;return Cl=e.call(r,t),Cl}var Y,jO=K0,kO=vO,$O=mO,zO=yO,HO=gO,pi=Z0,ai=Ai,XO=_O,VO=bO,WO=xO,YO=TO,qO=SO,KO=wO,ZO=EO,JO=CO,eb=Function,Al=function(r){try{return eb('"use strict"; return ('+r+").constructor;")()}catch{}},Ao=wu,QO=Eu,Rl=function(){throw new ai},tP=Ao?function(){try{return arguments.callee,Rl}catch{try{return Ao(arguments,"callee").get}catch{return Rl}}}():Rl,Un=IO()(),kt=UO(),eP=Q0(),rP=J0(),rb=tb(),qo=Qd(),qn={},nP=typeof Uint8Array>"u"||!kt?Y:kt(Uint8Array),ln={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Y:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Y:ArrayBuffer,"%ArrayIteratorPrototype%":Un&&kt?kt([][Symbol.iterator]()):Y,"%AsyncFromSyncIteratorPrototype%":Y,"%AsyncFunction%":qn,"%AsyncGenerator%":qn,"%AsyncGeneratorFunction%":qn,"%AsyncIteratorPrototype%":qn,"%Atomics%":typeof Atomics>"u"?Y:Atomics,"%BigInt%":typeof BigInt>"u"?Y:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Y:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Y:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":kO,"%eval%":eval,"%EvalError%":$O,"%Float16Array%":typeof Float16Array>"u"?Y:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Y:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Y:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Y:FinalizationRegistry,"%Function%":eb,"%GeneratorFunction%":qn,"%Int8Array%":typeof Int8Array>"u"?Y:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Y:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Un&&kt?kt(kt([][Symbol.iterator]())):Y,"%JSON%":typeof JSON=="object"?JSON:Y,"%Map%":typeof Map>"u"?Y:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Un||!kt?Y:kt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":jO,"%Object.getOwnPropertyDescriptor%":Ao,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Y:Promise,"%Proxy%":typeof Proxy>"u"?Y:Proxy,"%RangeError%":zO,"%ReferenceError%":HO,"%Reflect%":typeof Reflect>"u"?Y:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Y:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Un||!kt?Y:kt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Un&&kt?kt(""[Symbol.iterator]()):Y,"%Symbol%":Un?Symbol:Y,"%SyntaxError%":pi,"%ThrowTypeError%":tP,"%TypedArray%":nP,"%TypeError%":ai,"%Uint8Array%":typeof Uint8Array>"u"?Y:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Y:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Y:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Y:Uint32Array,"%URIError%":XO,"%WeakMap%":typeof WeakMap>"u"?Y:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Y:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Y:WeakSet,"%Function.prototype.call%":qo,"%Function.prototype.apply%":rb,"%Object.defineProperty%":QO,"%Object.getPrototypeOf%":eP,"%Math.abs%":VO,"%Math.floor%":WO,"%Math.max%":YO,"%Math.min%":qO,"%Math.pow%":KO,"%Math.round%":ZO,"%Math.sign%":JO,"%Reflect.getPrototypeOf%":rP};if(kt)try{null.error}catch(r){var iP=kt(kt(r));ln["%Error.prototype%"]=iP}var oP=function r(t){var e;if(t==="%AsyncFunction%")e=Al("async function () {}");else if(t==="%GeneratorFunction%")e=Al("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Al("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&kt&&(e=kt(i.prototype))}return ln[t]=e,e},um={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ko=Yo,Xs=GO(),aP=Ko.call(qo,Array.prototype.concat),sP=Ko.call(rb,Array.prototype.splice),lm=Ko.call(qo,String.prototype.replace),Vs=Ko.call(qo,String.prototype.slice),uP=Ko.call(qo,RegExp.prototype.exec),lP=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fP=/\\(\\)?/g,hP=function(t){var e=Vs(t,0,1),n=Vs(t,-1);if(e==="%"&&n!=="%")throw new pi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new pi("invalid intrinsic syntax, expected opening `%`");var i=[];return lm(t,lP,function(o,a,s,u){i[i.length]=s?lm(u,fP,"$1"):a||o}),i},cP=function(t,e){var n=t,i;if(Xs(um,n)&&(i=um[n],n="%"+i[0]+"%"),Xs(ln,n)){var o=ln[n];if(o===qn&&(o=oP(n)),typeof o>"u"&&!e)throw new ai("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new pi("intrinsic "+t+" does not exist!")},Ou=function(t,e){if(typeof t!="string"||t.length===0)throw new ai("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new ai('"allowMissing" argument must be a boolean');if(uP(/^%?[^%]*%?$/,t)===null)throw new pi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=hP(t),i=n.length>0?n[0]:"",o=cP("%"+i+"%",e),a=o.name,s=o.value,u=!1,l=o.alias;l&&(i=l[0],sP(n,aP([0,1],l)));for(var f=1,c=!0;f<n.length;f+=1){var h=n[f],d=Vs(h,0,1),p=Vs(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new pi("property names with quotes must have matching quotes");if((h==="constructor"||!c)&&(u=!0),i+="."+h,a="%"+i+"%",Xs(ln,a))s=ln[a];else if(s!=null){if(!(h in s)){if(!e)throw new ai("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ao&&f+1>=n.length){var v=Ao(s,h);c=!!v,c&&"get"in v&&!("originalValue"in v.get)?s=v.get:s=s[h]}else c=Xs(s,h),s=s[h];c&&!u&&(ln[a]=s)}}return s},nb={exports:{}},fm=Eu,dP=Z0,Gn=Ai,hm=wu,pP=function(t,e,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Gn("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new Gn("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Gn("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Gn("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Gn("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Gn("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,u=!!hm&&hm(t,e);if(fm)fm(t,e,{configurable:a===null&&u?u.configurable:!a,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:o===null&&u?u.writable:!o});else if(s||!i&&!o&&!a)t[e]=n;else throw new dP("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ah=Eu,ib=function(){return!!Ah};ib.hasArrayLengthDefineBug=function(){if(!Ah)return null;try{return Ah([],"length",{value:1}).length!==1}catch{return!0}};var vP=ib,mP=Ou,cm=pP,yP=vP(),dm=wu,pm=Ai,gP=mP("%Math.floor%"),_P=function(t,e){if(typeof t!="function")throw new pm("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||gP(e)!==e)throw new pm("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&dm){var a=dm(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(yP?cm(t,"length",e,!0,!0):cm(t,"length",e)),t};(function(r){var t=Yo,e=Ou,n=_P,i=Ai,o=e("%Function.prototype.apply%"),a=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||t.call(a,o),u=Eu,l=e("%Math.max%");r.exports=function(h){if(typeof h!="function")throw new i("a function is required");var d=s(t,a,arguments);return n(d,1+l(0,h.length-(arguments.length-1)),!0)};var f=function(){return s(t,o,arguments)};u?u(r.exports,"apply",{value:f}):r.exports.apply=f})(nb);var bP=nb.exports,ob=Ou,ab=bP,xP=ab(ob("String.prototype.indexOf")),TP=function(t,e){var n=ob(t,!!e);return typeof n=="function"&&xP(t,".prototype.")>-1?ab(n):n};const SP=new Proxy({},{get(r,t){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),wP=Object.freeze(Object.defineProperty({__proto__:null,default:SP},Symbol.toStringTag,{value:"Module"})),EP=UE(wP);var tp=typeof Map=="function"&&Map.prototype,Il=Object.getOwnPropertyDescriptor&&tp?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ws=tp&&Il&&typeof Il.get=="function"?Il.get:null,vm=tp&&Map.prototype.forEach,ep=typeof Set=="function"&&Set.prototype,Ml=Object.getOwnPropertyDescriptor&&ep?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ys=ep&&Ml&&typeof Ml.get=="function"?Ml.get:null,mm=ep&&Set.prototype.forEach,OP=typeof WeakMap=="function"&&WeakMap.prototype,io=OP?WeakMap.prototype.has:null,PP=typeof WeakSet=="function"&&WeakSet.prototype,oo=PP?WeakSet.prototype.has:null,CP=typeof WeakRef=="function"&&WeakRef.prototype,ym=CP?WeakRef.prototype.deref:null,AP=Boolean.prototype.valueOf,RP=Object.prototype.toString,IP=Function.prototype.toString,MP=String.prototype.match,rp=String.prototype.slice,Ar=String.prototype.replace,FP=String.prototype.toUpperCase,gm=String.prototype.toLowerCase,sb=RegExp.prototype.test,_m=Array.prototype.concat,We=Array.prototype.join,DP=Array.prototype.slice,bm=Math.floor,Rh=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Fl=Object.getOwnPropertySymbols,Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,vi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Zt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===vi||!0)?Symbol.toStringTag:null,ub=Object.prototype.propertyIsEnumerable,xm=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Tm(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||sb.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-bm(-r):bm(r);if(n!==r){var i=String(n),o=rp.call(t,i.length+1);return Ar.call(i,e,"$&_")+"."+Ar.call(Ar.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ar.call(t,e,"$&_")}var Mh=EP,Sm=Mh.custom,wm=fb(Sm)?Sm:null,BP=function r(t,e,n,i){var o=e||{};if(Er(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Er(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Er(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Er(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Er(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return cb(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?Tm(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return s?Tm(t,l):l}var f=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof t=="object")return Fh(t)?"[Array]":"[Object]";var c=QP(o,n);if(typeof i>"u")i=[];else if(hb(i,t)>=0)return"[Circular]";function h(N,H,M){if(H&&(i=DP.call(i),i.push(H)),M){var F={depth:o.depth};return Er(o,"quoteStyle")&&(F.quoteStyle=o.quoteStyle),r(N,F,n+1,i)}return r(N,o,n+1,i)}if(typeof t=="function"&&!Em(t)){var d=HP(t),p=_a(t,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+We.call(p,", ")+" }":"")}if(fb(t)){var v=vi?Ar.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ih.call(t);return typeof t=="object"&&!vi?Li(v):v}if(KP(t)){for(var m="<"+gm.call(String(t.nodeName)),y=t.attributes||[],_=0;_<y.length;_++)m+=" "+y[_].name+"="+lb(NP(y[_].value),"double",o);return m+=">",t.childNodes&&t.childNodes.length&&(m+="..."),m+="</"+gm.call(String(t.nodeName))+">",m}if(Fh(t)){if(t.length===0)return"[]";var g=_a(t,h);return c&&!JP(g)?"["+Dh(g,c)+"]":"[ "+We.call(g,", ")+" ]"}if(UP(t)){var x=_a(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!ub.call(t,"cause")?"{ ["+String(t)+"] "+We.call(_m.call("[cause]: "+h(t.cause),x),", ")+" }":x.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+We.call(x,", ")+" }"}if(typeof t=="object"&&a){if(wm&&typeof t[wm]=="function"&&Mh)return Mh(t,{depth:f-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(XP(t)){var b=[];return vm&&vm.call(t,function(N,H){b.push(h(H,t,!0)+" => "+h(N,t))}),Om("Map",Ws.call(t),b,c)}if(YP(t)){var T=[];return mm&&mm.call(t,function(N){T.push(h(N,t))}),Om("Set",Ys.call(t),T,c)}if(VP(t))return Dl("WeakMap");if(qP(t))return Dl("WeakSet");if(WP(t))return Dl("WeakRef");if(jP(t))return Li(h(Number(t)));if($P(t))return Li(h(Rh.call(t)));if(kP(t))return Li(AP.call(t));if(GP(t))return Li(h(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===oi)return"{ [object globalThis] }";if(!LP(t)&&!Em(t)){var S=_a(t,h),O=xm?xm(t)===Object.prototype:t instanceof Object||t.constructor===Object,w=t instanceof Object?"":"null prototype",E=!O&&Zt&&Object(t)===t&&Zt in t?rp.call(kr(t),8,-1):w?"Object":"",P=O||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",D=P+(E||w?"["+We.call(_m.call([],E||[],w||[]),": ")+"] ":"");return S.length===0?D+"{}":c?D+"{"+Dh(S,c)+"}":D+"{ "+We.call(S,", ")+" }"}return String(t)};function lb(r,t,e){var n=(e.quoteStyle||t)==="double"?'"':"'";return n+r+n}function NP(r){return Ar.call(String(r),/"/g,"&quot;")}function Fh(r){return kr(r)==="[object Array]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function LP(r){return kr(r)==="[object Date]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function Em(r){return kr(r)==="[object RegExp]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function UP(r){return kr(r)==="[object Error]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function GP(r){return kr(r)==="[object String]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function jP(r){return kr(r)==="[object Number]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function kP(r){return kr(r)==="[object Boolean]"&&(!Zt||!(typeof r=="object"&&Zt in r))}function fb(r){if(vi)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Ih)return!1;try{return Ih.call(r),!0}catch{}return!1}function $P(r){if(!r||typeof r!="object"||!Rh)return!1;try{return Rh.call(r),!0}catch{}return!1}var zP=Object.prototype.hasOwnProperty||function(r){return r in this};function Er(r,t){return zP.call(r,t)}function kr(r){return RP.call(r)}function HP(r){if(r.name)return r.name;var t=MP.call(IP.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function hb(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,n=r.length;e<n;e++)if(r[e]===t)return e;return-1}function XP(r){if(!Ws||!r||typeof r!="object")return!1;try{Ws.call(r);try{Ys.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function VP(r){if(!io||!r||typeof r!="object")return!1;try{io.call(r,io);try{oo.call(r,oo)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function WP(r){if(!ym||!r||typeof r!="object")return!1;try{return ym.call(r),!0}catch{}return!1}function YP(r){if(!Ys||!r||typeof r!="object")return!1;try{Ys.call(r);try{Ws.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function qP(r){if(!oo||!r||typeof r!="object")return!1;try{oo.call(r,oo);try{io.call(r,io)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function KP(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function cb(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,n="... "+e+" more character"+(e>1?"s":"");return cb(rp.call(r,0,t.maxStringLength),t)+n}var i=Ar.call(Ar.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ZP);return lb(i,"single",t)}function ZP(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+FP.call(t.toString(16))}function Li(r){return"Object("+r+")"}function Dl(r){return r+" { ? }"}function Om(r,t,e,n){var i=n?Dh(e,n):We.call(e,", ");return r+" ("+t+") {"+i+"}"}function JP(r){for(var t=0;t<r.length;t++)if(hb(r[t],`
`)>=0)return!1;return!0}function QP(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=We.call(Array(r.indent+1)," ");else return null;return{base:e,prev:We.call(Array(t+1),e)}}function Dh(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+We.call(r,","+e)+`
`+t.prev}function _a(r,t){var e=Fh(r),n=[];if(e){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=Er(r,i)?t(r[i],r):""}var o=typeof Fl=="function"?Fl(r):[],a;if(vi){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var u in r)Er(r,u)&&(e&&String(Number(u))===u&&u<r.length||vi&&a["$"+u]instanceof Symbol||(sb.call(/[^\w$]/,u)?n.push(t(u,r)+": "+t(r[u],r)):n.push(u+": "+t(r[u],r))));if(typeof Fl=="function")for(var l=0;l<o.length;l++)ub.call(r,o[l])&&n.push("["+t(o[l])+"]: "+t(r[o[l]],r));return n}var db=Ou,Ri=TP,tC=BP,eC=Ai,ba=db("%WeakMap%",!0),xa=db("%Map%",!0),rC=Ri("WeakMap.prototype.get",!0),nC=Ri("WeakMap.prototype.set",!0),iC=Ri("WeakMap.prototype.has",!0),oC=Ri("Map.prototype.get",!0),aC=Ri("Map.prototype.set",!0),sC=Ri("Map.prototype.has",!0),np=function(r,t){for(var e=r,n;(n=e.next)!==null;e=n)if(n.key===t)return e.next=n.next,n.next=r.next,r.next=n,n},uC=function(r,t){var e=np(r,t);return e&&e.value},lC=function(r,t,e){var n=np(r,t);n?n.value=e:r.next={key:t,next:r.next,value:e}},fC=function(r,t){return!!np(r,t)},hC=function(){var t,e,n,i={assert:function(o){if(!i.has(o))throw new eC("Side channel does not contain "+tC(o))},get:function(o){if(ba&&o&&(typeof o=="object"||typeof o=="function")){if(t)return rC(t,o)}else if(xa){if(e)return oC(e,o)}else if(n)return uC(n,o)},has:function(o){if(ba&&o&&(typeof o=="object"||typeof o=="function")){if(t)return iC(t,o)}else if(xa){if(e)return sC(e,o)}else if(n)return fC(n,o);return!1},set:function(o,a){ba&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new ba),nC(t,o,a)):xa?(e||(e=new xa),aC(e,o,a)):(n||(n={key:{},next:null}),lC(n,o,a))}};return i},cC=String.prototype.replace,dC=/%20/g,Bl={RFC1738:"RFC1738",RFC3986:"RFC3986"},ip={default:Bl.RFC3986,formatters:{RFC1738:function(r){return cC.call(r,dC,"+")},RFC3986:function(r){return String(r)}},RFC1738:Bl.RFC1738,RFC3986:Bl.RFC3986},pC=ip,Nl=Object.prototype.hasOwnProperty,en=Array.isArray,ze=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),vC=function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(en(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);e.obj[e.prop]=i}}},pb=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},mC=function r(t,e,n){if(!e)return t;if(typeof e!="object"){if(en(t))t.push(e);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Nl.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var i=t;return en(t)&&!en(e)&&(i=pb(t,n)),en(t)&&en(e)?(e.forEach(function(o,a){if(Nl.call(t,a)){var s=t[a];s&&typeof s=="object"&&o&&typeof o=="object"?t[a]=r(s,o,n):t.push(o)}else t[a]=o}),t):Object.keys(e).reduce(function(o,a){var s=e[a];return Nl.call(o,a)?o[a]=r(o[a],s,n):o[a]=s,o},i)},yC=function(t,e){return Object.keys(e).reduce(function(n,i){return n[i]=e[i],n},t)},gC=function(r,t,e){var n=r.replace(/\+/g," ");if(e==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Ll=1024,_C=function(t,e,n,i,o){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var s="",u=0;u<a.length;u+=Ll){for(var l=a.length>=Ll?a.slice(u,u+Ll):a,f=[],c=0;c<l.length;++c){var h=l.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===pC.RFC1738&&(h===40||h===41)){f[f.length]=l.charAt(c);continue}if(h<128){f[f.length]=ze[h];continue}if(h<2048){f[f.length]=ze[192|h>>6]+ze[128|h&63];continue}if(h<55296||h>=57344){f[f.length]=ze[224|h>>12]+ze[128|h>>6&63]+ze[128|h&63];continue}c+=1,h=65536+((h&1023)<<10|l.charCodeAt(c)&1023),f[f.length]=ze[240|h>>18]+ze[128|h>>12&63]+ze[128|h>>6&63]+ze[128|h&63]}s+=f.join("")}return s},bC=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var o=e[i],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],f=a[l];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(e.push({obj:a,prop:l}),n.push(f))}return vC(e),t},xC=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},TC=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},SC=function(t,e){return[].concat(t,e)},wC=function(t,e){if(en(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)},vb={arrayToObject:pb,assign:yC,combine:SC,compact:bC,decode:gC,encode:_C,isBuffer:TC,isRegExp:xC,maybeMap:wC,merge:mC},mb=hC,bs=vb,ao=ip,EC=Object.prototype.hasOwnProperty,yb={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Xe=Array.isArray,OC=Array.prototype.push,gb=function(r,t){OC.apply(r,Xe(t)?t:[t])},PC=Date.prototype.toISOString,Pm=ao.default,Dt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:bs.encode,encodeValuesOnly:!1,format:Pm,formatter:ao.formatters[Pm],indices:!1,serializeDate:function(t){return PC.call(t)},skipNulls:!1,strictNullHandling:!1},CC=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Ul={},AC=function r(t,e,n,i,o,a,s,u,l,f,c,h,d,p,v,m,y,_){for(var g=t,x=_,b=0,T=!1;(x=x.get(Ul))!==void 0&&!T;){var S=x.get(t);if(b+=1,typeof S<"u"){if(S===b)throw new RangeError("Cyclic object value");T=!0}typeof x.get(Ul)>"u"&&(b=0)}if(typeof f=="function"?g=f(e,g):g instanceof Date?g=d(g):n==="comma"&&Xe(g)&&(g=bs.maybeMap(g,function(I){return I instanceof Date?d(I):I})),g===null){if(a)return l&&!m?l(e,Dt.encoder,y,"key",p):e;g=""}if(CC(g)||bs.isBuffer(g)){if(l){var O=m?e:l(e,Dt.encoder,y,"key",p);return[v(O)+"="+v(l(g,Dt.encoder,y,"value",p))]}return[v(e)+"="+v(String(g))]}var w=[];if(typeof g>"u")return w;var E;if(n==="comma"&&Xe(g))m&&l&&(g=bs.maybeMap(g,l)),E=[{value:g.length>0?g.join(",")||null:void 0}];else if(Xe(f))E=f;else{var P=Object.keys(g);E=c?P.sort(c):P}var D=u?e.replace(/\./g,"%2E"):e,N=i&&Xe(g)&&g.length===1?D+"[]":D;if(o&&Xe(g)&&g.length===0)return N+"[]";for(var H=0;H<E.length;++H){var M=E[H],F=typeof M=="object"&&typeof M.value<"u"?M.value:g[M];if(!(s&&F===null)){var $=h&&u?M.replace(/\./g,"%2E"):M,It=Xe(g)?typeof n=="function"?n(N,$):N:N+(h?"."+$:"["+$+"]");_.set(t,b);var q=mb();q.set(Ul,_),gb(w,r(F,It,n,i,o,a,s,u,n==="comma"&&m&&Xe(g)?null:l,f,c,h,d,p,v,m,y,q))}}return w},RC=function(t){if(!t)return Dt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||Dt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ao.default;if(typeof t.format<"u"){if(!EC.call(ao.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=ao.formatters[n],o=Dt.filter;(typeof t.filter=="function"||Xe(t.filter))&&(o=t.filter);var a;if(t.arrayFormat in yb?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Dt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Dt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Dt.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Dt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Dt.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Dt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Dt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Dt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Dt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Dt.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Dt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Dt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Dt.strictNullHandling}},IC=function(r,t){var e=r,n=RC(t),i,o;typeof n.filter=="function"?(o=n.filter,e=o("",e)):Xe(n.filter)&&(o=n.filter,i=o);var a=[];if(typeof e!="object"||e===null)return"";var s=yb[n.arrayFormat],u=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(e)),n.sort&&i.sort(n.sort);for(var l=mb(),f=0;f<i.length;++f){var c=i[f];n.skipNulls&&e[c]===null||gb(a,AC(e[c],c,s,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var h=a.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""},mi=vb,Bh=Object.prototype.hasOwnProperty,MC=Array.isArray,Ct={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:mi.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},FC=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},_b=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},DC="utf8=%26%2310003%3B",BC="utf8=%E2%9C%93",NC=function(t,e){var n={__proto__:null},i=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,a=i.split(e.delimiter,o),s=-1,u,l=e.charset;if(e.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===BC?l="utf-8":a[u]===DC&&(l="iso-8859-1"),s=u,u=a.length);for(u=0;u<a.length;++u)if(u!==s){var f=a[u],c=f.indexOf("]="),h=c===-1?f.indexOf("="):c+1,d,p;h===-1?(d=e.decoder(f,Ct.decoder,l,"key"),p=e.strictNullHandling?null:""):(d=e.decoder(f.slice(0,h),Ct.decoder,l,"key"),p=mi.maybeMap(_b(f.slice(h+1),e),function(m){return e.decoder(m,Ct.decoder,l,"value")})),p&&e.interpretNumericEntities&&l==="iso-8859-1"&&(p=FC(p)),f.indexOf("[]=")>-1&&(p=MC(p)?[p]:p);var v=Bh.call(n,d);v&&e.duplicates==="combine"?n[d]=mi.combine(n[d],p):(!v||e.duplicates==="last")&&(n[d]=p)}return n},LC=function(r,t,e,n){for(var i=n?t:_b(t,e),o=r.length-1;o>=0;--o){var a,s=r[o];if(s==="[]"&&e.parseArrays)a=e.allowEmptyArrays&&i===""?[]:[].concat(i);else{a=e.plainObjects?Object.create(null):{};var u=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=e.decodeDotInKeys?u.replace(/%2E/g,"."):u,f=parseInt(l,10);!e.parseArrays&&l===""?a={0:i}:!isNaN(f)&&s!==l&&String(f)===l&&f>=0&&e.parseArrays&&f<=e.arrayLimit?(a=[],a[f]=i):l!=="__proto__"&&(a[l]=i)}i=a}return i},UC=function(t,e,n,i){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=n.depth>0&&a.exec(o),l=u?o.slice(0,u.index):o,f=[];if(l){if(!n.plainObjects&&Bh.call(Object.prototype,l)&&!n.allowPrototypes)return;f.push(l)}for(var c=0;n.depth>0&&(u=s.exec(o))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&Bh.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(u[1])}return u&&f.push("["+o.slice(u.index)+"]"),LC(f,e,n,i)}},GC=function(t){if(!t)return Ct;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Ct.charset:t.charset,n=typeof t.duplicates>"u"?Ct.duplicates:t.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ct.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ct.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ct.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ct.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ct.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ct.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ct.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ct.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ct.decoder,delimiter:typeof t.delimiter=="string"||mi.isRegExp(t.delimiter)?t.delimiter:Ct.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ct.depth,duplicates:n,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ct.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ct.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ct.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ct.strictNullHandling}},jC=function(r,t){var e=GC(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?NC(r,e):r,i=e.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var s=o[a],u=UC(s,n[s],e,typeof r=="string");i=mi.merge(i,u,e)}return e.allowSparse===!0?i:mi.compact(i)},kC=IC,$C=jC,zC=ip,HC={formats:zC,parse:$C,stringify:kC},XC=pO;function Ne(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var VC=/^([a-z0-9.+-]+:)/i,WC=/:[0-9]*$/,YC=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,qC=["<",">",'"',"`"," ","\r",`
`,"	"],KC=["{","}","|","\\","^","`"].concat(qC),Nh=["'"].concat(KC),Cm=["%","/","?",";","#"].concat(Nh),Am=["/","?","#"],ZC=255,Rm=/^[+a-z0-9A-Z_-]{0,63}$/,JC=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,QC={javascript:!0,"javascript:":!0},Lh={javascript:!0,"javascript:":!0},si={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Uh=HC;function Pu(r,t,e){if(r&&typeof r=="object"&&r instanceof Ne)return r;var n=new Ne;return n.parse(r,t,e),n}Ne.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),r=o.join(i);var s=r;if(s=s.trim(),!e&&r.split("#").length===1){var u=YC.exec(s);if(u)return this.path=s,this.href=s,this.pathname=u[1],u[2]?(this.search=u[2],t?this.query=Uh.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=VC.exec(s);if(l){l=l[0];var f=l.toLowerCase();this.protocol=f,s=s.substr(l.length)}if(e||l||s.match(/^\/\/[^@/]+@[^@/]+/)){var c=s.substr(0,2)==="//";c&&!(l&&Lh[l])&&(s=s.substr(2),this.slashes=!0)}if(!Lh[l]&&(c||l&&!si[l])){for(var h=-1,d=0;d<Am.length;d++){var p=s.indexOf(Am[d]);p!==-1&&(h===-1||p<h)&&(h=p)}var v,m;h===-1?m=s.lastIndexOf("@"):m=s.lastIndexOf("@",h),m!==-1&&(v=s.slice(0,m),s=s.slice(m+1),this.auth=decodeURIComponent(v)),h=-1;for(var d=0;d<Cm.length;d++){var p=s.indexOf(Cm[d]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var _=this.hostname.split(/\./),d=0,g=_.length;d<g;d++){var x=_[d];if(x&&!x.match(Rm)){for(var b="",T=0,S=x.length;T<S;T++)x.charCodeAt(T)>127?b+="x":b+=x[T];if(!b.match(Rm)){var O=_.slice(0,d),w=_.slice(d+1),E=x.match(JC);E&&(O.push(E[1]),w.unshift(E[2])),w.length&&(s="/"+w.join(".")+s),this.hostname=O.join(".");break}}}this.hostname.length>ZC?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=XC.toASCII(this.hostname));var P=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+P,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!QC[f])for(var d=0,g=Nh.length;d<g;d++){var N=Nh[d];if(s.indexOf(N)!==-1){var H=encodeURIComponent(N);H===N&&(H=escape(N)),s=s.split(N).join(H)}}var M=s.indexOf("#");M!==-1&&(this.hash=s.substr(M),s=s.slice(0,M));var F=s.indexOf("?");if(F!==-1?(this.search=s.substr(F),this.query=s.substr(F+1),t&&(this.query=Uh.parse(this.query)),s=s.slice(0,F)):t&&(this.search="",this.query={}),s&&(this.pathname=s),si[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",$=this.search||"";this.path=P+$}return this.href=this.format(),this};function tA(r){return typeof r=="string"&&(r=Pu(r)),r instanceof Ne?r.format():Ne.prototype.format.call(r)}Ne.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=Uh.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||si[t])&&i!==!1?(i="//"+(i||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),a&&a.charAt(0)!=="?"&&(a="?"+a),e=e.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),a=a.replace("#","%23"),t+i+e+a+n};function eA(r,t){return Pu(r,!1,!0).resolve(t)}Ne.prototype.resolve=function(r){return this.resolveObject(Pu(r,!1,!0)).format()};Ne.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new Ne;t.parse(r,!1,!0),r=t}for(var e=new Ne,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];e[o]=this[o]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var a=Object.keys(r),s=0;s<a.length;s++){var u=a[s];u!=="protocol"&&(e[u]=r[u])}return si[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!si[r.protocol]){for(var l=Object.keys(r),f=0;f<l.length;f++){var c=l[f];e[c]=r[c]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!Lh[r.protocol]){for(var g=(r.pathname||"").split("/");g.length&&!(r.host=g.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),e.pathname=g.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var h=e.pathname||"",d=e.search||"";e.path=h+d}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var p=e.pathname&&e.pathname.charAt(0)==="/",v=r.host||r.pathname&&r.pathname.charAt(0)==="/",m=v||p||e.host&&r.pathname,y=m,_=e.pathname&&e.pathname.split("/")||[],g=r.pathname&&r.pathname.split("/")||[],x=e.protocol&&!si[e.protocol];if(x&&(e.hostname="",e.port=null,e.host&&(_[0]===""?_[0]=e.host:_.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(g[0]===""?g[0]=r.host:g.unshift(r.host)),r.host=null),m=m&&(g[0]===""||_[0]==="")),v)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,_=g;else if(g.length)_||(_=[]),_.pop(),_=_.concat(g),e.search=r.search,e.query=r.query;else if(r.search!=null){if(x){e.host=_.shift(),e.hostname=e.host;var b=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;b&&(e.auth=b.shift(),e.hostname=b.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!_.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var T=_.slice(-1)[0],S=(e.host||r.host||_.length>1)&&(T==="."||T==="..")||T==="",O=0,w=_.length;w>=0;w--)T=_[w],T==="."?_.splice(w,1):T===".."?(_.splice(w,1),O++):O&&(_.splice(w,1),O--);if(!m&&!y)for(;O--;O)_.unshift("..");m&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),S&&_.join("/").substr(-1)!=="/"&&_.push("");var E=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(x){e.hostname=E?"":_.length?_.shift():"",e.host=e.hostname;var b=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;b&&(e.auth=b.shift(),e.hostname=b.shift(),e.host=e.hostname)}return m=m||e.host&&_.length,m&&!E&&_.unshift(""),_.length>0?e.pathname=_.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};Ne.prototype.parseHost=function(){var r=this.host,t=WC.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var rA=Pu,nA=eA,iA=tA;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var nn={parse:rA,format:iA,resolve:nA};function Ce(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function Im(r){var t=r.split("?")[0];return t.split("#")[0]}function oA(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function aA(r,t,e){return r.replace(new RegExp(oA(t),"g"),e)}function sA(r,t){for(var e="",n=0,i=-1,o=0,a,s=0;s<=r.length;++s){if(s<r.length)a=r.charCodeAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(e.length<2||n!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var u=e.lastIndexOf("/");if(u!==e.length-1){u===-1?(e="",n=0):(e=e.slice(0,u),n=e.length-1-e.lastIndexOf("/")),i=s,o=0;continue}}else if(e.length===2||e.length===1){e="",n=0,i=s,o=0;continue}}}else e.length>0?e+="/"+r.slice(i+1,s):e=r.slice(i+1,s),n=s-i-1;i=s,o=0}else a===46&&o!==-1?++o:o=-1}return e}var bb={toPosix:function(r){return aA(r,"\\","/")},isUrl:function(r){return/^https?:/.test(this.toPosix(r))},isDataUrl:function(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},hasProtocol:function(r){return/^[^/:]+:\//.test(this.toPosix(r))},getProtocol:function(r){Ce(r),r=this.toPosix(r);var t="",e=/^file:\/\/\//.exec(r),n=/^[^/:]+:\/\//.exec(r),i=/^[^/:]+:\//.exec(r);if(e||n||i){var o=(e==null?void 0:e[0])||(n==null?void 0:n[0])||(i==null?void 0:i[0]);t=o,r=r.slice(o.length)}return t},toAbsolute:function(r,t,e){if(this.isDataUrl(r))return r;var n=Im(this.toPosix(t??R.ADAPTER.getBaseUrl())),i=Im(this.toPosix(e??this.rootname(n)));if(Ce(r),r=this.toPosix(r),r.startsWith("/"))return bb.join(i,r.slice(1));var o=this.isAbsolute(r)?r:this.join(n,r);return o},normalize:function(r){if(r=this.toPosix(r),Ce(r),r.length===0)return".";var t="",e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));var n=r.endsWith("/");return r=sA(r),r.length>0&&n&&(r+="/"),e?"/"+r:t+r},isAbsolute:function(r){return Ce(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join:function(){for(var r=arguments,t,e=[],n=0;n<arguments.length;n++)e[n]=r[n];if(e.length===0)return".";for(var i,o=0;o<e.length;++o){var a=e[o];if(Ce(a),a.length>0)if(i===void 0)i=a;else{var s=(t=e[o-1])!==null&&t!==void 0?t:"";this.extname(s)?i+="/../"+a:i+="/"+a}}return i===void 0?".":this.normalize(i)},dirname:function(r){if(Ce(r),r.length===0)return".";r=this.toPosix(r);var t=r.charCodeAt(0),e=t===47,n=-1,i=!0,o=this.getProtocol(r),a=r;r=r.slice(o.length);for(var s=r.length-1;s>=1;--s)if(t=r.charCodeAt(s),t===47){if(!i){n=s;break}}else i=!1;return n===-1?e?"/":this.isUrl(a)?o+r:o:e&&n===1?"//":o+r.slice(0,n)},rootname:function(r){Ce(r),r=this.toPosix(r);var t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){var e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename:function(r,t){Ce(r),t&&Ce(t),r=this.toPosix(r);var e=0,n=-1,i=!0,o;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";var a=t.length-1,s=-1;for(o=r.length-1;o>=0;--o){var u=r.charCodeAt(o);if(u===47){if(!i){e=o+1;break}}else s===-1&&(i=!1,s=o+1),a>=0&&(u===t.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=s))}return e===n?n=s:n===-1&&(n=r.length),r.slice(e,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===47){if(!i){e=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(e,n)},extname:function(r){Ce(r),r=this.toPosix(r);for(var t=-1,e=0,n=-1,i=!0,o=0,a=r.length-1;a>=0;--a){var s=r.charCodeAt(a);if(s===47){if(!i){e=a+1;break}continue}n===-1&&(i=!1,n=a+1),s===46?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===e+1?"":r.slice(t,n)},parse:function(r){Ce(r);var t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=this.toPosix(r);var e=r.charCodeAt(0),n=this.isAbsolute(r),i;t.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;for(var o=-1,a=0,s=-1,u=!0,l=r.length-1,f=0;l>=i;--l){if(e=r.charCodeAt(l),e===47){if(!u){a=l+1;break}continue}s===-1&&(u=!1,s=l+1),e===46?o===-1?o=l:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||s===-1||f===0||f===1&&o===s-1&&o===a+1?s!==-1&&(a===0&&n?t.base=t.name=r.slice(1,s):t.base=t.name=r.slice(a,s)):(a===0&&n?(t.name=r.slice(1,o),t.base=r.slice(1,s)):(t.name=r.slice(a,o),t.base=r.slice(a,s)),t.ext=r.slice(o,s)),t.dir=this.dirname(r),t},sep:"/",delimiter:":"};R.RETINA_PREFIX=/@([0-9\.]+)x/;R.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Gh=!1,Mm="6.5.10";function uA(){Gh=!0}function xb(r){var t;if(!Gh){if(R.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+Mm+" - ✰ "+r+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,e)}else globalThis.console&&globalThis.console.log("PixiJS "+Mm+" - "+r+" - http://www.pixijs.com/");Gh=!0}}var Gl;function Tb(){return typeof Gl>"u"&&(Gl=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:R.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!R.ADAPTER.getWebGLRenderingContext())return!1;var e=R.ADAPTER.createCanvas(),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!!(n&&n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch{return!1}}()),Gl}var lA="#f0f8ff",fA="#faebd7",hA="#00ffff",cA="#7fffd4",dA="#f0ffff",pA="#f5f5dc",vA="#ffe4c4",mA="#000000",yA="#ffebcd",gA="#0000ff",_A="#8a2be2",bA="#a52a2a",xA="#deb887",TA="#5f9ea0",SA="#7fff00",wA="#d2691e",EA="#ff7f50",OA="#6495ed",PA="#fff8dc",CA="#dc143c",AA="#00ffff",RA="#00008b",IA="#008b8b",MA="#b8860b",FA="#a9a9a9",DA="#006400",BA="#a9a9a9",NA="#bdb76b",LA="#8b008b",UA="#556b2f",GA="#ff8c00",jA="#9932cc",kA="#8b0000",$A="#e9967a",zA="#8fbc8f",HA="#483d8b",XA="#2f4f4f",VA="#2f4f4f",WA="#00ced1",YA="#9400d3",qA="#ff1493",KA="#00bfff",ZA="#696969",JA="#696969",QA="#1e90ff",t2="#b22222",e2="#fffaf0",r2="#228b22",n2="#ff00ff",i2="#dcdcdc",o2="#f8f8ff",a2="#daa520",s2="#ffd700",u2="#808080",l2="#008000",f2="#adff2f",h2="#808080",c2="#f0fff0",d2="#ff69b4",p2="#cd5c5c",v2="#4b0082",m2="#fffff0",y2="#f0e68c",g2="#fff0f5",_2="#e6e6fa",b2="#7cfc00",x2="#fffacd",T2="#add8e6",S2="#f08080",w2="#e0ffff",E2="#fafad2",O2="#d3d3d3",P2="#90ee90",C2="#d3d3d3",A2="#ffb6c1",R2="#ffa07a",I2="#20b2aa",M2="#87cefa",F2="#778899",D2="#778899",B2="#b0c4de",N2="#ffffe0",L2="#00ff00",U2="#32cd32",G2="#faf0e6",j2="#ff00ff",k2="#800000",$2="#66cdaa",z2="#0000cd",H2="#ba55d3",X2="#9370db",V2="#3cb371",W2="#7b68ee",Y2="#00fa9a",q2="#48d1cc",K2="#c71585",Z2="#191970",J2="#f5fffa",Q2="#ffe4e1",tR="#ffe4b5",eR="#ffdead",rR="#000080",nR="#fdf5e6",iR="#808000",oR="#6b8e23",aR="#ffa500",sR="#ff4500",uR="#da70d6",lR="#eee8aa",fR="#98fb98",hR="#afeeee",cR="#db7093",dR="#ffefd5",pR="#ffdab9",vR="#cd853f",mR="#ffc0cb",yR="#dda0dd",gR="#b0e0e6",_R="#800080",bR="#663399",xR="#ff0000",TR="#bc8f8f",SR="#4169e1",wR="#8b4513",ER="#fa8072",OR="#f4a460",PR="#2e8b57",CR="#fff5ee",AR="#a0522d",RR="#c0c0c0",IR="#87ceeb",MR="#6a5acd",FR="#708090",DR="#708090",BR="#fffafa",NR="#00ff7f",LR="#4682b4",UR="#d2b48c",GR="#008080",jR="#d8bfd8",kR="#ff6347",$R="#40e0d0",zR="#ee82ee",HR="#f5deb3",XR="#ffffff",VR="#f5f5f5",WR="#ffff00",YR="#9acd32",qR={aliceblue:lA,antiquewhite:fA,aqua:hA,aquamarine:cA,azure:dA,beige:pA,bisque:vA,black:mA,blanchedalmond:yA,blue:gA,blueviolet:_A,brown:bA,burlywood:xA,cadetblue:TA,chartreuse:SA,chocolate:wA,coral:EA,cornflowerblue:OA,cornsilk:PA,crimson:CA,cyan:AA,darkblue:RA,darkcyan:IA,darkgoldenrod:MA,darkgray:FA,darkgreen:DA,darkgrey:BA,darkkhaki:NA,darkmagenta:LA,darkolivegreen:UA,darkorange:GA,darkorchid:jA,darkred:kA,darksalmon:$A,darkseagreen:zA,darkslateblue:HA,darkslategray:XA,darkslategrey:VA,darkturquoise:WA,darkviolet:YA,deeppink:qA,deepskyblue:KA,dimgray:ZA,dimgrey:JA,dodgerblue:QA,firebrick:t2,floralwhite:e2,forestgreen:r2,fuchsia:n2,gainsboro:i2,ghostwhite:o2,goldenrod:a2,gold:s2,gray:u2,green:l2,greenyellow:f2,grey:h2,honeydew:c2,hotpink:d2,indianred:p2,indigo:v2,ivory:m2,khaki:y2,lavenderblush:g2,lavender:_2,lawngreen:b2,lemonchiffon:x2,lightblue:T2,lightcoral:S2,lightcyan:w2,lightgoldenrodyellow:E2,lightgray:O2,lightgreen:P2,lightgrey:C2,lightpink:A2,lightsalmon:R2,lightseagreen:I2,lightskyblue:M2,lightslategray:F2,lightslategrey:D2,lightsteelblue:B2,lightyellow:N2,lime:L2,limegreen:U2,linen:G2,magenta:j2,maroon:k2,mediumaquamarine:$2,mediumblue:z2,mediumorchid:H2,mediumpurple:X2,mediumseagreen:V2,mediumslateblue:W2,mediumspringgreen:Y2,mediumturquoise:q2,mediumvioletred:K2,midnightblue:Z2,mintcream:J2,mistyrose:Q2,moccasin:tR,navajowhite:eR,navy:rR,oldlace:nR,olive:iR,olivedrab:oR,orange:aR,orangered:sR,orchid:uR,palegoldenrod:lR,palegreen:fR,paleturquoise:hR,palevioletred:cR,papayawhip:dR,peachpuff:pR,peru:vR,pink:mR,plum:yR,powderblue:gR,purple:_R,rebeccapurple:bR,red:xR,rosybrown:TR,royalblue:SR,saddlebrown:wR,salmon:ER,sandybrown:OR,seagreen:PR,seashell:CR,sienna:AR,silver:RR,skyblue:IR,slateblue:MR,slategray:FR,slategrey:DR,snow:BR,springgreen:NR,steelblue:LR,tan:UR,teal:GR,thistle:jR,tomato:kR,turquoise:$R,violet:zR,wheat:HR,white:XR,whitesmoke:VR,yellow:WR,yellowgreen:YR};function Xt(r,t){return t===void 0&&(t=[]),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function op(r){var t=r.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function ap(r){return typeof r=="string"&&(r=qR[r.toLowerCase()]||r,r[0]==="#"&&(r=r.slice(1))),parseInt(r,16)}function Ee(r){return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)}function KR(){for(var r=[],t=[],e=0;e<32;e++)r[e]=e,t[e]=e;r[L.NORMAL_NPM]=L.NORMAL,r[L.ADD_NPM]=L.ADD,r[L.SCREEN_NPM]=L.SCREEN,t[L.NORMAL]=L.NORMAL_NPM,t[L.ADD]=L.ADD_NPM,t[L.SCREEN]=L.SCREEN_NPM;var n=[];return n.push(t),n.push(r),n}var sp=KR();function up(r,t){return sp[t?1:0][r]}function Sb(r,t,e,n){return e=e||new Float32Array(4),n||n===void 0?(e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t):(e[0]=r[0],e[1]=r[1],e[2]=r[2]),e[3]=t,e}function Cu(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;var e=r>>16&255,n=r>>8&255,i=r&255;return e=e*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(t*255<<24)+(e<<16)+(n<<8)+i}function lp(r,t,e,n){return e=e||new Float32Array(4),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,(n||n===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function wb(r,t){t===void 0&&(t=null);var e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+e);for(var n=0,i=0;n<e;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function Au(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var ZR={Float32Array,Uint32Array,Int32Array,Uint8Array};function JR(r,t){for(var e=0,n=0,i={},o=0;o<r.length;o++)n+=t[o],e+=r[o].length;for(var a=new ArrayBuffer(e*4),s=null,u=0,o=0;o<r.length;o++){var l=t[o],f=r[o],c=Au(f);i[c]||(i[c]=new ZR[c](a)),s=i[c];for(var h=0;h<f.length;h++){var d=(h/l|0)*n+u,p=h%l;s[d+p]=f[h]}u+=l}return new Float32Array(a)}function Ro(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function jh(r){return!(r&r-1)&&!!r}function kh(r){var t=(r>65535?1:0)<<4;r>>>=t;var e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function fn(r,t,e){var n=r.length,i;if(!(t>=n||e===0)){e=t+e>n?n-t:e;var o=n-e;for(i=t;i<o;++i)r[i]=r[i+e];r.length=o}}function on(r){return r===0?0:r<0?-1:1}var QR=0;function Nr(){return++QR}var Fm={};function ee(r,t,e){if(e===void 0&&(e=3),!Fm[t]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r):(n=n.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r),console.warn(n))),Fm[t]=!0}}var $h={},ae=Object.create(null),ve=Object.create(null);function tI(){var r;for(r in ae)ae[r].destroy();for(r in ve)ve[r].destroy()}function eI(){var r;for(r in ae)delete ae[r];for(r in ve)delete ve[r]}var zh=function(){function r(t,e,n){this.canvas=R.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||R.RESOLUTION,this.resize(t,e)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),r}();function Eb(r){var t=r.width,e=r.height,n=r.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,t,e),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=null,l,f,c;for(l=0;l<a;l+=4)o[l+3]!==0&&(f=l/4%t,c=~~(l/4/t),s.top===null&&(s.top=c),(s.left===null||f<s.left)&&(s.left=f),(s.right===null||s.right<f)&&(s.right=f+1),(s.bottom===null||s.bottom<c)&&(s.bottom=c));return s.top!==null&&(t=s.right-s.left,e=s.bottom-s.top+1,u=n.getImageData(s.left,s.top,t,e)),{height:e,width:t,data:u}}var Ob=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function rI(r){var t=Ob.exec(r);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var Ta;function Pb(r,t){if(t===void 0&&(t=globalThis.location),r.indexOf("data:")===0)return"";t=t||globalThis.location,Ta||(Ta=document.createElement("a")),Ta.href=r;var e=nn.parse(Ta.href),n=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!n||e.protocol!==t.protocol?"anonymous":""}function Io(r,t){var e=R.RETINA_PREFIX.exec(r);return e?parseFloat(e[1]):t!==void 0?t:1}const nI=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:ve,CanvasRenderTarget:zh,DATA_URI:Ob,EventEmitter:wn,ProgramCache:$h,TextureCache:ae,clearTextureCache:eI,correctBlendMode:up,createIndicesForQuads:wb,decomposeDataUri:rI,deprecation:ee,destroyTextureCache:tI,determineCrossOrigin:Pb,earcut:Jd,getBufferType:Au,getResolutionOfUrl:Io,hex2rgb:Xt,hex2string:op,interleaveTypedArrays:JR,isMobile:Se,isPow2:jh,isWebGLSupported:Tb,log2:kh,nextPow2:Ro,path:bb,premultiplyBlendMode:sp,premultiplyRgba:Sb,premultiplyTint:Cu,premultiplyTintToRgba:lp,removeItems:fn,rgb2hex:Ee,sayHello:xb,sign:on,skipHello:uA,string2hex:ap,trimCanvas:Eb,uid:Nr,url:nn},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oe=Math.PI*2,Cb=180/Math.PI,Lr=Math.PI/180,Nt;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(Nt||(Nt={}));var X=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),Sa=[new X,new X,new X,new X],V=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(i),this.type=Nt.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.intersects=function(t,e){if(!e){var n=this.x<t.x?t.x:this.x,i=this.right>t.right?t.right:this.right;if(i<=n)return!1;var o=this.y<t.y?t.y:this.y,a=this.bottom>t.bottom?t.bottom:this.bottom;return a>o}var s=this.left,u=this.right,l=this.top,f=this.bottom;if(u<=s||f<=l)return!1;var c=Sa[0].set(t.left,t.top),h=Sa[1].set(t.left,t.bottom),d=Sa[2].set(t.right,t.top),p=Sa[3].set(t.right,t.bottom);if(d.x<=c.x||h.y<=c.y)return!1;var v=Math.sign(e.a*e.d-e.b*e.c);if(v===0||(e.apply(c,c),e.apply(h,h),e.apply(d,d),e.apply(p,p),Math.max(c.x,h.x,d.x,p.x)<=s||Math.min(c.x,h.x,d.x,p.x)>=u||Math.max(c.y,h.y,d.y,p.y)<=l||Math.min(c.y,h.y,d.y,p.y)>=f))return!1;var m=v*(h.y-c.y),y=v*(c.x-h.x),_=m*s+y*l,g=m*u+y*l,x=m*s+y*f,b=m*u+y*f;if(Math.max(_,g,x,b)<=m*c.x+y*c.y||Math.min(_,g,x,b)>=m*p.x+y*p.y)return!1;var T=v*(c.y-d.y),S=v*(d.x-c.x),O=T*s+S*l,w=T*u+S*l,E=T*s+S*f,P=T*u+S*f;return!(Math.max(O,w,E,P)<=T*c.x+S*c.y||Math.min(O,w,E,P)>=T*p.x+S*p.y)},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=i,this.height=Math.max(o-i,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=i-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=i,this.height=o-i,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Ab=function(){function r(t,e,n){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=Nt.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,o=this.y-e;return i*=i,o*=o,i+o<=n},r.prototype.getBounds=function(){return new V(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},r}(),Rb=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=e,this.width=n,this.height=i,this.type=Nt.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(e-this.y)/this.height;return n*=n,i*=i,n+i<=1},r.prototype.getBounds=function(){return new V(this.x-this.width,this.y-this.height,this.width,this.height)},r.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),so=function(){function r(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=Nt.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var t=this.points.slice(),e=new r(t);return e.closeStroke=this.closeStroke,e},r.prototype.contains=function(t,e){for(var n=!1,i=this.points.length/2,o=0,a=i-1;o<i;a=o++){var s=this.points[o*2],u=this.points[o*2+1],l=this.points[a*2],f=this.points[a*2+1],c=u>e!=f>e&&t<(l-s)*((e-u)/(f-u))+s;c&&(n=!n)}return n},r.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]")},r}(),Ib=function(){function r(t,e,n,i,o){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=20),this.x=t,this.y=e,this.width=n,this.height=i,this.radius=o,this.type=Nt.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+n&&e<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var i=t-(this.x+n),o=e-(this.y+n),a=n*n;if(i*i+o*o<=a||(i=t-(this.x+this.width-n),i*i+o*o<=a)||(o=e-(this.y+this.height-n),i*i+o*o<=a)||(i=t-(this.x+n),i*i+o*o<=a))return!0}return!1},r.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},r}(),Rr=function(){function r(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),Ft=function(){function r(t,e,n,i,o,a){t===void 0&&(t=1),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,n,i,o,a){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},r.prototype.apply=function(t,e){e=e||new X;var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new X;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return e.x=this.d*n*i+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*o+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,o=this.c,a=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=o*e-this.d*n,this.d=o*n+this.d*e,this.tx=a*e-this.ty*n,this.ty=a*n+this.ty*e,this},r.prototype.append=function(t){var e=this.a,n=this.b,i=this.c,o=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*n+t.b*o,this.c=t.c*e+t.d*i,this.d=t.c*n+t.d*o,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*o+this.ty,this},r.prototype.setTransform=function(t,e,n,i,o,a,s,u,l){return this.a=Math.cos(s+l)*o,this.b=Math.sin(s+l)*o,this.c=-Math.sin(s-u)*a,this.d=Math.cos(s-u)*a,this.tx=t-(n*this.a+i*this.c),this.ty=e-(n*this.b+i*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,n=this.b,i=this.c,o=this.d,a=t.pivot,s=-Math.atan2(-i,o),u=Math.atan2(n,e),l=Math.abs(s+u);return l<1e-5||Math.abs(oe-l)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=u),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx+(a.x*e+a.y*i),t.position.y=this.ty+(a.x*n+a.y*o),t},r.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,o=this.tx,a=t*i-e*n;return this.a=i/a,this.b=-e/a,this.c=-n/a,this.d=t/a,this.tx=(n*this.ty-i*o)/a,this.ty=-(t*this.ty-e*o)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Zr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Jr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Qr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],tn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Hh=[],Mb=[],wa=Math.sign;function iI(){for(var r=0;r<16;r++){var t=[];Hh.push(t);for(var e=0;e<16;e++)for(var n=wa(Zr[r]*Zr[e]+Qr[r]*Jr[e]),i=wa(Jr[r]*Zr[e]+tn[r]*Jr[e]),o=wa(Zr[r]*Qr[e]+Qr[r]*tn[e]),a=wa(Jr[r]*Qr[e]+tn[r]*tn[e]),s=0;s<16;s++)if(Zr[s]===n&&Jr[s]===i&&Qr[s]===o&&tn[s]===a){t.push(s);break}}for(var r=0;r<16;r++){var u=new Ft;u.set(Zr[r],Jr[r],Qr[r],tn[r],0,0),Mb.push(u)}}iI();var mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Zr[r]},uY:function(r){return Jr[r]},vX:function(r){return Qr[r]},vY:function(r){return tn[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return Hh[r][t]},sub:function(r,t){return Hh[r][mt.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?mt.S:mt.N:Math.abs(t)*2<=Math.abs(r)?r>0?mt.E:mt.W:t>0?r>0?mt.SE:mt.SW:r>0?mt.NE:mt.NW},matrixAppendRotationInv:function(r,t,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=Mb[mt.inv(t)];i.tx=e,i.ty=n,r.append(i)}},fp=function(){function r(){this.worldTransform=new Ft,this.localTransform=new Ft,this.position=new Rr(this.onChange,this,0,0),this.scale=new Rr(this.onChange,this,1,1),this.pivot=new Rr(this.onChange,this,0,0),this.skew=new Rr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */R.SORTABLE_CHILDREN=!1;var Mo=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?V.EMPTY:(t=t||new V(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var n=t.a,i=t.b,o=t.c,a=t.d,s=t.tx,u=t.ty,l=n*e.x+o*e.y+s,f=i*e.x+a*e.y+u;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)},r.prototype.addQuad=function(t){var e=this.minX,n=this.minY,i=this.maxX,o=this.maxY,a=t[0],s=t[1];e=a<e?a:e,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,a=t[2],s=t[3],e=a<e?a:e,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,a=t[4],s=t[5],e=a<e?a:e,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,a=t[6],s=t[7],e=a<e?a:e,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,this.minX=e,this.minY=n,this.maxX=i,this.maxY=o},r.prototype.addFrame=function(t,e,n,i,o){this.addFrameMatrix(t.worldTransform,e,n,i,o)},r.prototype.addFrameMatrix=function(t,e,n,i,o){var a=t.a,s=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,h=this.minX,d=this.minY,p=this.maxX,v=this.maxY,m=a*e+u*n+f,y=s*e+l*n+c;h=m<h?m:h,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,m=a*i+u*n+f,y=s*i+l*n+c,h=m<h?m:h,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,m=a*e+u*o+f,y=s*e+l*o+c,h=m<h?m:h,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,m=a*i+u*o+f,y=s*i+l*o+c,h=m<h?m:h,d=y<d?y:d,p=m>p?m:p,v=y>v?y:v,this.minX=h,this.minY=d,this.maxX=p,this.maxY=v},r.prototype.addVertexData=function(t,e,n){for(var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY,u=e;u<n;u+=2){var l=t[u],f=t[u+1];i=l<i?l:i,o=f<o?f:o,a=l>a?l:a,s=f>s?f:s}this.minX=i,this.minY=o,this.maxX=a,this.maxY=s},r.prototype.addVertices=function(t,e,n,i){this.addVerticesMatrix(t.worldTransform,e,n,i)},r.prototype.addVerticesMatrix=function(t,e,n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=o);for(var s=t.a,u=t.b,l=t.c,f=t.d,c=t.tx,h=t.ty,d=this.minX,p=this.minY,v=this.maxX,m=this.maxY,y=n;y<i;y+=2){var _=e[y],g=e[y+1],x=s*_+l*g+c,b=f*g+u*_+h;d=Math.min(d,x-o),v=Math.max(v,x+o),p=Math.min(p,b-a),m=Math.max(m,b+a)}this.minX=d,this.minY=p,this.maxX=v,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},r.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=o&&i<=a){var s=this.minX,u=this.minY,l=this.maxX,f=this.maxY;this.minX=n<s?n:s,this.minY=i<u?i:u,this.maxX=o>l?o:l,this.maxY=a>f?a:f}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=o&&i<=a){var s=this.minX,u=this.minY,l=this.maxX,f=this.maxY;this.minX=n<s?n:s,this.minY=i<u?i:u,this.maxX=o>l?o:l,this.maxY=a>f?a:f}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,n,i,o,a){t-=o,e-=a,n+=o,i+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xh=function(r,t){return Xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Xh(r,t)};function hp(r,t){Xh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var St=function(r){hp(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new fp,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Mo,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var n=Object.keys(e),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(e,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new V),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new V),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Mo);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,e);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},t.prototype.toGlobal=function(e,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)},t.prototype.toLocal=function(e,n,i,o){return n&&(e=n.toGlobal(e,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,n,i,o,a,s,u,l,f){return e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=1),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),l===void 0&&(l=0),f===void 0&&(f=0),this.position.x=e,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=u,this.pivot.x=l,this.pivot.y=f,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new cp),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*Cb},set:function(e){this.transform.rotation=e*Lr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),t}(wn),cp=function(r){hp(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(St);St.prototype.displayObjectUpdateTransform=St.prototype.updateTransform;function oI(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var st=function(r){hp(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=R.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var a=n[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return n[0]},t.prototype.addChildAt=function(e,n){if(n<0||n>this.children.length)throw new Error(e+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e},t.prototype.swapChildren=function(e,n){if(e!==n){var i=this.getChildIndex(e),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=e,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(e){var n=this.children.indexOf(e);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(e,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(e);fn(this.children,i,1),this.children.splice(n,0,e),this.onChildrenChange(n)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var a=n[0],s=this.children.indexOf(a);if(s===-1)return null;a.parent=null,a.transform._parentID=-1,fn(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return n[0]},t.prototype.removeChildAt=function(e){var n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,fn(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n},t.prototype.removeChildren=function(e,n){e===void 0&&(e=0),n===void 0&&(n=this.children.length);var i=e,o=n,a=o-i,s;if(a>0&&a<=o){s=this.children.splice(i,a);for(var u=0;u<s.length;++u)s[u].parent=null,s[u].transform&&(s[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var u=0;u<s.length;++u)s[u].emit("removed",this),this.emit("childRemoved",s[u],this,u);return s}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,!e&&o.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(oI),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,n=this.children.length;e<n;++e){var i=this.children[e];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var n=this.children[e];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,n){n===void 0&&(n=!1);var i=r.prototype.getLocalBounds.call(this,e);if(!n)for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o];s.visible&&s.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var n=e.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,o))this._render(e);else if(this.cullArea)return;for(var a=0,s=this.children.length;a<s;++a){var u=this.children[a],l=u.cullable;u.cullable=l||!this.cullArea,u.render(e),u.cullable=l}}},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}},t.prototype.renderAdvanced=function(e){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var a=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==At.NONE));if(a&&e.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var o=0,s=this.children.length;o<s;++o)this.children[o].render(e)}a&&e.batch.flush(),i&&e.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof e=="boolean"?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<i.length;++o)i[o].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var n=this.getLocalBounds().width;n!==0?this.scale.x=e/n:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var n=this.getLocalBounds().height;n!==0?this.scale.y=e/n:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(St);st.prototype.containerUpdateTransform=st.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uo=function(){return uo=Object.assign||function(t){for(var e=arguments,n,i=1,o=arguments.length;i<o;i++){n=e[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uo.apply(this,arguments)},nt;(function(r){r.Application="application",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Loader="loader",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser"})(nt||(nt={}));var Dm=function(r){if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");var t=typeof r.extension!="object"?{type:r.extension}:r.extension;r=uo(uo({},t),{ref:r})}if(typeof r=="object")r=uo({},r);else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},ue={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var r=arguments,t=this,e=[],n=0;n<arguments.length;n++)e[n]=r[n];return e.map(Dm).forEach(function(i){i.type.forEach(function(o){var a,s;return(s=(a=t._removeHandlers)[o])===null||s===void 0?void 0:s.call(a,i)})}),this},add:function(){for(var r=arguments,t=this,e=[],n=0;n<arguments.length;n++)e[n]=r[n];return e.map(Dm).forEach(function(i){i.type.forEach(function(o){var a=t._addHandlers,s=t._queue;a[o]?a[o](i):(s[o]=s[o]||[],s[o].push(i))})}),this},handle:function(r,t,e){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[r]||i[r])throw new Error("Extension type "+r+" already has a handler");n[r]=t,i[r]=e;var o=this._queue;return o[r]&&(o[r].forEach(function(a){return t(a)}),delete o[r]),this},handleByMap:function(r,t){return this.handle(r,function(e){t[e.name]=e.ref},function(e){delete t[e.name]})},handleByList:function(r,t){return this.handle(r,function(e){var n,i;t.includes(e.ref)||(t.push(e.ref),r===nt.Loader&&((i=(n=e.ref).add)===null||i===void 0||i.call(n)))},function(e){var n=t.indexOf(e.ref);n!==-1&&t.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zt=function(){function r(t){this.items=[],this._name=t,this._aliasCount=0}return r.prototype.emit=function(t,e,n,i,o,a,s,u){if(arguments.length>8)throw new Error("max arguments reached");var l=this,f=l.name,c=l.items;this._aliasCount++;for(var h=0,d=c.length;h<d;h++)c[h][f](t,e,n,i,o,a,s,u);return c===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},r.prototype.contains=function(t){return this.items.indexOf(t)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(zt.prototype,{dispatch:{value:zt.prototype.emit},run:{value:zt.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */R.TARGET_FPMS=.06;var er;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(er||(er={}));var jl=function(){function r(t,e,n,i){e===void 0&&(e=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=i}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Bt=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new jl(null,null,1/0),this.deltaMS=1/R.TARGET_FPMS,this.elapsedMS=1/R.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,n){return n===void 0&&(n=er.NORMAL),this._addListener(new jl(t,e,n))},r.prototype.addOnce=function(t,e,n){return n===void 0&&(n=er.NORMAL),this._addListener(new jl(t,e,n,!0))},r.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(!e)t.connect(n);else{for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var n=this._head.next;n;)n.match(t,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*R.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,R.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}(),Fb=function(){function r(){}return r.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,er.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Bt.shared:new Bt,t.autoStart&&this.start()},r.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},r.extension=nt.Application,r}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */R.PREFER_ENV=Se.any?Ge.WEBGL:Ge.WEBGL2;R.STRICT_TEXTURE_CACHE=!1;var Fo=[];function Ru(r,t){if(!r)return null;var e="";if(typeof r=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(e=n[1].toLowerCase())}for(var i=Fo.length-1;i>=0;--i){var o=Fo[i];if(o.test&&o.test(r,e))return new o(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vh=function(r,t){return Vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Vh(r,t)};function ft(r,t){Vh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Wh=function(){return Wh=Object.assign||function(t){for(var e=arguments,n,i=1,o=arguments.length;i<o;i++){n=e[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Wh.apply(this,arguments)};function aI(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}var gn=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new zt("setRealSize"),this.onUpdate=new zt("update"),this.onError=new zt("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,n){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),En=function(r){ft(t,r);function t(e,n){var i=this,o=n||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return i=r.call(this,a,s)||this,i.data=e,i}return t.prototype.upload=function(e,n,i){var o=e.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===we.UNPACK);var a=n.realWidth,s=n.realHeight;return i.width===a&&i.height===s?o.texSubImage2D(n.target,0,0,0,a,s,n.format,i.type,this.data):(i.width=a,i.height=s,o.texImage2D(n.target,0,i.internalFormat,a,s,0,n.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(gn),sI={scaleMode:Qt.NEAREST,format:A.RGBA,alphaMode:we.NPM},K=function(r){ft(t,r);function t(e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=r.call(this)||this;n=n||{};var o=n.alphaMode,a=n.mipmap,s=n.anisotropicLevel,u=n.scaleMode,l=n.width,f=n.height,c=n.wrapMode,h=n.format,d=n.type,p=n.target,v=n.resolution,m=n.resourceOptions;return e&&!(e instanceof gn)&&(e=Ru(e,m),e.internal=!0),i.resolution=v||R.RESOLUTION,i.width=Math.round((l||0)*i.resolution)/i.resolution,i.height=Math.round((f||0)*i.resolution)/i.resolution,i._mipmap=a!==void 0?a:R.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:R.ANISOTROPIC_LEVEL,i._wrapMode=c||R.WRAP_MODE,i._scaleMode=u!==void 0?u:R.SCALE_MODE,i.format=h||A.RGBA,i.type=d||U.UNSIGNED_BYTE,i.target=p||Fr.TEXTURE_2D,i.alphaMode=o!==void 0?o:we.UNPACK,i.uid=Nr(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&f>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(e),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,n){var i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,n,i){return i=i||this.resolution,this.setRealSize(e*i,n*i,i)},t.prototype.setRealSize=function(e,n,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=jh(this.realWidth)&&jh(this.realHeight)},t.prototype.setResolution=function(e){var n=this.resolution;return n===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*n)/e,this.height=Math.round(this.height*n)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ve[this.cacheId],delete ae[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,i){i===void 0&&(i=R.STRICT_TEXTURE_CACHE);var o=typeof e=="string",a=null;if(o)a=e;else{if(!e._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";e._pixiId=s+"_"+Nr()}a=e._pixiId}var u=ve[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||(u=new t(e,n),u.cacheId=a,t.addToCache(u,a)),u},t.fromBuffer=function(e,n,i,o){e=e||new Float32Array(n*i*4);var a=new En(e,{width:n,height:i}),s=e instanceof Float32Array?U.FLOAT:U.UNSIGNED_BYTE;return new t(a,Object.assign({},sI,o||{width:n,height:i,type:s}))},t.addToCache=function(e,n){n&&(e.textureCacheIds.indexOf(n)===-1&&e.textureCacheIds.push(n),ve[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),ve[n]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var n=ve[e];if(n){var i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete ve[e],n}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)delete ve[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(wn),Iu=function(r){ft(t,r);function t(e,n){var i=this,o=n||{},a=o.width,s=o.height;i=r.call(this,a,s)||this,i.items=[],i.itemDirtyIds=[];for(var u=0;u<e;u++){var l=new K;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(e,n){for(var i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof gn?this.addResourceAt(e[i],i):this.addResourceAt(Ru(e[i],n),i))},t.prototype.dispose=function(){for(var e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var n=this.items.map(function(o){return o.resource}).filter(function(o){return o}),i=n.map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=e.items[0],a=o.realWidth,s=o.realHeight;return e.resize(a,s),Promise.resolve(e)}),this._load},t}(gn),dp=function(r){ft(t,r);function t(e,n){var i=this,o=n||{},a=o.width,s=o.height,u,l;return Array.isArray(e)?(u=e,l=e.length):l=e,i=r.call(this,l,{width:a,height:s})||this,u&&i.initFromArray(u,n),i}return t.prototype.addBaseTextureAt=function(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Fr.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,n,i){var o=this,a=o.length,s=o.itemDirtyIds,u=o.items,l=e.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,a,0,n.format,i.type,null);for(var f=0;f<a;f++){var c=u[f];s[f]<c.dirtyId&&(s[f]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,f,c.resource.width,c.resource.height,1,n.format,i.type,c.resource.source))}return!0},t}(Iu),rr=function(r){ft(t,r);function t(e){var n=this,i=e,o=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return n=r.call(this,o,a)||this,n.source=e,n.noSubImage=!1,n}return t.crossOrigin=function(e,n,i){i===void 0&&n.indexOf("data:")!==0?e.crossOrigin=Pb(n):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(e,n,i,o){var a=e.gl,s=n.realWidth,u=n.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===we.UNPACK),!this.noSubImage&&n.target===a.TEXTURE_2D&&i.width===s&&i.height===u?a.texSubImage2D(a.TEXTURE_2D,0,0,0,n.format,i.type,o):(i.width=s,i.height=u,a.texImage2D(n.target,0,i.internalFormat,n.format,i.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(n,i),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(gn),pp=function(r){ft(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var n=globalThis.OffscreenCanvas;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(rr),vp=function(r){ft(t,r);function t(e,n){var i=this,o=n||{},a=o.width,s=o.height,u=o.autoLoad,l=o.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");i=r.call(this,6,{width:a,height:s})||this;for(var f=0;f<t.SIDES;f++)i.items[f].target=Fr.TEXTURE_CUBE_MAP_POSITIVE_X+f;return i.linkBaseTexture=l!==!1,e&&i.initFromArray(e,n),u!==!1&&i.load(),i}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Fr.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Fr.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.parentTextureArray=this.baseTexture,this.items[n]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[n]=e,this},t.prototype.upload=function(e,n,i){for(var o=this.itemDirtyIds,a=0;a<t.SIDES;a++){var s=this.items[a];(o[a]<s.dirtyId||i.dirtyId<n.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,i),o[a]=s.dirtyId):o[a]<-1&&(e.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),o[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Iu),Mu=function(r){ft(t,r);function t(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;rr.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=r.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:R.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(e){var n=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(i,o){var a=n.source;n.url=a.src;var s=function(){n.destroyed||(a.onload=null,a.onerror=null,n.resize(a.width,a.height),n._load=null,n.createBitmap?i(n.process()):i(n))};a.complete&&a.src?s():(a.onload=s,a.onerror=function(u){o(u),n.onError.emit(u)})}),this._load)},t.prototype.process=function(){var e=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,o=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:o?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return i(a,0,0,n.width,n.height,{premultiplyAlpha:e.alphaMode===null||e.alphaMode===we.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,n,i,this.bitmap),!this.preserveBitmap){var o=!0,a=n._glTextures;for(var s in a){var u=a[s];if(u!==i&&u.dirtyId!==n.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(rr),mp=function(r){ft(t,r);function t(e,n){var i=this;return n=n||{},i=r.call(this,R.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=e,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(n){if(e._resolve=function(){e.resize(e.source.width,e.source.height),n(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,n=new Image;rr.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){e._resolve&&(n.onerror=null,e.onError.emit(i))},n.onload=function(){if(e._resolve){var i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*e.scale,s=o*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/o*i,s=e._overrideHeight||e._overrideWidth/i*o),a=Math.round(a),s=Math.round(s);var u=e.source;u.width=a,u.height=s,u._pixiId="canvas_"+Nr(),u.getContext("2d").drawImage(n,0,0,i,o,0,0,a,s),e._resolve(),e._resolve=null}}},t.getSize=function(e){var n=t.SVG_SIZE.exec(e),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,n){return n==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(rr),yp=function(r){ft(t,r);function t(e,n){var i=this;if(n=n||{},!(e instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];rr.crossOrigin(o,a,n.crossorigin);for(var s=0;s<e.length;++s){var u=document.createElement("source"),l=e[s],f=l.src,c=l.mime;f=f||e[s];var h=f.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);c=c||t.MIME_TYPES[d]||"video/"+d,u.src=f,u.type=c,o.appendChild(u)}e=o}return i=r.call(this,e)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(e){if(!this.destroyed){var n=Bt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){e.valid?i(e):(e._resolve=i,n.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState>2},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Bt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Bt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(e.videoWidth,e.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Bt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Bt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Bt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(rr),gp=function(r){ft(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&e instanceof ImageBitmap},t}(rr);Fo.push(Mu,gp,pp,yp,mp,En,vp,dp);var Db={__proto__:null,Resource:gn,BaseImageResource:rr,INSTALLED:Fo,autoDetectResource:Ru,AbstractMultiResource:Iu,ArrayResource:dp,BufferResource:En,CanvasResource:pp,CubeResource:vp,ImageResource:Mu,SVGResource:mp,VideoResource:yp,ImageBitmapResource:gp},uI=function(r){ft(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,n,i){var o=e.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===we.UNPACK);var a=n.realWidth,s=n.realHeight;return i.width===a&&i.height===s?o.texSubImage2D(n.target,0,0,0,a,s,n.format,i.type,this.data):(i.width=a,i.height=s,o.texImage2D(n.target,0,i.internalFormat,a,s,0,n.format,i.type,this.data)),!0},t}(En),qs=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new zt("disposeFramebuffer"),this.multisample=ct.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new K(null,{scaleMode:Qt.NEAREST,resolution:1,mipmap:le.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new K(new uI(null,{width:this.width,height:this.height}),{scaleMode:Qt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:le.OFF,format:A.DEPTH_COMPONENT,type:U.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],o=i.resolution;i.setSize(t/o,e/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),_p=function(r){ft(t,r);function t(e){e===void 0&&(e={});var n=this;if(typeof e=="number"){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:i,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:ct.NONE,n=r.call(this,null,e)||this,n.mipmap=le.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new qs(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return t.prototype.resize=function(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(K),bp=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,n){var i=e.width,o=e.height;if(n){var a=t.width/2/i,s=t.height/2/o,u=t.x/i+a,l=t.y/o+s;n=mt.add(n,mt.NW),this.x0=u+a*mt.uX(n),this.y0=l+s*mt.uY(n),n=mt.add(n,2),this.x1=u+a*mt.uX(n),this.y1=l+s*mt.uY(n),n=mt.add(n,2),this.x2=u+a*mt.uX(n),this.y2=l+s*mt.uY(n),n=mt.add(n,2),this.x3=u+a*mt.uX(n),this.y3=l+s*mt.uY(n)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),Bm=new bp;function Ea(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}var G=function(r){ft(t,r);function t(e,n,i,o,a,s){var u=r.call(this)||this;if(u.noFrame=!1,n||(u.noFrame=!0,n=new V(0,0,1,1)),e instanceof t&&(e=e.baseTexture),u.baseTexture=e,u._frame=n,u.trim=o,u.valid=!1,u._uvs=Bm,u.uvMatrix=null,u.orig=i||n,u._rotate=Number(a||0),a===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new X(s.x,s.y):new X(0,0),u._updateID=0,u.textureCacheIds=[],e.valid?u.noFrame?e.valid&&u.onBaseTextureUpdated(e):u.frame=n:e.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&e.on("update",u.onBaseTextureUpdated,u),u}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture.resource;n&&n.url&&ae[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&e,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i},t.prototype.updateUvs=function(){this._uvs===Bm&&(this._uvs=new bp),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i=R.STRICT_TEXTURE_CACHE);var o=typeof e=="string",a=null;if(o)a=e;else if(e instanceof K){if(!e.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";e.cacheId=s+"-"+Nr(),K.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";e._pixiId=s+"_"+Nr()}a=e._pixiId}var u=ae[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return!u&&!(e instanceof K)?(n.resolution||(n.resolution=Io(e)),u=new t(new K(e,n)),u.baseTexture.cacheId=a,K.addToCache(u.baseTexture,a),t.addToCache(u,a)):!u&&e instanceof K&&(u=new t(e),t.addToCache(u,a)),u},t.fromURL=function(e,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),o=t.from(e,Object.assign({resourceOptions:i},n),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(e,n,i,o){return new t(K.fromBuffer(e,n,i,o))},t.fromLoader=function(e,n,i,o){var a=new K(e,Object.assign({scaleMode:R.SCALE_MODE,resolution:Io(n)},o)),s=a.resource;s instanceof Mu&&(s.url=n);var u=new t(a);return i||(i=n),K.addToCache(u.baseTexture,i),t.addToCache(u,i),i!==n&&(K.addToCache(u.baseTexture,n),t.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise(function(l){u.baseTexture.once("loaded",function(){return l(u)})})},t.addToCache=function(e,n){n&&(e.textureCacheIds.indexOf(n)===-1&&e.textureCacheIds.push(n),ae[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),ae[n]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var n=ae[e];if(n){var i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete ae[e],n}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)ae[e.textureCacheIds[o]]===e&&delete ae[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var n=e.x,i=e.y,o=e.width,a=e.height,s=n+o>this.baseTexture.width,u=i+a>this.baseTexture.height;if(s||u){var l=s&&u?"and":"or",f="X: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.width,c="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(f+" "+l+" "+c))}this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new K),Ea(t._EMPTY),Ea(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=R.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(K.from(e)),Ea(t._WHITE),Ea(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(wn),Ur=function(r){ft(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,n,i){i===void 0&&(i=!0);var o=this.baseTexture.resolution,a=Math.round(e*o)/o,s=Math.round(n*o)/o;this.valid=a>0&&s>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(a,s),this.updateUvs()},t.prototype.setResolution=function(e){var n=this.baseTexture;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))},t.create=function(e){for(var n=arguments,i=[],o=1;o<arguments.length;o++)i[o-1]=n[o];return typeof e=="number"&&(ee("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new _p(e))},t}(G),Bb=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,n){n===void 0&&(n=ct.NONE);var i=new _p(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new Ur(i)},r.prototype.getOptimalTexture=function(t,e,n,i){n===void 0&&(n=1),i===void 0&&(i=ct.NONE);var o;t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Ro(t),e=Ro(e),o=((t&65535)<<16|e&65535)>>>0,i>1&&(o+=i*4294967296)):o=i>1?-i:-1,this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,i)),a.filterPoolKey=o,a.setResolution(n),a},r.prototype.getFilterTexture=function(t,e,n){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||ct.NONE);return i.filterFrame=t.filterFrame,i},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),Yh=function(){function r(t,e,n,i,o,a,s){e===void 0&&(e=0),n===void 0&&(n=!1),i===void 0&&(i=U.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=i,this.stride=o,this.start=a,this.instance=s}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,n,i,o){return new r(t,e,n,i,o)},r}(),lI=0,Mt=function(){function r(t,e,n){e===void 0&&(e=!0),n===void 0&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=lI++,this.disposeRunner=new zt("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Be.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Be.ELEMENT_ARRAY_BUFFER:Be.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),fI={Float32Array,Uint32Array,Int32Array,Uint8Array};function hI(r,t){for(var e=0,n=0,i={},o=0;o<r.length;o++)n+=t[o],e+=r[o].length;for(var a=new ArrayBuffer(e*4),s=null,u=0,o=0;o<r.length;o++){var l=t[o],f=r[o],c=Au(f);i[c]||(i[c]=new fI[c](a)),s=i[c];for(var h=0;h<f.length;h++){var d=(h/l|0)*n+u,p=h%l;s[d+p]=f[h]}u+=l}return new Float32Array(a)}var Nm={5126:4,5123:2,5121:1},cI=0,dI={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Ii=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=cI++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new zt("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,n,i,o,a,s,u){if(n===void 0&&(n=0),i===void 0&&(i=!1),u===void 0&&(u=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Mt||(e instanceof Array&&(e=new Float32Array(e)),e=new Mt(e));var l=t.split("|");if(l.length>1){for(var f=0;f<l.length;f++)this.addAttribute(l[f],e,n,i,o);return this}var c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Yh(c,n,i,o,a,s,u),this.instanced=this.instanced||u,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Mt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Mt(t)),t.type=Be.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],n=new Mt,i;for(i in this.attributes){var o=this.attributes[i],a=this.buffers[o.buffer];t.push(a.data),e.push(o.size*Nm[o.type]/4),o.buffer=0}for(n.data=hI(t,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],n=this.buffers[e.buffer];return n.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Mt(this.buffers[e].data.slice(0));for(var e in this.attributes){var n=this.attributes[e];t.attributes[e]=new Yh(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Be.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,n=[],i=[],o=[],a,s=0;s<t.length;s++){a=t[s];for(var u=0;u<a.buffers.length;u++)i[u]=i[u]||0,i[u]+=a.buffers[u].data.length,o[u]=0}for(var s=0;s<a.buffers.length;s++)n[s]=new dI[Au(a.buffers[s].data)](i[s]),e.buffers[s]=new Mt(n[s]);for(var s=0;s<t.length;s++){a=t[s];for(var u=0;u<a.buffers.length;u++)n[u].set(a.buffers[u].data,o[u]),o[u]+=a.buffers[u].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Be.ELEMENT_ARRAY_BUFFER;for(var l=0,f=0,c=0,h=0,s=0;s<a.buffers.length;s++)if(a.buffers[s]!==a.indexBuffer){h=s;break}for(var s in a.attributes){var d=a.attributes[s];(d.buffer|0)===h&&(f+=d.size*Nm[d.type]/4)}for(var s=0;s<t.length;s++){for(var p=t[s].indexBuffer.data,u=0;u<p.length;u++)e.indexBuffer.data[u+c]+=l;l+=t[s].buffers[h].data.length/f,c+=p.length}}return e},r}(),Nb=function(r){ft(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(Ii),xp=function(r){ft(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Mt(e.vertices),e.uvBuffer=new Mt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,n){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+n.width/e.width,this.uvs[3]=o,this.uvs[4]=i+n.width/e.width,this.uvs[5]=o+n.height/e.height,this.uvs[6]=i,this.uvs[7]=o+n.height/e.height,i=n.x,o=n.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+n.width,this.vertices[3]=o,this.vertices[4]=i+n.width,this.vertices[5]=o+n.height,this.vertices[6]=i,this.vertices[7]=o+n.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Ii),pI=0,Dr=function(){function r(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=pI++,this.static=!!e,this.ubo=!!n,t instanceof Mt?(this.buffer=t,this.buffer.type=Be.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Mt(new Float32Array(1)),this.buffer.type=Be.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,n){if(!this.ubo)this.uniforms[t]=new r(e,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,n){return new r(t,e,n)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),Lb=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ct.NONE,this.sourceFrame=new V,this.destinationFrame=new V,this.bindingSourceFrame=new V,this.bindingDestinationFrame=new V,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),Oa=[new X,new X,new X,new X],kl=new Ft,Tp=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Bb,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Nb,this.quadUv=new xp,this.tempRect=new V,this.activeState={},this.globalUniforms=new Dr({outputFrame:new V,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var n,i,o=this.renderer,a=this.defaultFilterStack,s=this.statePool.pop()||new Lb,u=this.renderer.renderTexture,l=e[0].resolution,f=e[0].multisample,c=e[0].padding,h=e[0].autoFit,d=(n=e[0].legacy)!==null&&n!==void 0?n:!0,p=1;p<e.length;p++){var v=e[p];l=Math.min(l,v.resolution),f=Math.min(f,v.multisample),c=this.useMaxPadding?Math.max(c,v.padding):c+v.padding,h=h&&v.autoFit,d=d||((i=v.legacy)!==null&&i!==void 0?i:!0)}a.length===1&&(this.defaultFilterStack[0].renderTexture=u.current),a.push(s),s.resolution=l,s.multisample=f,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(c);var m=this.tempRect.copyFrom(u.sourceFrame);o.projection.transform&&this.transformAABB(kl.copyFrom(o.projection.transform).invert(),m),h?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,u.current?u.current.resolution:o.resolution,u.sourceFrame,u.destinationFrame,o.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,f),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(u.sourceFrame),s.bindingDestinationFrame.copyFrom(u.destinationFrame),s.transform=o.projection.transform,o.projection.transform=null,u.bind(s.renderTexture,s.sourceFrame,y),o.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var o=i.inputSize,a=i.inputPixel,s=i.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=i.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,e.renderTexture,l.renderTexture,ye.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var f=e.renderTexture,c=this.getOptimalFilterTexture(f.width,f.height,e.resolution);c.filterFrame=f.filterFrame;var h=0;for(h=0;h<n.length-1;++h){h===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(f.width,f.height,e.resolution),c.filterFrame=f.filterFrame),n[h].apply(this,f,c,ye.CLEAR,e);var d=f;f=c,c=d}n[h].apply(this,f,l.renderTexture,ye.BLEND,e),h>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(f),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=ye.CLEAR);var n=this.renderer,i=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,i.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=o.stateId&1||this.forceClear;(e===ye.CLEAR||e===ye.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,n,i){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Te.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Te.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,i=n.sourceFrame,o=n.destinationFrame,a=e._texture.orig,s=t.set(o.width,0,0,o.height,i.x,i.y),u=e.worldTransform.copyTo(Ft.TEMP_MATRIX);return u.invert(),s.prepend(u),s.scale(1/a.width,1/a.height),s.translate(e.anchor.x,e.anchor.y),s},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,n,i){return n===void 0&&(n=1),i===void 0&&(i=ct.NONE),this.texturePool.getOptimalTexture(t,e,n,i)},r.prototype.getFilterTexture=function(t,e,n){if(typeof t=="number"){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||ct.NONE);return o.filterFrame=t.filterFrame,o},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var n=Oa[0],i=Oa[1],o=Oa[2],a=Oa[3];n.set(e.left,e.top),i.set(e.left,e.bottom),o.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(n,n),t.apply(i,i),t.apply(o,o),t.apply(a,a);var s=Math.min(n.x,i.x,o.x,a.x),u=Math.min(n.y,i.y,o.y,a.y),l=Math.max(n.x,i.x,o.x,a.x),f=Math.max(n.y,i.y,o.y,a.y);e.x=s,e.y=u,e.width=l-s,e.height=f-u},r.prototype.roundFrame=function(t,e,n,i,o){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(o){var a=o.a,s=o.b,u=o.c,l=o.d;if((Math.abs(s)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(l)>1e-4))return}o=o?kl.copyFrom(o):kl.identity(),o.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(o,t),t.ceil(e),this.transformAABB(o.invert(),t)}},r}(),Zo=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),Sp=function(){function r(t){this.renderer=t,this.emptyRenderer=new Zo(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},r.prototype.boundArray=function(t,e,n,i){for(var o=t.elements,a=t.ids,s=t.count,u=0,l=0;l<s;l++){var f=o[l],c=f._batchLocation;if(c>=0&&c<i&&e[c]===f){a[l]=c;continue}for(;u<i;){var h=e[u];if(h&&h._batchEnabled===n&&h._batchLocation===u){u++;continue}a[l]=u,f._batchLocation=u,e[u]=f;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),Lm=0,wp=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Lm++},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Lm++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var n;if(R.PREFER_ENV>=Ge.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){var e=this;t.preventDefault(),setTimeout(function(){e.gl.isContextLost()&&e.extensions.loseContext&&e.extensions.loseContext.restoreContext()},0)},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),Ub=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ct.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),vI=new V,Ep=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new qs(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new V,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;R.PREFER_ENV===Ge.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(i){return e.drawBuffersWEBGL(i)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,n){n===void 0&&(n=0);var i=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=n),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var s=t.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var u=e.width>>n,l=e.height>>n,f=u/e.width;this.setViewport(e.x*f,e.y*f,u,l)}else{var u=t.width>>n,l=t.height>>n;this.setViewport(0,0,u,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,n,i){var o=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),i=Math.round(i),(o.width!==n||o.height!==i||o.x!==t||o.y!==e)&&(o.x=t,o.y=e,o.width=n,o.height=i,this.gl.viewport(t,e,n,i))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,n,i,o){o===void 0&&(o=So.COLOR|So.DEPTH);var a=this.gl;a.clearColor(t,e,n,i),a.clear(o)},r.prototype.initFramebuffer=function(t){var e=this.gl,n=new Ub(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},r.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var i=t.colorTextures,o=i.length;e.drawBuffers||(o=Math.min(o,1));for(var a=0;a<o;a++){var s=i[a],u=s.parentTextureArray||s;this.renderer.texture.bind(u,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,a=o.length;n.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],u=0;u<a;u++){var l=o[u],f=l.parentTextureArray||l;this.renderer.texture.bind(f,0),!(u===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,l.target,f._glTextures[this.CONTEXT_UID].texture,e),s.push(n.COLOR_ATTACHMENT0+u))}if(s.length>1&&n.drawBuffers(s),t.depthTexture){var c=this.writeDepthTexture;if(c){var h=t.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,n=ct.NONE;if(t<=1||e===null)return n;for(var i=0;i<e.length;i++)if(e[i]<=t){n=e[i];break}return n===1&&(n=ct.NONE),n},r.prototype.blit=function(t,e,n){var i=this,o=i.current,a=i.renderer,s=i.gl,u=i.CONTEXT_UID;if(a.context.webGLVersion===2&&o){var l=o.glFramebuffers[u];if(l){if(!t){if(!l.msaaBuffer)return;var f=o.colorTextures[0];if(!f)return;l.blitFramebuffer||(l.blitFramebuffer=new qs(o.width,o.height),l.blitFramebuffer.addColorTexture(0,f)),t=l.blitFramebuffer,t.colorTextures[0]!==f&&(t.colorTextures[0]=f,t.dirtyId++,t.dirtyFormat++),(t.width!==o.width||t.height!==o.height)&&(t.width=o.width,t.height=o.height,t.dirtyId++,t.dirtySize++)}e||(e=vI,e.width=o.width,e.height=o.height),n||(n=e);var c=e.width===n.width&&e.height===n.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,c?s.NEAREST:s.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var n=t.width,i=t.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),e.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,e.multisample,o.DEPTH24_STENCIL8,n,i):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n,i),e.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new V},r.prototype.destroy=function(){this.renderer=null},r}(),$l={5126:4,5123:2,5121:1},Op=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;R.PREFER_ENV===Ge.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(o){return n.bindVertexArrayOES(o)},t.deleteVertexArray=function(o){return n.deleteVertexArrayOES(o)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(o,a){return i.vertexAttribDivisorANGLE(o,a)},t.drawElementsInstanced=function(o,a,s,u,l){return i.drawElementsInstancedANGLE(o,a,s,u,l)},t.drawArraysInstanced=function(o,a,s,u){return i.drawArraysInstancedANGLE(o,a,s,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);var a=i[e.program.id]||this.initGeometryVao(t,e,o);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var i=t.buffers[n];e.update(i)}},r.prototype.checkCompatibility=function(t,e){var n=t.attributes,i=e.attributeData;for(var o in i)if(!n[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},r.prototype.getSignature=function(t,e){var n=t.attributes,i=e.attributeData,o=["g",t.id];for(var a in n)i[a]&&o.push(a,i[a].location);return o.join("-")},r.prototype.initGeometryVao=function(t,e,n){n===void 0&&(n=!0);var i=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,s=e.program;s.glPrograms[o]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var u=this.getSignature(t,s),l=t.glVertexArrayObjects[this.CONTEXT_UID],f=l[u];if(f)return l[s.id]=f,f;var c=t.buffers,h=t.attributes,d={},p={};for(var v in c)d[v]=0,p[v]=0;for(var v in h)!h[v].size&&s.attributeData[v]?h[v].size=s.attributeData[v].size:h[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[v].buffer]+=h[v].size*$l[h[v].type];for(var v in h){var m=h[v],y=m.size;m.stride===void 0&&(d[m.buffer]===y*$l[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=p[m.buffer],p[m.buffer]+=y*$l[m.type])}f=i.createVertexArray(),i.bindVertexArray(f);for(var _=0;_<c.length;_++){var g=c[_];a.bind(g),n&&g._glBuffers[o].refCount++}return this.activateVao(t,s),this._activeVao=f,l[s.id]=f,l[u]=f,f},r.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=t.buffers,s=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(t.disposeRunner.remove(this),!!i){if(s)for(var u=0;u<a.length;u++){var l=a[u]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&s.dispose(a[u],e))}if(!e){for(var f in i)if(f[0]==="g"){var c=i[f];this._activeVao===c&&this.unbind(),o.deleteVertexArray(c)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},r.prototype.activateVao=function(t,e){var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=t.buffers,s=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);var u=null;for(var l in s){var f=s[l],c=a[f.buffer],h=c._glBuffers[i];if(e.attributeData[l]){u!==h&&(o.bind(c),u=h);var d=e.attributeData[l].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,f.size,f.type||n.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,n,i){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,u=s===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,u,(n||0)*s,i||1):o.drawElements(t,e||a.indexBuffer.data.length,u,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(t,n,e||a.getSize(),i||1):o.drawArrays(t,n,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),Gb=function(){function r(t){t===void 0&&(t=null),this.type=At.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=R.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(r.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=At.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function Um(r,t,e){var n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}function Gm(r,t){var e=r.getShaderSource(t).split(`
`).map(function(l,f){return f+": "+l}),n=r.getShaderInfoLog(t),i=n.split(`
`),o={},a=i.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!o[l]?(o[l]=!0,!0):!1}),s=[""];a.forEach(function(l){e[l-1]="%c"+e[l-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var u=e.join(`
`);s[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function mI(r,t,e,n){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||Gm(r,e),r.getShaderParameter(n,r.COMPILE_STATUS)||Gm(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function zl(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function jb(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return zl(2*t);case"bvec3":return zl(3*t);case"bvec4":return zl(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var kb={},Ui=kb;function $b(){if(Ui===kb||Ui&&Ui.isContextLost()){var r=R.ADAPTER.createCanvas(),t=void 0;R.PREFER_ENV>=Ge.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Ui=t}return Ui}var Pa;function yI(){if(!Pa){Pa=te.MEDIUM;var r=$b();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);Pa=t.precision?te.HIGH:te.MEDIUM}}return Pa}function jm(r,t,e){if(r.substring(0,9)!=="precision"){var n=t;return t===te.HIGH&&e!==te.HIGH&&(n=te.MEDIUM),"precision "+n+` float;
`+r}else if(e!==te.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var gI={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function zb(r){return gI[r]}var Ca=null,km={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Hb(r,t){if(!Ca){var e=Object.keys(km);Ca={};for(var n=0;n<e.length;++n){var i=e[n];Ca[r[i]]=km[i]}}return Ca[t]}var hn=[{test:function(r){return r.type==="float"&&r.size===1&&!r.isArray},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r,t){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0)},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1&&!r.isArray},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1&&!r.isArray},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],_I={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},bI={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function xI(r,t){var e,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in r.uniforms){var o=t[i];if(!o){!((e=r.uniforms[i])===null||e===void 0)&&e.group&&(r.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var a=r.uniforms[i],s=!1,u=0;u<hn.length;u++)if(hn[u].test(o,a)){n.push(hn[u].code(i,a)),s=!0;break}if(!s){var l=o.size===1&&!o.isArray?_I:bI,f=l[o.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+f+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var TI=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function SI(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function Xb(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var n=TI.replace(/%forloop%/gi,SI(r));if(t.shaderSource(e,n),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Gi;function wI(){if(typeof Gi=="boolean")return Gi;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Gi=r({a:"b"},"a","b")===!0}catch{Gi=!1}return Gi}var EI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,OI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,PI=0,Aa={},Mi=function(){function r(t,e,n){n===void 0&&(n="pixi-shader"),this.id=PI++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Aa[n]?(Aa[n]++,n+="-"+Aa[n]):Aa[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=jm(this.vertexSrc,R.PRECISION_VERTEX,te.HIGH),this.fragmentSrc=jm(this.fragmentSrc,R.PRECISION_FRAGMENT,yI())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return OI},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return EI},enumerable:!1,configurable:!0}),r.from=function(t,e,n){var i=t+e,o=$h[i];return o||($h[i]=o=new r(t,e,n)),o},r}(),Qe=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Dr?this.uniformGroup=e:this.uniformGroup=new Dr(e):this.uniformGroup=new Dr({}),this.disposeRunner=new zt("disposeShader")}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var i=e.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,n){var i=Mi.from(t,e);return new r(i,n)},r}(),Hl=0,Xl=1,Vl=2,Wl=3,Yl=4,ql=5,$r=function(){function r(){this.data=0,this.blendMode=L.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<Hl)},set:function(t){!!(this.data&1<<Hl)!==t&&(this.data^=1<<Hl)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<Xl)},set:function(t){!!(this.data&1<<Xl)!==t&&(this.data^=1<<Xl)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<Vl)},set:function(t){!!(this.data&1<<Vl)!==t&&(this.data^=1<<Vl)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<Wl)},set:function(t){!!(this.data&1<<Wl)!==t&&(this.data^=1<<Wl)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<ql)},set:function(t){!!(this.data&1<<ql)!==t&&(this.data^=1<<ql)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Yl)},set:function(t){!!(this.data&1<<Yl)!==t&&(this.data^=1<<Yl)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==L.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),CI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,AI=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,k=function(r){ft(t,r);function t(e,n,i){var o=this,a=Mi.from(e||t.defaultVertexSrc,n||t.defaultFragmentSrc);return o=r.call(this,a,i)||this,o.padding=0,o.resolution=R.FILTER_RESOLUTION,o.multisample=R.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new $r,o}return t.prototype.apply=function(e,n,i,o,a){e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return AI},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return CI},enumerable:!1,configurable:!0}),t}(Qe),RI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,II=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,$m=new Ft,Fu=function(){function r(t,e){this._texture=t,this.mapCoord=new Ft,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];e[i]=o*n.a+a*n.c+n.tx,e[i+1]=o*n.b+a*n.d+n.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=e.orig,o=e.trim;o&&($m.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append($m));var a=e.baseTexture,s=this.uClampFrame,u=this.clampMargin/a.resolution,l=this.clampOffset;return s[0]=(e._frame.x+u+l)/a.width,s[1]=(e._frame.y+u+l)/a.height,s[2]=(e._frame.x+e._frame.width-u+l)/a.width,s[3]=(e._frame.y+e._frame.height-u+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),Vb=function(r){ft(t,r);function t(e,n,i){var o=this,a=null;return typeof e!="string"&&n===void 0&&i===void 0&&(a=e,e=void 0,n=void 0,i=void 0),o=r.call(this,e||RI,n||II,i)||this,o.maskSprite=a,o.maskMatrix=new Ft,o}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,n,i,o){var a=this._maskSprite,s=a._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Fu(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,e.applyFilter(this,n,i,o))},t}(k),Pp=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var i=this.maskDataPool.pop()||new Gb;i.pooled=!0,i.maskObject=e,n=i}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n._colorMask=o?o._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==At.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case At.SCISSOR:this.renderer.scissor.push(n);break;case At.STENCIL:this.renderer.stencil.push(n);break;case At.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case At.COLOR:this.pushColorMask(n);break}n.type===At.SPRITE&&this.maskStack.push(n)},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case At.SCISSOR:this.renderer.scissor.pop(e);break;case At.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case At.SPRITE:this.popSpriteMask(e);break;case At.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===At.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},r.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=At.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=At.SCISSOR:t.type=At.STENCIL:t.type=At.COLOR},r.prototype.pushSpriteMask=function(t){var e,n,i=t.maskObject,o=t._target,a=t._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Vb]));var s=this.renderer,u=s.renderTexture,l,f;if(u.current){var c=u.current;l=t.resolution||c.resolution,f=(e=t.multisample)!==null&&e!==void 0?e:c.multisample}else l=t.resolution||s.resolution,f=(n=t.multisample)!==null&&n!==void 0?n:s.multisample;a[0].resolution=l,a[0].multisample=f,a[0].maskSprite=i;var h=o.filterArea;o.filterArea=i.getBounds(!0),s.filter.push(o,a),o.filterArea=h,t._filters||this.alphaMaskIndex++},r.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},r.prototype.pushColorMask=function(t){var e=t._colorMask,n=t._colorMask=e&t.colorMask;n!==e&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},r.prototype.popColorMask=function(t){var e=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==e&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},r.prototype.destroy=function(){this.renderer=null},r}(),Wb=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(i===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),zm=new Ft,Hm=[],Cp=function(r){ft(t,r);function t(e){var n=r.call(this,e)||this;return n.glConst=R.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){var n;if(!e._scissorRectLocal){var i=e._scissorRect,o=e.maskObject,a=this.renderer,s=a.renderTexture,u=o.getBounds(!0,(n=Hm.pop())!==null&&n!==void 0?n:new V);this.roundFrameToPixels(u,s.current?s.current.resolution:a.resolution,s.sourceFrame,s.destinationFrame,a.projection.transform),i&&u.fit(i),e._scissorRectLocal=u}},t.isMatrixRotated=function(e){if(!e)return!1;var n=e.a,i=e.b,o=e.c,a=e.d;return(Math.abs(i)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(a)>1e-4)},t.prototype.testScissor=function(e){var n=e.maskObject;if(!n.isFastRect||!n.isFastRect()||t.isMatrixRotated(n.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var i=e._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(e,n,i,o,a){t.isMatrixRotated(a)||(a=a?zm.copyFrom(a):zm.identity(),a.translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.renderer.filter.transformAABB(a,e),e.fit(o),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var n=this.renderer.gl;e._scissorRect||n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(e){var n=this.renderer.gl;e&&Hm.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=e.y:n=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,n,e.width,e.height)},t}(Wb),Ap=function(r){ft(t,r);function t(e){var n=r.call(this,e)||this;return n.glConst=R.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var n=e.maskObject,i=this.renderer.gl,o=e._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;var a=e._colorMask;a!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,o,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,a!==0&&(e._colorMask=a,i.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()},t.prototype.pop=function(e){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,o=i?i._colorMask:15;o!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,o!==0&&(i._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(Wb),Rp=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ft,this.transform=null}return r.prototype.update=function(t,e,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,n,i){var o=this.projectionMatrix,a=i?-1:1;o.identity(),o.a=1/e.width*2,o.d=a*(1/e.height*2),o.tx=-1-e.x*o.a,o.ty=-a-e.y*o.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Wr=new V,ji=new V,Ip=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new V,this.destinationFrame=new V,this.viewportFrame=new V}return r.prototype.bind=function(t,e,n){t===void 0&&(t=null);var i=this.renderer;this.current=t;var o,a,s;t?(o=t.baseTexture,s=o.resolution,e||(Wr.width=t.frame.width,Wr.height=t.frame.height,e=Wr),n||(ji.x=t.frame.x,ji.y=t.frame.y,ji.width=e.width,ji.height=e.height,n=ji),a=o.framebuffer):(s=i.resolution,e||(Wr.width=i.screen.width,Wr.height=i.screen.height,e=Wr),n||(n=Wr,n.width=e.width,n.height=e.height));var u=this.viewportFrame;u.x=n.x*s,u.y=n.y*s,u.width=n.width*s,u.height=n.height*s,t||(u.y=i.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(a,u),this.renderer.projection.update(n,e,s,!a),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==i.width||n.height!==i.height;if(o){var a=this.viewportFrame,s=a.x,u=a.y,l=a.width,f=a.height;s=Math.round(s),u=Math.round(u),l=Math.round(l),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,u,l,f)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function MI(r,t,e,n,i){e.buffer.update(i)}var FI={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Yb={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function qb(r){for(var t=r.map(function(u){return{data:u,offset:0,dataLen:0,dirty:0}}),e=0,n=0,i=0,o=0;o<t.length;o++){var a=t[o];if(e=Yb[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,n%e!==0&&n<16){var s=n%e%16;n+=s,i+=s}n+e>16?(i=Math.ceil(i/16)*16,a.offset=i,i+=e,n=e):(a.offset=i,n+=e,i+=e)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function Kb(r,t){var e=[];for(var n in r)t[n]&&e.push(t[n]);return e.sort(function(i,o){return i.index-o.index}),e}function Zb(r,t){if(!r.autoManage)return{size:0,syncFunc:MI};for(var e=Kb(r.uniforms,t),n=qb(e),i=n.uboElements,o=n.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<i.length;s++){for(var u=i[s],l=r.uniforms[u.data.name],f=u.data.name,c=!1,h=0;h<hn.length;h++){var d=hn[h];if(d.codeUbo&&d.test(u.data,l)){a.push("offset = "+u.offset/4+";",hn[h].codeUbo(u.data.name,l)),c=!0;break}}if(!c)if(u.data.size>1){var p=zb(u.data.type),v=Math.max(Yb[u.data.type]/16,1),m=p/v,y=(4-m%4)%4;a.push(`
                cv = ud.`+f+`.value;
                v = uv.`+f+`;
                offset = `+u.offset/4+`;

                t = 0;

                for(var i=0; i < `+u.data.size*v+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+y+`;
                }

                `)}else{var _=FI[u.data.type];a.push(`
                cv = ud.`+f+`.value;
                v = uv.`+f+`;
                offset = `+u.offset/4+`;
                `+_+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var DI=function(){function r(){}return r}(),Jb=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function BI(r,t){for(var e={},n=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=t.getActiveAttrib(r,i);if(o.name.indexOf("gl_")!==0){var a=Hb(t,o.type),s={type:a,name:o.name,size:zb(a),location:t.getAttribLocation(r,o.name)};e[o.name]=s}}return e}function NI(r,t){for(var e={},n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=t.getActiveUniform(r,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=Hb(t,o.type);e[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:jb(u,o.size)}}return e}function Qb(r,t){var e=Um(r,r.VERTEX_SHADER,t.vertexSrc),n=Um(r,r.FRAGMENT_SHADER,t.fragmentSrc),i=r.createProgram();if(r.attachShader(i,e),r.attachShader(i,n),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||mI(r,i,e,n),t.attributeData=BI(i,r),t.uniformData=NI(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort(function(f,c){return f>c?1:-1});for(var a=0;a<o.length;a++)t.attributeData[o[a]].location=a,r.bindAttribLocation(i,a,o[a]);r.linkProgram(i)}r.deleteShader(e),r.deleteShader(n);var s={};for(var a in t.uniformData){var u=t.uniformData[a];s[a]={location:r.getUniformLocation(i,a),value:jb(u.type,u.size)}}var l=new Jb(i,s);return l}var LI=0,Ra={textureCount:0,uboCount:0},Mp=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=LI++}return r.prototype.systemCheck=function(){if(!wI())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),e||(Ra.textureCount=0,Ra.uboCount=0,this.syncUniformGroup(t.uniformGroup,Ra)),i},r.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},r.prototype.syncUniforms=function(t,e,n){var i=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);i(e.uniformData,t.uniforms,this.renderer,n)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=xI(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;var i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,Ra,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,n){var i=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var o=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(e.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[a];if(s||(s=this._uboCache[a]=Zb(t,this.shader.program.uniformData)),t.autoManage){var u=new Float32Array(s.size/4);t.buffer.update(u)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,n){var i=t.uniforms,o=[n+"-"];for(var a in i)o.push(a),e[a]&&o.push(e[a].type);return o.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,n=t.program,i=Qb(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function UI(r,t){return t===void 0&&(t=[]),t[L.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.ADD]=[r.ONE,r.ONE],t[L.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.NONE]=[0,0],t[L.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[L.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[L.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[L.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[L.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[L.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[L.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[L.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[L.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[L.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[L.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var GI=0,jI=1,kI=2,$I=3,zI=4,HI=5,Fp=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=L.NONE,this._blendEq=!1,this.map=[],this.map[GI]=this.setBlend,this.map[jI]=this.setOffset,this.map[kI]=this.setCullFace,this.map[$I]=this.setDepthTest,this.map[zI]=this.setFrontFace,this.map[HI]=this.setDepthMask,this.checks=[],this.defaultState=new $r,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=UI(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),Dp=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=R.GC_MAX_IDLE,this.checkCountMax=R.GC_MAX_CHECK_COUNT,this.mode=R.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Eo.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,i=0;i<e.length;i++){var o=e[i];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),e[i]=null,n=!0)}if(n){for(var a=0,i=0;i<e.length;i++)e[i]!==null&&(e[a++]=e[i]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},r.prototype.destroy=function(){this.renderer=null},r}();function XI(r){var t,e,n,i,o,a,s,u,l,f,c,h,d,p,v,m,y,_,g,x,b,T,S;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?S=(t={},t[U.UNSIGNED_BYTE]=(e={},e[A.RGBA]=r.RGBA8,e[A.RGB]=r.RGB8,e[A.RG]=r.RG8,e[A.RED]=r.R8,e[A.RGBA_INTEGER]=r.RGBA8UI,e[A.RGB_INTEGER]=r.RGB8UI,e[A.RG_INTEGER]=r.RG8UI,e[A.RED_INTEGER]=r.R8UI,e[A.ALPHA]=r.ALPHA,e[A.LUMINANCE]=r.LUMINANCE,e[A.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[U.BYTE]=(n={},n[A.RGBA]=r.RGBA8_SNORM,n[A.RGB]=r.RGB8_SNORM,n[A.RG]=r.RG8_SNORM,n[A.RED]=r.R8_SNORM,n[A.RGBA_INTEGER]=r.RGBA8I,n[A.RGB_INTEGER]=r.RGB8I,n[A.RG_INTEGER]=r.RG8I,n[A.RED_INTEGER]=r.R8I,n),t[U.UNSIGNED_SHORT]=(i={},i[A.RGBA_INTEGER]=r.RGBA16UI,i[A.RGB_INTEGER]=r.RGB16UI,i[A.RG_INTEGER]=r.RG16UI,i[A.RED_INTEGER]=r.R16UI,i[A.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,i),t[U.SHORT]=(o={},o[A.RGBA_INTEGER]=r.RGBA16I,o[A.RGB_INTEGER]=r.RGB16I,o[A.RG_INTEGER]=r.RG16I,o[A.RED_INTEGER]=r.R16I,o),t[U.UNSIGNED_INT]=(a={},a[A.RGBA_INTEGER]=r.RGBA32UI,a[A.RGB_INTEGER]=r.RGB32UI,a[A.RG_INTEGER]=r.RG32UI,a[A.RED_INTEGER]=r.R32UI,a[A.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[U.INT]=(s={},s[A.RGBA_INTEGER]=r.RGBA32I,s[A.RGB_INTEGER]=r.RGB32I,s[A.RG_INTEGER]=r.RG32I,s[A.RED_INTEGER]=r.R32I,s),t[U.FLOAT]=(u={},u[A.RGBA]=r.RGBA32F,u[A.RGB]=r.RGB32F,u[A.RG]=r.RG32F,u[A.RED]=r.R32F,u[A.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,u),t[U.HALF_FLOAT]=(l={},l[A.RGBA]=r.RGBA16F,l[A.RGB]=r.RGB16F,l[A.RG]=r.RG16F,l[A.RED]=r.R16F,l),t[U.UNSIGNED_SHORT_5_6_5]=(f={},f[A.RGB]=r.RGB565,f),t[U.UNSIGNED_SHORT_4_4_4_4]=(c={},c[A.RGBA]=r.RGBA4,c),t[U.UNSIGNED_SHORT_5_5_5_1]=(h={},h[A.RGBA]=r.RGB5_A1,h),t[U.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[A.RGBA]=r.RGB10_A2,d[A.RGBA_INTEGER]=r.RGB10_A2UI,d),t[U.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[A.RGB]=r.R11F_G11F_B10F,p),t[U.UNSIGNED_INT_5_9_9_9_REV]=(v={},v[A.RGB]=r.RGB9_E5,v),t[U.UNSIGNED_INT_24_8]=(m={},m[A.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[U.FLOAT_32_UNSIGNED_INT_24_8_REV]=(y={},y[A.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,y),t):S=(_={},_[U.UNSIGNED_BYTE]=(g={},g[A.RGBA]=r.RGBA,g[A.RGB]=r.RGB,g[A.ALPHA]=r.ALPHA,g[A.LUMINANCE]=r.LUMINANCE,g[A.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,g),_[U.UNSIGNED_SHORT_5_6_5]=(x={},x[A.RGB]=r.RGB,x),_[U.UNSIGNED_SHORT_4_4_4_4]=(b={},b[A.RGBA]=r.RGBA,b),_[U.UNSIGNED_SHORT_5_5_5_1]=(T={},T[A.RGBA]=r.RGBA,T),_),S}var xs=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=U.UNSIGNED_BYTE,this.internalFormat=A.RGBA,this.samplerType=0}return r}(),Bp=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new K,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=XI(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new xs(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new xs(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var n=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,n=e.gl,i=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<i.length;o++)i[o]===t&&(this.currentLocation!==o&&(n.activeTexture(n.TEXTURE0+o),this.currentLocation=o),n.bindTexture(t.target,this.emptyTextures[t.target].texture),i[o]=null)},r.prototype.ensureSamplerType=function(t){var e=this,n=e.boundTextures,i=e.hasIntegerTextures,o=e.CONTEXT_UID;if(i)for(var a=t-1;a>=0;--a){var s=n[a];if(s){var u=s._glTextures[o];u.samplerType!==wo.FLOAT&&this.renderer.texture.unbind(s)}}},r.prototype.initTexture=function(t){var e=new xs(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var n,i;e.internalFormat=(i=(n=this.internalFormats[t.type])===null||n===void 0?void 0:n[t.format])!==null&&i!==void 0?i:t.format,this.webGLVersion===2&&t.type===U.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==wo.FLOAT&&(this.hasIntegerTextures=!0);else{var i=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==i||e.height!==o||e.dirtyId<0)&&(e.width=i,e.height=o,a.texImage2D(t.target,0,e.internalFormat,i,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);i!==-1&&fn(this.managedTextures,i,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===le.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=De.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==le.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Qt.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Qt.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Qt.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Qt.LINEAR?n.LINEAR:n.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),tx={__proto__:null,FilterSystem:Tp,BatchSystem:Sp,ContextSystem:wp,FramebufferSystem:Ep,GeometrySystem:Op,MaskSystem:Pp,ScissorSystem:Cp,StencilSystem:Ap,ProjectionSystem:Rp,RenderTextureSystem:Ip,ShaderSystem:Mp,StateSystem:Fp,TextureGCSystem:Dp,TextureSystem:Bp},Kl=new Ft,ex=function(r){ft(t,r);function t(e,n){e===void 0&&(e=di.UNKNOWN);var i=r.call(this)||this;return n=Object.assign({},R.RENDER_OPTIONS,n),i.options=n,i.type=e,i.screen=new V(0,0,n.width,n.height),i.view=n.view||R.ADAPTER.createCanvas(),i.resolution=n.resolution||R.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(ee("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(e){for(var n in e)this.plugins[n]=new e[n](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,n){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=i,this.screen.height=o,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},t.prototype.generateTexture=function(e,n,i,o){n===void 0&&(n={}),typeof n=="number"&&(ee("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:o});var a=n.region,s=aI(n,["region"]);o=a||e.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var u=Ur.create(Wh({width:o.width,height:o.height},s));return Kl.tx=-o.x,Kl.ty=-o.y,this.render(e,{renderTexture:u,clear:!1,transform:Kl,skipUpdateTransform:!!e.parent}),u},t.prototype.destroy=function(e){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=di.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=op(e),Xt(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(wn),VI=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),WI=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,n=e.gl,i=e.CONTEXT_UID,o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBuffer(t.type,o.buffer)},r.prototype.bindBufferBase=function(t,e){var n=this,i=n.gl,o=n.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[o]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,n){var i=this,o=i.gl,a=i.CONTEXT_UID;n=n||0;var s=t._glBuffers[a]||this.createGLBuffer(t);o.bindBufferRange(o.UNIFORM_BUFFER,e||0,s.buffer,n*256,256)},r.prototype.update=function(t){var e=this,n=e.gl,i=e.CONTEXT_UID,o=t._glBuffers[i];if(t._updateID!==o.updateID)if(o.updateID=t._updateID,n.bindBuffer(t.type,o.buffer),o.byteLength>=t.data.byteLength)n.bufferSubData(t.type,0,t.data);else{var a=t.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;o.byteLength=t.data.byteLength,n.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(e||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},r.prototype.createGLBuffer=function(t){var e=this,n=e.CONTEXT_UID,i=e.gl;return t._glBuffers[n]=new VI(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[n]},r}(),Du=function(r){ft(t,r);function t(e){var n=r.call(this,di.WEBGL,e)||this;return e=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new zt("destroy"),contextChange:new zt("contextChange"),reset:new zt("reset"),update:new zt("update"),postrender:new zt("postrender"),prerender:new zt("prerender"),resize:new zt("resize")},n.runners.contextChange.add(n),n.globalUniforms=new Dr({projectionMatrix:new Ft},!0),n.addSystem(Pp,"mask").addSystem(wp,"context").addSystem(Fp,"state").addSystem(Mp,"shader").addSystem(Bp,"texture").addSystem(WI,"buffer").addSystem(Op,"geometry").addSystem(Ep,"framebuffer").addSystem(Cp,"scissor").addSystem(Ap,"stencil").addSystem(Rp,"projection").addSystem(Dp,"textureGC").addSystem(Tp,"filter").addSystem(Ip,"renderTexture").addSystem(Sp,"batch"),n.initPlugins(t.__plugins),n.multisample=void 0,e.context?n.context.initFromContext(e.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:e.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,xb(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return t.create=function(e){if(Tb())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,n;if(this.context.webGLVersion===1){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{var i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}n>=ct.HIGH?this.multisample=ct.HIGH:n>=ct.MEDIUM?this.multisample=ct.MEDIUM:n>=ct.LOW?this.multisample=ct.LOW:this.multisample=ct.NONE},t.prototype.addSystem=function(e,n){var i=new e(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var o in this.runners)this.runners[o].add(i);return this},t.prototype.render=function(e,n){var i,o,a,s;if(n&&(n instanceof Ur?(ee("6.0.0","Renderer#render arguments changed, use options instead."),i=n,o=arguments[2],a=arguments[3],s=arguments[4]):(i=n.renderTexture,o=n.clear,a=n.transform,s=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(i||(this._lastObjectRendered=e),!s){var u=e.enableTempParent();e.updateTransform(),e.disableTempParent(u)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,n,i,o){n===void 0&&(n={});var a=r.prototype.generateTexture.call(this,e,n,i,o);return this.framebuffer.blit(),a},t.prototype.resize=function(e,n){r.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return ee("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,n){ee("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),ue.add({name:e,type:nt.RendererPlugin,ref:n})},t.__plugins={},t}(ex);ue.handleByMap(nt.RendererPlugin,Du.__plugins);function rx(r){return Du.create(r)}var YI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,qI=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,nx=YI,Np=qI,KI=function(){function r(t){ee("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return r.prototype.destroy=function(){this.renderer=null},r}(),Ks=function(){function r(){this.texArray=null,this.blend=0,this.type=Te.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),Zs=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),Js=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),ix=function(r){ft(t,r);function t(e){var n=r.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=$r.for2d(),n.size=R.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return t.prototype.contextChange=function(){var e=this.renderer.gl;R.PREFER_ENV===Ge.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),R.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Xb(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;e.length<i;)e.push(new Ks);for(;n.length<o;)n.push(new Zs);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,n=e._bufferedTextures,i=e.MAX_TEXTURES,o=t._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,u=this.renderer.textureGC.count,l=++K._globalBatch,f=0,c=o[0],h=0;a.copyBoundTextures(s,i);for(var d=0;d<this._bufferSize;++d){var p=n[d];n[d]=null,p._batchEnabled!==l&&(c.count>=i&&(a.boundArray(c,s,l,i),this.buildDrawCalls(c,h,d),h=d,c=o[++f],++l),p._batchEnabled=l,p.touched=u,c.elements[c.count++]=p)}c.count>0&&(a.boundArray(c,s,l,i),this.buildDrawCalls(c,h,this._bufferSize),++f,++l);for(var d=0;d<s.length;d++)s[d]=null;K._globalBatch=l},t.prototype.buildDrawCalls=function(e,n,i){var o=this,a=o._bufferedElements,s=o._attributeBuffer,u=o._indexBuffer,l=o.vertexSize,f=t._drawCallPool,c=this._dcIndex,h=this._aIndex,d=this._iIndex,p=f[c];p.start=this._iIndex,p.texArray=e;for(var v=n;v<i;++v){var m=a[v],y=m._texture.baseTexture,_=sp[y.alphaMode?1:0][m.blendMode];a[v]=null,n<v&&p.blend!==_&&(p.size=d-p.start,n=v,p=f[++c],p.texArray=e,p.start=d),this.packInterleavedGeometry(m,s,u,h,d),h+=m.vertexData.length/2*l,d+=m.indices.length,p.blend=_}n<i&&(p.size=d-p.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var n=this.renderer.texture,i=0;i<e.count;i++)n.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,n=e._packedGeometries,i=e._attributeBuffer,o=e._indexBuffer;R.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,i=n.gl,o=n.state,a=t._drawCallPool,s=null,u=0;u<e;u++){var l=a[u],f=l.texArray,c=l.type,h=l.size,d=l.start,p=l.blend;s!==f&&(s=f,this.bindAndClearTexArray(f)),this.state.blendMode=p,o.set(this.state),i.drawElements(c,h,i.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),R.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var n=Ro(Math.ceil(e/8)),i=kh(n),o=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new Js(o*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var n=Ro(Math.ceil(e/12)),i=kh(n),o=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(o)),a},t.prototype.packInterleavedGeometry=function(e,n,i,o,a){for(var s=n.uint32View,u=n.float32View,l=o/this.vertexSize,f=e.uvs,c=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),v=p<1&&e._texture.baseTexture.alphaMode?Cu(e._tintRGB,p):e._tintRGB+(p*255<<24),m=0;m<h.length;m+=2)u[o++]=h[m],u[o++]=h[m+1],u[o++]=f[m],u[o++]=f[m+1],s[o++]=v,u[o++]=d;for(var m=0;m<c.length;m++)i[a++]=l+c[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(Zo),ox=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=Dr.from({uSamplers:e},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Mi(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ft,default:this.defaultGroupCache[t]};return new Qe(this.programCache[t],o)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var n=0;n<t;n++)n>0&&(e+=`
else `),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),Lp=function(r){ft(t,r);function t(e){e===void 0&&(e=!1);var n=r.call(this)||this;return n._buffer=new Mt(null,e,!1),n._indexBuffer=new Mt(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,U.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,U.FLOAT).addAttribute("aColor",n._buffer,4,!0,U.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,U.FLOAT).addIndex(n._indexBuffer),n}return t}(Ii),Xm=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Vm=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,ax=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:Xm,fragment:Vm,geometryClass:Lp,vertexSize:6},t),n=e.vertex,i=e.fragment,o=e.vertexSize,a=e.geometryClass;return function(s){ft(u,s);function u(l){var f=s.call(this,l)||this;return f.shaderGenerator=new ox(n,i),f.geometryClass=a,f.vertexSize=o,f}return u}(ix)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return Xm},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return Vm},enumerable:!1,configurable:!0}),r}(),Up=ax.create();Object.assign(Up,{extension:{name:"batch",type:nt.RendererPlugin}});var sx={},ZI=function(r){Object.defineProperty(sx,r,{get:function(){return ee("6.0.0","PIXI.systems."+r+" has moved to PIXI."+r),Db[r]}})};for(var Gp in Db)ZI(Gp);var ux={},JI=function(r){Object.defineProperty(ux,r,{get:function(){return ee("6.0.0","PIXI.resources."+r+" has moved to PIXI."+r),tx[r]}})};for(var Gp in tx)JI(Gp);var QI="6.5.10";/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var lx={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};St.mixin(lx);var tM=9,Ia=100,eM=0,rM=0,Wm=2,Ym=1,nM=-1e3,iM=-1e3,oM=2,fx=function(){function r(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Se.tablet||Se.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=Ia+"px",e.style.height=Ia+"px",e.style.position="absolute",e.style.top=eM+"px",e.style.left=rM+"px",e.style.zIndex=Wm.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(r.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),r.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=Ym+"px",e.style.height=Ym+"px",e.style.position="absolute",e.style.top=nM+"px",e.style.left=iM+"px",e.style.zIndex=oM.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},r.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},r.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},r.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},r.prototype.update=function(){var t=performance.now();if(!(Se.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,i=e.top,o=e.width,a=e.height,s=this.renderer,u=s.width,l=s.height,f=s.resolution,c=o/u*f,h=a/l*f,d=this.div;d.style.left=n+"px",d.style.top=i+"px",d.style.width=u+"px",d.style.height=l+"px";for(var p=0;p<this.children.length;p++){var v=this.children[p];if(v.renderId!==this.renderId)v._accessibleActive=!1,fn(this.children,p,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,p--;else{d=v._accessibleDiv;var m=v.hitArea,y=v.worldTransform;v.hitArea?(d.style.left=(y.tx+m.x*y.a)*c+"px",d.style.top=(y.ty+m.y*y.d)*h+"px",d.style.width=m.width*y.a*c+"px",d.style.height=m.height*y.d*h+"px"):(m=v.getBounds(),this.capHitArea(m),d.style.left=m.x*c+"px",d.style.top=m.y*h+"px",d.style.width=m.width*c+"px",d.style.height=m.height*h+"px",d.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(d.title=v.accessibleTitle),d.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&d.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==d.title||v.tabIndex!==d.tabIndex)&&(d.title=v.accessibleTitle,d.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},r.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,n=e.width,i=e.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>i&&(t.height=i-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=Ia+"px",e.style.height=Ia+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Wm.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,n=t.target.displayObject,i=e.eventData;e.dispatchEvent(n,"click",i),e.dispatchEvent(n,"pointertap",i),e.dispatchEvent(n,"tap",i)},r.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=t.target.displayObject,i=e.eventData;e.dispatchEvent(n,"mouseover",i)},r.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=t.target.displayObject,i=e.eventData;e.dispatchEvent(n,"mouseout",i)},r.prototype._onKeyDown=function(t){t.keyCode===tM&&this.activate()},r.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},r.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.extension={name:"accessibility",type:[nt.RendererPlugin,nt.CanvasRendererPlugin]},r}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qh=function(){function r(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new X,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(r.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),r.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},r.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},r.prototype.reset=function(){this.isPrimary=!1},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kh=function(r,t){return Kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Kh(r,t)};function aM(r,t){Kh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var hx=function(){function r(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return r.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},r.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},r}(),Ts=function(){function r(t){this._pointerId=t,this._flags=r.FLAGS.NONE}return r.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(r.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"none",{get:function(){return this._flags===r.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return(this._flags&r.FLAGS.OVER)!==0},set:function(t){this._doSet(r.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightDown",{get:function(){return(this._flags&r.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(r.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftDown",{get:function(){return(this._flags&r.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(r.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),r}(),sM=function(){function r(){this._tempPoint=new X}return r.prototype.recursiveFindHit=function(t,e,n,i,o){var a;if(!e||!e.visible)return!1;var s=t.data.global;o=e.interactive||o;var u=!1,l=o,f=!0;if(e.hitArea)i&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?u=!0:(i=!1,f=!1)),l=!1;else if(e._mask&&i){var c=e._mask.isMaskData?e._mask.maskObject:e._mask;c&&!(!((a=c.containsPoint)===null||a===void 0)&&a.call(c,s))&&(i=!1)}if(f&&e.interactiveChildren&&e.children)for(var h=e.children,d=h.length-1;d>=0;d--){var p=h[d],v=this.recursiveFindHit(t,p,n,i,l);if(v){if(!p.parent)continue;l=!1,v&&(t.target&&(i=!1),u=!0)}}return o&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(u=!0),e.interactive&&(u&&!t.target&&(t.target=e),n&&n(t,e,!!u))),u},r.prototype.findHit=function(t,e,n,i){this.recursiveFindHit(t,e,n,i,!1)},r}(),cx={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(r){r?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};St.mixin(cx);var Ma=1,Fa={target:null,data:{global:null}},dx=function(r){aM(t,r);function t(e,n){var i=r.call(this)||this;return n=n||{},i.renderer=e,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new qh,i.mouse.identifier=Ma,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Ma]=i.mouse,i.interactionDataPool=[],i.eventData=new hx,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new sM,i._tempDisplayObject=new cp,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,n){return Fa.target=null,Fa.data.global=e,n||(n=this.lastObjectRendered),this.processInteractive(Fa,n,null,!0),Fa.target},t.prototype.setTargetElement=function(e,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=n,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Bt.system.add(this.tickerUpdate,this,er.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Bt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){e=e||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var i=this.cursorStyles[e];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(e);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,n,i){(!i.stopPropagationHint||e===i.stopsPropagatingAt)&&(i.currentTarget=e,i.type=n,e.emit(n,i),e[n]&&e[n](i))},t.prototype.delayDispatchEvent=function(e,n,i){this.delayedEvents.push({displayObject:e,eventString:n,eventData:i})},t.prototype.mapPositionToPoint=function(e,n,i){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;e.x=(n-o.left)*(this.interactionDOMElement.width/o.width)*a,e.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*a},t.prototype.processInteractive=function(e,n,i,o){var a=this.search.findHit(e,n,i,o),s=this.delayedEvents;if(!s.length)return a;e.stopPropagationHint=!1;var u=s.length;this.delayedEvents=[];for(var l=0;l<u;l++){var f=s[l],c=f.displayObject,h=f.eventString,d=f.eventData;d.stopsPropagatingAt===c&&(d.stopPropagationHint=!0),this.dispatchEvent(c,h,d)}return a},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e);if(this.autoPreventDefault&&n[0].isNormalized){var i=e.cancelable||!("cancelable"in e);i&&e.preventDefault()}for(var o=n.length,a=0;a<o;a++){var s=n[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),s.pointerType==="touch")this.emit("touchstart",l);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var f=s.button===2;this.emit(f?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,n,i){var o=e.data,a=e.data.identifier;if(i){if(n.trackedPointers[a]||(n.trackedPointers[a]=new Ts(a)),this.dispatchEvent(n,"pointerdown",e),o.pointerType==="touch")this.dispatchEvent(n,"touchstart",e);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;s?n.trackedPointers[a].rightDown=!0:n.trackedPointers[a].leftDown=!0,this.dispatchEvent(n,s?"rightdown":"mousedown",e)}}},t.prototype.onPointerComplete=function(e,n,i){var o=this.normalizeToPointerData(e),a=o.length,s=e.target;e.composedPath&&e.composedPath().length>0&&(s=e.composedPath()[0]);for(var u=s!==this.interactionDOMElement?"outside":"",l=0;l<a;l++){var f=o[l],c=this.getInteractionDataForPointerId(f),h=this.configureInteractionEventForDOMEvent(this.eventData,f,c);if(h.data.originalEvent=e,this.processInteractive(h,this.lastObjectRendered,i,n||!u),this.emit(n?"pointercancel":"pointerup"+u,h),f.pointerType==="mouse"||f.pointerType==="pen"){var d=f.button===2;this.emit(d?"rightup"+u:"mouseup"+u,h)}else f.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+u,h),this.releaseInteractionDataForPointerId(f.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,n){var i=e.data,o=e.data.identifier;n.trackedPointers[o]!==void 0&&(delete n.trackedPointers[o],this.dispatchEvent(n,"pointercancel",e),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,n,i){var o=e.data,a=e.data.identifier,s=n.trackedPointers[a],u=o.pointerType==="touch",l=o.pointerType==="mouse"||o.pointerType==="pen",f=!1;if(l){var c=o.button===2,h=Ts.FLAGS,d=c?h.RIGHT_DOWN:h.LEFT_DOWN,p=s!==void 0&&s.flags&d;i?(this.dispatchEvent(n,c?"rightup":"mouseup",e),p&&(this.dispatchEvent(n,c?"rightclick":"click",e),f=!0)):p&&this.dispatchEvent(n,c?"rightupoutside":"mouseupoutside",e),s&&(c?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",e),u&&this.dispatchEvent(n,"touchend",e),s&&((!l||f)&&this.dispatchEvent(n,"pointertap",e),u&&(this.dispatchEvent(n,"tap",e),s.over=!1))):s&&(this.dispatchEvent(n,"pointerupoutside",e),u&&this.dispatchEvent(n,"touchendoutside",e)),s&&s.none&&delete n.trackedPointers[a]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,o=0;o<i;o++){var a=n[o],s=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,s);u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),a.pointerType==="touch"&&this.emit("touchmove",u),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",u)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,n,i){var o=e.data,a=o.pointerType==="touch",s=o.pointerType==="mouse"||o.pointerType==="pen";s&&this.processPointerOverOut(e,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",e),a&&this.dispatchEvent(n,"touchmove",e),s&&this.dispatchEvent(n,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(e,n,i){var o=e.data,a=e.data.identifier,s=o.pointerType==="mouse"||o.pointerType==="pen",u=n.trackedPointers[a];i&&!u&&(u=n.trackedPointers[a]=new Ts(a)),u!==void 0&&(i&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(n,"pointerover",e),s&&this.delayDispatchEvent(n,"mouseover",e)),s&&this.cursor===null&&(this.cursor=n.cursor)):u.over&&(u.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),s&&this.dispatchEvent(n,"mouseout",e),u.none&&delete n.trackedPointers[a]))},t.prototype.onPointerOver=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e),i=n[0],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",a)}},t.prototype.getInteractionDataForPointerId=function(e){var n=e.pointerId,i;return n===Ma||e.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new qh,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(e),i},t.prototype.releaseInteractionDataForPointerId=function(e){var n=this.activeInteractionData[e];n&&(delete this.activeInteractionData[e],n.reset(),this.interactionDataPool.push(n))},t.prototype.configureInteractionEventForDOMEvent=function(e,n,i){return e.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,o=e.changedTouches.length;i<o;i++){var a=e.changedTouches[i];typeof a.button>"u"&&(a.button=e.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=e.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,n.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){var s=e;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=Ma),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(e);return n},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t.extension={name:"interaction",type:[nt.RendererPlugin,nt.CanvasRendererPlugin]},t}(wn);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var uM=new V,lM=4,px=function(){function r(t){this.renderer=t}return r.prototype.image=function(t,e,n){var i=new Image;return i.src=this.base64(t,e,n),i},r.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},r.prototype.canvas=function(t,e){var n=this._rawPixels(t,e),i=n.pixels,o=n.width,a=n.height,s=n.flipY,u=new zh(o,a,1),l=u.context.getImageData(0,0,o,a);if(r.arrayPostDivide(i,l.data),u.context.putImageData(l,0,0),s){var f=new zh(u.width,u.height,1);f.context.scale(1,-1),f.context.drawImage(u.canvas,0,-a),u.destroy(),u=f}return u.canvas},r.prototype.pixels=function(t,e){var n=this._rawPixels(t,e).pixels;return r.arrayPostDivide(n,n),n},r.prototype._rawPixels=function(t,e){var n=this.renderer,i,o=!1,a,s=!1;if(t)if(t instanceof Ur)a=t;else{var u=n.context.webGLVersion>=2?n.multisample:ct.NONE;if(a=this.renderer.generateTexture(t,{multisample:u}),u!==ct.NONE){var l=Ur.create({width:a.width,height:a.height});n.framebuffer.bind(a.framebuffer),n.framebuffer.blit(l.framebuffer),n.framebuffer.bind(null),a.destroy(!0),a=l}s=!0}a?(i=a.baseTexture.resolution,e=e??a.frame,o=!1,n.renderTexture.bind(a)):(i=n.resolution,e||(e=uM,e.width=n.width,e.height=n.height),o=!0,n.renderTexture.bind(null));var f=Math.round(e.width*i),c=Math.round(e.height*i),h=new Uint8Array(lM*f*c),d=n.gl;return d.readPixels(Math.round(e.x*i),Math.round(e.y*i),f,c,d.RGBA,d.UNSIGNED_BYTE,h),s&&a.destroy(!0),{pixels:h,width:f,height:c,flipY:o}},r.prototype.destroy=function(){this.renderer=null},r.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var i=e[n+3]=t[n+3];i!==0?(e[n]=Math.round(Math.min(t[n]*255/i,255)),e[n+1]=Math.round(Math.min(t[n+1]*255/i,255)),e[n+2]=Math.round(Math.min(t[n+2]*255/i,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},r.extension={name:"extract",type:nt.RendererPlugin},r}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Da=function(){function r(t,e,n){e===void 0&&(e=!1),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return r.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},r}();function qm(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}var pr=function(){function r(){this._head=this._tail=void 0}return r.prototype.handlers=function(t){t===void 0&&(t=!1);var e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n},r.prototype.has=function(t){if(!(t instanceof Da))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},r.prototype.dispatch=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,e),i=i._next;return!0},r.prototype.add=function(t,e){if(e===void 0&&(e=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return qm(this,new Da(t,!1,e))},r.prototype.once=function(t,e){if(e===void 0&&(e=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return qm(this,new Da(t,!0,e))},r.prototype.detach=function(t){if(!(t instanceof Da))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},r.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},r}();function vx(r,t){t=t||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=e.parser[t.strictMode?"strict":"loose"].exec(r),i={},o=14;o--;)i[e.key[o]]=n[o]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(a,s,u){s&&(i[e.q.name][s]=u)}),i}var Zl,Ba=null,fM=0,Km=200,hM=204,cM=1223,dM=2;function Zm(){}function Jm(r,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(r[t]=e)}function Jl(r){return r.toString().replace("object ","")}var xt=function(){function r(t,e,n){if(this._dequeue=Zm,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof e!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,e.indexOf("data:")===0),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Zm,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new pr,this.onProgress=new pr,this.onComplete=new pr,this.onAfterMiddleware=new pr}return r.setExtensionLoadType=function(t,e){Jm(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){Jm(r._xhrTypeMap,t,e)},Object.defineProperty(r.prototype,"isDataUrl",{get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComplete",{get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isLoading",{get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),r.prototype.complete=function(){this._clearEvents(),this._finish()},r.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(e)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:typeof Zl>"u"&&(Zl=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Zl&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},r.prototype._hasFlag=function(t){return(this._flags&t)!==0},r.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},r.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},r.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=n,i},r.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},r.prototype._onTimeout=function(){this.abort("Load timed out.")},r.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Jl(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},r.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Jl(t)+" Request timed out.")},r.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Jl(t)+" Request was aborted by the user.")},r.prototype._xhrOnLoad=function(){var t=this.xhr,e="",n=typeof t.status>"u"?Km:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(e=t.responseText),n===fM&&(e.length>0||t.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?n=Km:n===cM&&(n=hM);var i=n/100|0;if(i===dM)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=r.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(e,"text/xml")}else{var a=document.createElement("div");a.innerHTML=e,this.data=a}this.type=r.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=t.response||e;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},r.prototype._determineCrossOrigin=function(t,e){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Ba||(Ba=document.createElement("a")),Ba.href=t;var n=vx(Ba.href,{strictMode:!0}),i=!n.port&&e.port===""||n.port===e.port,o=n.protocol?n.protocol+":":"";return n.host!==e.hostname||!i||o!==e.protocol?"anonymous":""},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(t){t===void 0&&(t=this.url);var e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),o=t.indexOf("#"),a=Math.min(i>-1?i:t.length,o>-1?o:t.length);t=t.substring(0,a),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r}();(function(r){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(r.STATUS_FLAGS||(r.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(r.TYPE||(r.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(r.LOAD_TYPE||(r.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(r.XHR_RESPONSE_TYPE||(r.XHR_RESPONSE_TYPE={})),r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,avif:r.LOAD_TYPE.IMAGE,svg:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE,mp3:r.LOAD_TYPE.AUDIO,ogg:r.LOAD_TYPE.AUDIO,wav:r.LOAD_TYPE.AUDIO,mp4:r.LOAD_TYPE.VIDEO,webm:r.LOAD_TYPE.VIDEO},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,avif:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT,ttf:r.XHR_RESPONSE_TYPE.BUFFER,otf:r.XHR_RESPONSE_TYPE.BUFFER},r.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(xt||(xt={}));function Yr(){}function pM(r){return function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(r===null)throw new Error("Callback was already called.");var o=r;r=null,o.apply(this,n)}}var vM=function(){function r(t,e){this.data=t,this.callback=e}return r}(),Ql=function(){function r(t,e){var n=this;if(e===void 0&&(e=1),this.workers=0,this.saturated=Yr,this.unsaturated=Yr,this.empty=Yr,this.drain=Yr,this.error=Yr,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,o,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var s=new vM(i,typeof a=="function"?a:Yr);o?n._tasks.unshift(s):n._tasks.push(s),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,pM(n._next(i)))}},this._worker=t,e===0)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return r.prototype._next=function(t){var e=this;return function(){for(var n=arguments,i=[],o=0;o<arguments.length;o++)i[o]=n[o];e.workers-=1,t.callback.apply(t,i),i[0]!=null&&e.error(i[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},r.prototype.push=function(t,e){this._insert(t,!1,e)},r.prototype.kill=function(){this.workers=0,this.drain=Yr,this.started=!1,this._tasks=[]},r.prototype.unshift=function(t,e){this._insert(t,!0,e)},r.prototype.length=function(){return this._tasks.length},r.prototype.running=function(){return this.workers},r.prototype.idle=function(){return this._tasks.length+this.workers===0},r.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},r.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},r.eachSeries=function(t,e,n,i){var o=0,a=t.length;function s(u){if(u||o===a){n&&n(u);return}i?setTimeout(function(){e(t[o++],s)},1):e(t[o++],s)}s()},r.queue=function(t,e){return new r(t,e)},r}(),tf=100,mM=/(#[\w-]+)?$/,yi=function(){function r(t,e){var n=this;t===void 0&&(t=""),e===void 0&&(e=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,l){return n._loadResource(u,l)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(u,l){return n._loadResource(u,l)},this._queue=Ql.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new pr,this.onError=new pr,this.onLoad=new pr,this.onStart=new pr,this.onComplete=new pr;for(var i=0;i<r._plugins.length;++i){var o=r._plugins[i],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return r.prototype._add=function(t,e,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new xt(t,e,n),typeof i=="function"&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var u=o.progressChunk*(a.length+1),l=u/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var s=0;s<a.length;++s)a[s].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},r.prototype.load=function(t){if(ee("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,n=tf/e,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(r.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),r.prototype._prepareUrl=function(t){var e=vx(t,{strictMode:!0}),n;if(e.protocol||!e.path||t.indexOf("//")===0?n=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?n=this.baseUrl+"/"+t:n=this.baseUrl+t,this.defaultQueryString){var i=mM.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},r.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,Ql.eachSeries(this._beforeMiddleware,function(i,o){i.call(n,t,function(){o(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},r.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r.prototype._onComplete=function(){this.progress=tf,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Ql.eachSeries(this._afterMiddleware,function(n,i){n.call(e,t,i)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(tf,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&e._resourcesParsing.length===0&&e._onComplete()},!0)},r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var t=r._shared;return t||(t=new r,t._protected=!0,r._shared=t),t},enumerable:!1,configurable:!0}),r.registerPlugin=function(t){return ee("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),ue.add({type:nt.Loader,ref:t}),r},r._plugins=[],r}();ue.handleByList(nt.Loader,yi._plugins);yi.prototype.add=function(t,e,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if(typeof t=="object"&&(n=t,i=e||n.callback||n.onComplete,e=n.url,t=n.name||n.key||n.url),typeof e!="string"&&(i=n,n=e,e=t),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(t,e,n,i)};var mx=function(){function r(){}return r.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?yi.shared:new yi},r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r.extension=nt.Application,r}(),yx=function(){function r(){}return r.add=function(){xt.setExtensionLoadType("svg",xt.LOAD_TYPE.XHR),xt.setExtensionXhrType("svg",xt.XHR_RESPONSE_TYPE.TEXT)},r.use=function(t,e){if(t.data&&(t.type===xt.TYPE.IMAGE||t.extension==="svg")){var n=t.data,i=t.url,o=t.name,a=t.metadata;G.fromLoader(n,i,o,a).then(function(s){t.texture=s,e()}).catch(e)}else e()},r.extension=nt.Loader,r}(),yM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function gM(r){for(var t="",e=0;e<r.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)e<r.length?n[o]=r.charCodeAt(e++)&255:n[o]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var a=e-(r.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var o=0;o<i.length;++o)t+=yM.charAt(i[o])}return t}function _M(r,t){if(!r.data){t();return}if(r.xhr&&r.xhrType===xt.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof r.data=="string"){var e=r.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){r.data=new Image,r.data.src="data:"+e+";base64,"+gM(r.xhr.responseText),r.type=xt.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,t()};return}}else if(r.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=i,r.type=xt.TYPE.IMAGE,r.data.onload=function(){n.revokeObjectURL(i),r.data.onload=null,t()};return}}t()}var bM=function(){function r(){}return r.extension=nt.Loader,r.use=_M,r}();ue.add(yx,bM);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ot,z;(function(r){r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(z||(z={}));var Do=(ot={},ot[z.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ot[z.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ot[z.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ot[z.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ot[z.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ot[z.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ot[z.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ot[z.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ot[z.COMPRESSED_R11_EAC]=.5,ot[z.COMPRESSED_SIGNED_R11_EAC]=.5,ot[z.COMPRESSED_RG11_EAC]=1,ot[z.COMPRESSED_SIGNED_RG11_EAC]=1,ot[z.COMPRESSED_RGB8_ETC2]=.5,ot[z.COMPRESSED_RGBA8_ETC2_EAC]=1,ot[z.COMPRESSED_SRGB8_ETC2]=.5,ot[z.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ot[z.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ot[z.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ot[z.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ot[z.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ot[z.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ot[z.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ot[z.COMPRESSED_RGB_ETC1_WEBGL]=.5,ot[z.COMPRESSED_RGB_ATC_WEBGL]=.5,ot[z.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ot[z.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ot[z.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,ot);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zh=function(r,t){return Zh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Zh(r,t)};function gx(r,t){Zh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function xM(r,t,e,n){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(f){try{l(n.next(f))}catch(c){a(c)}}function u(f){try{l(n.throw(f))}catch(c){a(c)}}function l(f){f.done?o(f.value):i(f.value).then(s,u)}l((n=n.apply(r,[])).next())})}function TM(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return u([l,f])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(f){l=[6,f],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var _x=function(r){gx(t,r);function t(e,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,o,a;return typeof e=="string"?(o=e,a=new Uint8Array):(o=null,a=e),i=r.call(this,a,n)||this,i.origin=o,i.buffer=a?new Js(a):null,i.origin&&n.autoLoad!==!1&&i.load(),a&&a.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return t.prototype.onBlobLoaded=function(e){},t.prototype.load=function(){return xM(this,void 0,Promise,function(){var e,n,i;return TM(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return e=o.sent(),[4,e.blob()];case 2:return n=o.sent(),[4,n.arrayBuffer()];case 3:return i=o.sent(),this.data=new Uint32Array(i),this.buffer=new Js(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},t}(En),Qs=function(r){gx(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=t._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||t._createLevelBuffers(e instanceof Uint8Array?e:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return t.prototype.upload=function(e,n,i){var o=e.gl,a=e.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,u=this.levels;s<u;s++){var l=this._levelBuffers[s],f=l.levelID,c=l.levelWidth,h=l.levelHeight,d=l.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,f,this.format,c,h,0,d)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(e,n,i,o,a,s,u){for(var l=new Array(i),f=e.byteOffset,c=s,h=u,d=c+o-1&~(o-1),p=h+a-1&~(a-1),v=d*p*Do[n],m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?c:d,levelHeight:i>1?h:p,levelBuffer:new Uint8Array(e.buffer,f,v)},f+=v,c=c>>1||1,h=h>>1||1,d=c+o-1&~(o-1),p=h+a-1&~(a-1),v=d*p*Do[n];return l},t}(_x),bx=function(){function r(){}return r.use=function(t,e){var n=t.data,i=this;if(t.type===xt.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var o=n.textures,a=void 0,s=void 0,u=0,l=o.length;u<l;u++){var f=o[u],c=f.src,h=f.format;if(h||(s=c),r.textureFormats[h]){a=c;break}}if(a=a||s,!a){e(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(a===t.url){e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},p=nn.resolve(t.url.replace(i.baseUrl,""),a),v=n.cacheID;i.add(v,p,d,function(m){if(m.error){e(m.error);return}var y=m.texture,_=y===void 0?null:y,g=m.textures,x=g===void 0?{}:g;Object.assign(t,{texture:_,textures:x}),e()})}else e()},Object.defineProperty(r,"textureExtensions",{get:function(){if(!r._textureExtensions){var t=R.ADAPTER.createCanvas(),e=t.getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};r._textureExtensions=n}return r._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(r,"textureFormats",{get:function(){if(!r._textureFormats){var t=r.textureExtensions;r._textureFormats={};for(var e in t){var n=t[e];n&&Object.assign(r._textureFormats,Object.getPrototypeOf(n))}}return r._textureFormats},enumerable:!1,configurable:!0}),r.extension=nt.Loader,r}();function xx(r,t,e){var n={textures:{},texture:null};if(!t)return n;var i=t.map(function(o){return new G(new K(o,Object.assign({mipmap:le.OFF,alphaMode:we.NO_PREMULTIPLIED_ALPHA},e)))});return i.forEach(function(o,a){var s=o.baseTexture,u=r+"-"+(a+1);K.addToCache(s,u),G.addToCache(o,u),a===0&&(K.addToCache(s,r),G.addToCache(o,r),n.texture=o),n.textures[u]=o}),n}var ki,Ae,ef=4,Na=124,SM=32,Qm=20,wM=542327876,La={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},EM={FOURCC:2},Ua={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},Ie;(function(r){r[r.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",r[r.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",r[r.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",r[r.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",r[r.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",r[r.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",r[r.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",r[r.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",r[r.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",r[r.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",r[r.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",r[r.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",r[r.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",r[r.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",r[r.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",r[r.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",r[r.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",r[r.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",r[r.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",r[r.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",r[r.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",r[r.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",r[r.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",r[r.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",r[r.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",r[r.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",r[r.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",r[r.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",r[r.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",r[r.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",r[r.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",r[r.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",r[r.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",r[r.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",r[r.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",r[r.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",r[r.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",r[r.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",r[r.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",r[r.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",r[r.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",r[r.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",r[r.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",r[r.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",r[r.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",r[r.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",r[r.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",r[r.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",r[r.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",r[r.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",r[r.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",r[r.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",r[r.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",r[r.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",r[r.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",r[r.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",r[r.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",r[r.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",r[r.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",r[r.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",r[r.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",r[r.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",r[r.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",r[r.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",r[r.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",r[r.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",r[r.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",r[r.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",r[r.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",r[r.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",r[r.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",r[r.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",r[r.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",r[r.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",r[r.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",r[r.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",r[r.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",r[r.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",r[r.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",r[r.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",r[r.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",r[r.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",r[r.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",r[r.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",r[r.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",r[r.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",r[r.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",r[r.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",r[r.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",r[r.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",r[r.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",r[r.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",r[r.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",r[r.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",r[r.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",r[r.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",r[r.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",r[r.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",r[r.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",r[r.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",r[r.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",r[r.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",r[r.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",r[r.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",r[r.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",r[r.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",r[r.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",r[r.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",r[r.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",r[r.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",r[r.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",r[r.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ie||(Ie={}));var Jh;(function(r){r[r.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",r[r.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",r[r.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Jh||(Jh={}));var OM=1,PM=2,CM=4,AM=64,RM=512,IM=131072,MM=827611204,FM=861165636,DM=894720068,BM=808540228,NM=4,LM=(ki={},ki[MM]=z.COMPRESSED_RGBA_S3TC_DXT1_EXT,ki[FM]=z.COMPRESSED_RGBA_S3TC_DXT3_EXT,ki[DM]=z.COMPRESSED_RGBA_S3TC_DXT5_EXT,ki),UM=(Ae={},Ae[Ie.DXGI_FORMAT_BC1_TYPELESS]=z.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ae[Ie.DXGI_FORMAT_BC1_UNORM]=z.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ae[Ie.DXGI_FORMAT_BC2_TYPELESS]=z.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ae[Ie.DXGI_FORMAT_BC2_UNORM]=z.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ae[Ie.DXGI_FORMAT_BC3_TYPELESS]=z.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ae[Ie.DXGI_FORMAT_BC3_UNORM]=z.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ae[Ie.DXGI_FORMAT_BC1_UNORM_SRGB]=z.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Ae[Ie.DXGI_FORMAT_BC2_UNORM_SRGB]=z.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Ae[Ie.DXGI_FORMAT_BC3_UNORM_SRGB]=z.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Ae);function Tx(r){var t=new Uint32Array(r),e=t[0];if(e!==wM)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(r,0,Na/Uint32Array.BYTES_PER_ELEMENT),i=n[La.HEIGHT],o=n[La.WIDTH],a=n[La.MIPMAP_COUNT],s=new Uint32Array(r,La.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,SM/Uint32Array.BYTES_PER_ELEMENT),u=s[OM];if(u&CM){var l=s[EM.FOURCC];if(l!==BM){var f=LM[l],c=ef+Na,h=new Uint8Array(r,c),d=new Qs(h,{format:f,width:o,height:i,levels:a});return[d]}var p=ef+Na,v=new Uint32Array(t.buffer,p,Qm/Uint32Array.BYTES_PER_ELEMENT),m=v[Ua.DXGI_FORMAT],y=v[Ua.RESOURCE_DIMENSION],_=v[Ua.MISC_FLAG],g=v[Ua.ARRAY_SIZE],x=UM[m];if(x===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+m);if(_===NM)throw new Error("DDSParser does not support cubemap textures");if(y===Jh.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var b=new Array,T=ef+Na+Qm;if(g===1)b.push(new Uint8Array(r,T));else{for(var S=Do[x],O=0,w=o,E=i,P=0;P<a;P++){var D=Math.max(1,w+3&-4),N=Math.max(1,E+3&-4),H=D*N*S;O+=H,w=w>>>1,E=E>>>1}for(var M=T,P=0;P<g;P++)b.push(new Uint8Array(r,M,O)),M+=O}return b.map(function(F){return new Qs(F,{format:x,width:o,height:i,levels:a})})}throw u&AM?new Error("DDSParser does not support uncompressed texture data."):u&RM?new Error("DDSParser does not supported YUV uncompressed texture data."):u&IM?new Error("DDSParser does not support single-channel (lumninance) texture data!"):u&PM?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var br,ur,$i,ty=[171,75,84,88,32,49,49,187,13,10,26,10],GM=67305985,Re={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Qh=64,tc=(br={},br[U.UNSIGNED_BYTE]=1,br[U.UNSIGNED_SHORT]=2,br[U.INT]=4,br[U.UNSIGNED_INT]=4,br[U.FLOAT]=4,br[U.HALF_FLOAT]=8,br),Sx=(ur={},ur[A.RGBA]=4,ur[A.RGB]=3,ur[A.RG]=2,ur[A.RED]=1,ur[A.LUMINANCE]=1,ur[A.LUMINANCE_ALPHA]=2,ur[A.ALPHA]=1,ur),Ex=($i={},$i[U.UNSIGNED_SHORT_4_4_4_4]=2,$i[U.UNSIGNED_SHORT_5_5_5_1]=2,$i[U.UNSIGNED_SHORT_5_6_5]=2,$i);function Ox(r,t,e){e===void 0&&(e=!1);var n=new DataView(t);if(!jM(r,n))return null;var i=n.getUint32(Re.ENDIANNESS,!0)===GM,o=n.getUint32(Re.GL_TYPE,i),a=n.getUint32(Re.GL_FORMAT,i),s=n.getUint32(Re.GL_INTERNAL_FORMAT,i),u=n.getUint32(Re.PIXEL_WIDTH,i),l=n.getUint32(Re.PIXEL_HEIGHT,i)||1,f=n.getUint32(Re.PIXEL_DEPTH,i)||1,c=n.getUint32(Re.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=n.getUint32(Re.NUMBER_OF_FACES,i),d=n.getUint32(Re.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(Re.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||f!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");var v=4,m=4,y=u+3&-4,_=l+3&-4,g=new Array(c),x=u*l;o===0&&(x=y*_);var b;if(o!==0?tc[o]?b=tc[o]*Sx[a]:b=Ex[o]:b=Do[s],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var T=e?$M(n,p,i):null,S=x*b,O=S,w=u,E=l,P=y,D=_,N=Qh+p,H=0;H<d;H++){for(var M=n.getUint32(N,i),F=N+4,$=0;$<c;$++){var It=g[$];It||(It=g[$]=new Array(d)),It[H]={levelID:H,levelWidth:d>1||o!==0?w:P,levelHeight:d>1||o!==0?E:D,levelBuffer:new Uint8Array(t,F,O)},F+=O}N+=M+4,N=N%4!==0?N+4-N%4:N,w=w>>1||1,E=E>>1||1,P=w+v-1&-4,D=E+m-1&-4,O=P*D*b}return o!==0?{uncompressed:g.map(function(q){var I=q[0].levelBuffer,C=!1;return o===U.FLOAT?I=new Float32Array(q[0].levelBuffer.buffer,q[0].levelBuffer.byteOffset,q[0].levelBuffer.byteLength/4):o===U.UNSIGNED_INT?(C=!0,I=new Uint32Array(q[0].levelBuffer.buffer,q[0].levelBuffer.byteOffset,q[0].levelBuffer.byteLength/4)):o===U.INT&&(C=!0,I=new Int32Array(q[0].levelBuffer.buffer,q[0].levelBuffer.byteOffset,q[0].levelBuffer.byteLength/4)),{resource:new En(I,{width:q[0].levelWidth,height:q[0].levelHeight}),type:o,format:C?kM(a):a}}),kvData:T}:{compressed:g.map(function(q){return new Qs(null,{format:s,width:u,height:l,levels:d,levelBuffers:q})}),kvData:T}}function jM(r,t){for(var e=0;e<ty.length;e++)if(t.getUint8(e)!==ty[e])return console.error(r+" is not a valid *.ktx file!"),!1;return!0}function kM(r){switch(r){case A.RGBA:return A.RGBA_INTEGER;case A.RGB:return A.RGB_INTEGER;case A.RG:return A.RG_INTEGER;case A.RED:return A.RED_INTEGER;default:return r}}function $M(r,t,e){for(var n=new Map,i=0;i<t;){var o=r.getUint32(Qh+i,e),a=Qh+i+4,s=3-(o+3)%4;if(o===0||o>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<o&&r.getUint8(a+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=new TextDecoder().decode(new Uint8Array(r.buffer,a,u)),f=new DataView(r.buffer,a+u+1,o-u-1);n.set(l,f),i+=4+o+s}return n}xt.setExtensionXhrType("dds",xt.XHR_RESPONSE_TYPE.BUFFER);var Px=function(){function r(){}return r.use=function(t,e){if(t.extension==="dds"&&t.data)try{Object.assign(t,xx(t.name||t.url,Tx(t.data),t.metadata))}catch(n){e(n);return}e()},r.extension=nt.Loader,r}();xt.setExtensionXhrType("ktx",xt.XHR_RESPONSE_TYPE.BUFFER);var Cx=function(){function r(){}return r.use=function(t,e){if(t.extension==="ktx"&&t.data)try{var n=t.name||t.url,i=Ox(n,t.data,this.loadKeyValueData),o=i.compressed,a=i.uncompressed,s=i.kvData;if(o){var u=xx(n,o,t.metadata);if(s&&u.textures)for(var l in u.textures)u.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(t,u)}else if(a){var f={};a.forEach(function(c,h){var d=new G(new K(c.resource,{mipmap:le.OFF,alphaMode:we.NO_PREMULTIPLIED_ALPHA,type:c.type,format:c.format})),p=n+"-"+(h+1);s&&(d.baseTexture.ktxKeyValueData=s),K.addToCache(d.baseTexture,p),G.addToCache(d,p),h===0&&(f[n]=d,K.addToCache(d.baseTexture,n),G.addToCache(d,n)),f[p]=d}),Object.assign(t,{textures:f})}}catch(c){e(c);return}e()},r.extension=nt.Loader,r.loadKeyValueData=!1,r}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ec=function(r,t){return ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},ec(r,t)};function Ax(r,t){ec(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var zM=function(r){Ax(t,r);function t(e,n,i,o){e===void 0&&(e=1500),i===void 0&&(i=16384),o===void 0&&(o=!1);var a=r.call(this)||this,s=16384;return i>s&&(i=s),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=L.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Xt(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var n=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(st),ey=function(){function r(t,e,n){this.geometry=new Ii,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||U.FLOAT,offset:o.offset},e[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return r.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Mt(wb(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=e,e+=i.size,this.dynamicStride+=i.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Mt(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=a,a+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Mt(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===U.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===U.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},r.prototype.uploadDynamic=function(t,e,n){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,n,o.type===U.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},r.prototype.uploadStatic=function(t,e,n){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,n,o.type===U.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},r.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},r}(),HM=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,XM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Rx=function(r){Ax(t,r);function t(e){var n=r.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Ft,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:U.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Qe.from(XM,HM,{}),n.state=$r.for2d(),n}return t.prototype.render=function(e){var n=e.children,i=e._maxSize,o=e._batchSize,a=this.renderer,s=n.length;if(s!==0){s>i&&!e.autoResize&&(s=i);var u=e._buffers;u||(u=e._buffers=this.generateBuffers(e));var l=n[0]._texture.baseTexture,f=l.alphaMode>0;this.state.blendMode=up(e.blendMode,f),a.state.set(this.state);var c=a.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=Sb(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,f),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var d=!1,p=0,v=0;p<s;p+=o,v+=1){var m=s-p;m>o&&(m=o),v>=u.length&&u.push(this._generateOneMoreBuffer(e));var y=u[v];y.uploadDynamic(n,p,m);var _=e._bufferUpdateIDs[v]||0;d=d||y._updateID<_,d&&(y._updateID=e._updateID,y.uploadStatic(n,p,m)),a.geometry.bind(y.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var n=[],i=e._maxSize,o=e._batchSize,a=e._properties,s=0;s<i;s+=o)n.push(new ey(this.properties,a,o));return n},t.prototype._generateOneMoreBuffer=function(e){var n=e._batchSize,i=e._properties;return new ey(this.properties,i,n)},t.prototype.uploadVertices=function(e,n,i,o,a,s){for(var u=0,l=0,f=0,c=0,h=0;h<i;++h){var d=e[n+h],p=d._texture,v=d.scale.x,m=d.scale.y,y=p.trim,_=p.orig;y?(l=y.x-d.anchor.x*_.width,u=l+y.width,c=y.y-d.anchor.y*_.height,f=c+y.height):(u=_.width*(1-d.anchor.x),l=_.width*-d.anchor.x,f=_.height*(1-d.anchor.y),c=_.height*-d.anchor.y),o[s]=l*v,o[s+1]=c*m,o[s+a]=u*v,o[s+a+1]=c*m,o[s+a*2]=u*v,o[s+a*2+1]=f*m,o[s+a*3]=l*v,o[s+a*3+1]=f*m,s+=a*4}},t.prototype.uploadPosition=function(e,n,i,o,a,s){for(var u=0;u<i;u++){var l=e[n+u].position;o[s]=l.x,o[s+1]=l.y,o[s+a]=l.x,o[s+a+1]=l.y,o[s+a*2]=l.x,o[s+a*2+1]=l.y,o[s+a*3]=l.x,o[s+a*3+1]=l.y,s+=a*4}},t.prototype.uploadRotation=function(e,n,i,o,a,s){for(var u=0;u<i;u++){var l=e[n+u].rotation;o[s]=l,o[s+a]=l,o[s+a*2]=l,o[s+a*3]=l,s+=a*4}},t.prototype.uploadUvs=function(e,n,i,o,a,s){for(var u=0;u<i;++u){var l=e[n+u]._texture._uvs;l?(o[s]=l.x0,o[s+1]=l.y0,o[s+a]=l.x1,o[s+a+1]=l.y1,o[s+a*2]=l.x2,o[s+a*2+1]=l.y2,o[s+a*3]=l.x3,o[s+a*3+1]=l.y3,s+=a*4):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+a*2]=0,o[s+a*2+1]=0,o[s+a*3]=0,o[s+a*3+1]=0,s+=a*4)}},t.prototype.uploadTint=function(e,n,i,o,a,s){for(var u=0;u<i;++u){var l=e[n+u],f=l._texture.baseTexture.alphaMode>0,c=l.alpha,h=c<1&&f?Cu(l._tintRGB,c):l._tintRGB+(c*255<<24);o[s]=h,o[s+a]=h,o[s+a*2]=h,o[s+a*3]=h,s+=a*4}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t.extension={name:"particle",type:nt.RendererPlugin},t}(Zo);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ye;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(Ye||(Ye={}));var vr;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(vr||(vr={}));var gi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,t){if(t===void 0&&(t=20),!this.adaptive||!r||isNaN(r))return t;var e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},jp=function(){function r(){this.color=16777215,this.alpha=1,this.texture=G.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=G.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rc=function(r,t){return rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},rc(r,t)};function kp(r,t){rc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ry(r,t){var e,n;t===void 0&&(t=!1);var i=r.length;if(!(i<6)){for(var o=0,a=0,s=r[i-2],u=r[i-1];a<i;a+=2){var l=r[a],f=r[a+1];o+=(l-s)*(f+u),s=l,u=f}if(!t&&o>0||t&&o<=0)for(var c=i/2,a=c+c%2;a<i;a+=2){var h=i-a-2,d=i-a-1,p=a,v=a+1;e=[r[p],r[h]],r[h]=e[0],r[p]=e[1],n=[r[v],r[d]],r[d]=n[0],r[v]=n[1]}}}var $p={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,t){var e=r.points,n=r.holes,i=t.points,o=t.indices;if(e.length>=6){ry(e,!1);for(var a=[],s=0;s<n.length;s++){var u=n[s];ry(u.points,!0),a.push(e.length/2),e=e.concat(u.points)}var l=Jd(e,a,2);if(!l)return;for(var f=i.length/2,s=0;s<l.length;s+=3)o.push(l[s]+f),o.push(l[s+1]+f),o.push(l[s+2]+f);for(var s=0;s<e.length;s++)i.push(e[s])}}},Bo={build:function(r){var t=r.points,e,n,i,o,a,s;if(r.type===Nt.CIRC){var u=r.shape;e=u.x,n=u.y,a=s=u.radius,i=o=0}else if(r.type===Nt.ELIP){var l=r.shape;e=l.x,n=l.y,a=l.width,s=l.height,i=o=0}else{var f=r.shape,c=f.width/2,h=f.height/2;e=f.x+c,n=f.y+h,a=s=Math.max(0,Math.min(f.radius,Math.min(c,h))),i=c-a,o=h-s}if(!(a>=0&&s>=0&&i>=0&&o>=0)){t.length=0;return}var d=Math.ceil(2.3*Math.sqrt(a+s)),p=d*8+(i?4:0)+(o?4:0);if(t.length=p,p!==0){if(d===0){t.length=8,t[0]=t[6]=e+i,t[1]=t[3]=n+o,t[2]=t[4]=e-i,t[5]=t[7]=n-o;return}var v=0,m=d*4+(i?2:0)+2,y=m,_=p;{var g=i+a,x=o,b=e+g,T=e-g,S=n+x;if(t[v++]=b,t[v++]=S,t[--m]=S,t[--m]=T,o){var O=n-x;t[y++]=T,t[y++]=O,t[--_]=O,t[--_]=b}}for(var w=1;w<d;w++){var E=Math.PI/2*(w/d),g=i+Math.cos(E)*a,x=o+Math.sin(E)*s,b=e+g,T=e-g,S=n+x,O=n-x;t[v++]=b,t[v++]=S,t[--m]=S,t[--m]=T,t[y++]=T,t[y++]=O,t[--_]=O,t[--_]=b}{var g=i,x=o+s,b=e+g,T=e-g,S=n+x,O=n-x;t[v++]=b,t[v++]=S,t[--_]=O,t[--_]=b,i&&(t[v++]=T,t[v++]=S,t[--_]=O,t[--_]=T)}}},triangulate:function(r,t){var e=r.points,n=t.points,i=t.indices;if(e.length!==0){var o=n.length/2,a=o,s,u;if(r.type!==Nt.RREC){var l=r.shape;s=l.x,u=l.y}else{var f=r.shape;s=f.x+f.width/2,u=f.y+f.height/2}var c=r.matrix;n.push(r.matrix?c.a*s+c.c*u+c.tx:s,r.matrix?c.b*s+c.d*u+c.ty:u),o++,n.push(e[0],e[1]);for(var h=2;h<e.length;h+=2)n.push(e[h],e[h+1]),i.push(o++,a,o);i.push(a+1,a,o)}}},Ix={build:function(r){var t=r.shape,e=t.x,n=t.y,i=t.width,o=t.height,a=r.points;a.length=0,a.push(e,n,e+i,n,e+i,n+o,e,n+o)},triangulate:function(r,t){var e=r.points,n=t.points,i=n.length/2;n.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function jn(r,t,e){var n=t-r;return r+n*e}function Ga(r,t,e,n,i,o,a){a===void 0&&(a=[]);for(var s=20,u=a,l=0,f=0,c=0,h=0,d=0,p=0,v=0,m=0;v<=s;++v)m=v/s,l=jn(r,e,m),f=jn(t,n,m),c=jn(e,i,m),h=jn(n,o,m),d=jn(l,c,m),p=jn(f,h,m),!(v===0&&u[u.length-2]===d&&u[u.length-1]===p)&&u.push(d,p);return u}var Mx={build:function(r){if(tr.nextRoundedRectBehavior){Bo.build(r);return}var t=r.shape,e=r.points,n=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));e.length=0,s?(Ga(n,i+s,n,i,n+s,i,e),Ga(n+o-s,i,n+o,i,n+o,i+s,e),Ga(n+o,i+a-s,n+o,i+a,n+o-s,i+a,e),Ga(n+s,i+a,n,i+a,n,i+a-s,e)):e.push(n,i,n+o,i,n+o,i+a,n,i+a)},triangulate:function(r,t){if(tr.nextRoundedRectBehavior){Bo.triangulate(r,t);return}for(var e=r.points,n=t.points,i=t.indices,o=n.length/2,a=Jd(e,null,2),s=0,u=a.length;s<u;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(var s=0,u=e.length;s<u;s++)n.push(e[s],e[++s])}};function ny(r,t,e,n,i,o,a,s){var u=r-e*i,l=t-n*i,f=r+e*o,c=t+n*o,h,d;a?(h=n,d=-e):(h=-n,d=e);var p=u+h,v=l+d,m=f+h,y=c+d;return s.push(p,v),s.push(m,y),2}function qr(r,t,e,n,i,o,a,s){var u=e-r,l=n-t,f=Math.atan2(u,l),c=Math.atan2(i-r,o-t);s&&f<c?f+=Math.PI*2:!s&&f>c&&(c+=Math.PI*2);var h=f,d=c-f,p=Math.abs(d),v=Math.sqrt(u*u+l*l),m=(15*p*Math.sqrt(v)/Math.PI>>0)+1,y=d/m;if(h+=y,s){a.push(r,t),a.push(e,n);for(var _=1,g=h;_<m;_++,g+=y)a.push(r,t),a.push(r+Math.sin(g)*v,t+Math.cos(g)*v);a.push(r,t),a.push(i,o)}else{a.push(e,n),a.push(r,t);for(var _=1,g=h;_<m;_++,g+=y)a.push(r+Math.sin(g)*v,t+Math.cos(g)*v),a.push(r,t);a.push(i,o),a.push(r,t)}return m*2}function VM(r,t){var e=r.shape,n=r.points||e.points.slice(),i=t.closePointEps;if(n.length!==0){var o=r.lineStyle,a=new X(n[0],n[1]),s=new X(n[n.length-2],n[n.length-1]),u=e.type!==Nt.POLY||e.closeStroke,l=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var f=(a.x+s.x)*.5,c=(s.y+a.y)*.5;n.unshift(f,c),n.push(f,c)}var h=t.points,d=n.length/2,p=n.length,v=h.length/2,m=o.width/2,y=m*m,_=o.miterLimit*o.miterLimit,g=n[0],x=n[1],b=n[2],T=n[3],S=0,O=0,w=-(x-T),E=g-b,P=0,D=0,N=Math.sqrt(w*w+E*E);w/=N,E/=N,w*=m,E*=m;var H=o.alignment,M=(1-H)*2,F=H*2;u||(o.cap===vr.ROUND?p+=qr(g-w*(M-F)*.5,x-E*(M-F)*.5,g-w*M,x-E*M,g+w*F,x+E*F,h,!0)+2:o.cap===vr.SQUARE&&(p+=ny(g,x,w,E,M,F,!0,h))),h.push(g-w*M,x-E*M),h.push(g+w*F,x+E*F);for(var $=1;$<d-1;++$){g=n[($-1)*2],x=n[($-1)*2+1],b=n[$*2],T=n[$*2+1],S=n[($+1)*2],O=n[($+1)*2+1],w=-(x-T),E=g-b,N=Math.sqrt(w*w+E*E),w/=N,E/=N,w*=m,E*=m,P=-(T-O),D=b-S,N=Math.sqrt(P*P+D*D),P/=N,D/=N,P*=m,D*=m;var It=b-g,q=x-T,I=b-S,C=O-T,W=It*I+q*C,Q=q*I-C*It,rt=Q<0;if(Math.abs(Q)<.001*Math.abs(W)){h.push(b-w*M,T-E*M),h.push(b+w*F,T+E*F),W>=0&&(o.join===Ye.ROUND?p+=qr(b,T,b-w*M,T-E*M,b-P*M,T-D*M,h,!1)+4:p+=2,h.push(b-P*F,T-D*F),h.push(b+P*M,T+D*M));continue}var Ot=(-w+g)*(-E+T)-(-w+b)*(-E+x),dt=(-P+S)*(-D+T)-(-P+b)*(-D+O),pt=(It*dt-I*Ot)/Q,jt=(C*Ot-q*dt)/Q,Wt=(pt-b)*(pt-b)+(jt-T)*(jt-T),Pt=b+(pt-b)*M,at=T+(jt-T)*M,ht=b-(pt-b)*F,vt=T-(jt-T)*F,J=Math.min(It*It+q*q,I*I+C*C),Jt=rt?M:F,ne=J+Jt*Jt*y,it=Wt<=ne;it?o.join===Ye.BEVEL||Wt/y>_?(rt?(h.push(Pt,at),h.push(b+w*F,T+E*F),h.push(Pt,at),h.push(b+P*F,T+D*F)):(h.push(b-w*M,T-E*M),h.push(ht,vt),h.push(b-P*M,T-D*M),h.push(ht,vt)),p+=2):o.join===Ye.ROUND?rt?(h.push(Pt,at),h.push(b+w*F,T+E*F),p+=qr(b,T,b+w*F,T+E*F,b+P*F,T+D*F,h,!0)+4,h.push(Pt,at),h.push(b+P*F,T+D*F)):(h.push(b-w*M,T-E*M),h.push(ht,vt),p+=qr(b,T,b-w*M,T-E*M,b-P*M,T-D*M,h,!1)+4,h.push(b-P*M,T-D*M),h.push(ht,vt)):(h.push(Pt,at),h.push(ht,vt)):(h.push(b-w*M,T-E*M),h.push(b+w*F,T+E*F),o.join===Ye.ROUND?rt?p+=qr(b,T,b+w*F,T+E*F,b+P*F,T+D*F,h,!0)+2:p+=qr(b,T,b-w*M,T-E*M,b-P*M,T-D*M,h,!1)+2:o.join===Ye.MITER&&Wt/y<=_&&(rt?(h.push(ht,vt),h.push(ht,vt)):(h.push(Pt,at),h.push(Pt,at)),p+=2),h.push(b-P*M,T-D*M),h.push(b+P*F,T+D*F),p+=2)}g=n[(d-2)*2],x=n[(d-2)*2+1],b=n[(d-1)*2],T=n[(d-1)*2+1],w=-(x-T),E=g-b,N=Math.sqrt(w*w+E*E),w/=N,E/=N,w*=m,E*=m,h.push(b-w*M,T-E*M),h.push(b+w*F,T+E*F),u||(o.cap===vr.ROUND?p+=qr(b-w*(M-F)*.5,T-E*(M-F)*.5,b-w*M,T-E*M,b+w*F,T+E*F,h,!1)+2:o.cap===vr.SQUARE&&(p+=ny(b,T,w,E,M,F,!1,h)));for(var $e=t.indices,Dn=gi.epsilon*gi.epsilon,$=v;$<p+v-2;++$)g=h[$*2],x=h[$*2+1],b=h[($+1)*2],T=h[($+1)*2+1],S=h[($+2)*2],O=h[($+2)*2+1],!(Math.abs(g*(T-O)+b*(O-x)+S*(x-T))<Dn)&&$e.push($,$+1,$+2)}}function WM(r,t){var e=0,n=r.shape,i=r.points||n.points,o=n.type!==Nt.POLY||n.closeStroke;if(i.length!==0){var a=t.points,s=t.indices,u=i.length/2,l=a.length/2,f=l;for(a.push(i[0],i[1]),e=1;e<u;e++)a.push(i[e*2],i[e*2+1]),s.push(f,f+1),f++;o&&s.push(f,l)}}function nc(r,t){r.lineStyle.native?WM(r,t):VM(r,t)}var ic=function(){function r(){}return r.curveTo=function(t,e,n,i,o,a){var s=a[a.length-2],u=a[a.length-1],l=u-e,f=s-t,c=i-e,h=n-t,d=Math.abs(l*h-f*c);if(d<1e-8||o===0)return(a[a.length-2]!==t||a[a.length-1]!==e)&&a.push(t,e),null;var p=l*l+f*f,v=c*c+h*h,m=l*c+f*h,y=o*Math.sqrt(p)/d,_=o*Math.sqrt(v)/d,g=y*m/p,x=_*m/v,b=y*h+_*f,T=y*c+_*l,S=f*(_+g),O=l*(_+g),w=h*(y+x),E=c*(y+x),P=Math.atan2(O-T,S-b),D=Math.atan2(E-T,w-b);return{cx:b+t,cy:T+e,radius:o,startAngle:P,endAngle:D,anticlockwise:f*c>h*l}},r.arc=function(t,e,n,i,o,a,s,u,l){for(var f=s-a,c=gi._segmentsCount(Math.abs(f)*o,Math.ceil(Math.abs(f)/oe)*40),h=f/(c*2),d=h*2,p=Math.cos(h),v=Math.sin(h),m=c-1,y=m%1/m,_=0;_<=m;++_){var g=_+y*_,x=h+a+d*g,b=Math.cos(x),T=-Math.sin(x);l.push((p*b+v*T)*o+n,(p*-T+v*b)*o+i)}},r}(),Fx=function(){function r(){}return r.curveLength=function(t,e,n,i,o,a,s,u){for(var l=10,f=0,c=0,h=0,d=0,p=0,v=0,m=0,y=0,_=0,g=0,x=0,b=t,T=e,S=1;S<=l;++S)c=S/l,h=c*c,d=h*c,p=1-c,v=p*p,m=v*p,y=m*t+3*v*c*n+3*p*h*o+d*s,_=m*e+3*v*c*i+3*p*h*a+d*u,g=b-y,x=T-_,b=y,T=_,f+=Math.sqrt(g*g+x*x);return f},r.curveTo=function(t,e,n,i,o,a,s){var u=s[s.length-2],l=s[s.length-1];s.length-=2;var f=gi._segmentsCount(r.curveLength(u,l,t,e,n,i,o,a)),c=0,h=0,d=0,p=0,v=0;s.push(u,l);for(var m=1,y=0;m<=f;++m)y=m/f,c=1-y,h=c*c,d=h*c,p=y*y,v=p*y,s.push(d*u+3*h*y*t+3*c*p*n+v*o,d*l+3*h*y*e+3*c*p*i+v*a)},r}(),Dx=function(){function r(){}return r.curveLength=function(t,e,n,i,o,a){var s=t-2*n+o,u=e-2*i+a,l=2*n-2*t,f=2*i-2*e,c=4*(s*s+u*u),h=4*(s*l+u*f),d=l*l+f*f,p=2*Math.sqrt(c+h+d),v=Math.sqrt(c),m=2*c*v,y=2*Math.sqrt(d),_=h/v;return(m*p+v*h*(p-y)+(4*d*c-h*h)*Math.log((2*v+_+p)/(_+y)))/(4*m)},r.curveTo=function(t,e,n,i,o){for(var a=o[o.length-2],s=o[o.length-1],u=gi._segmentsCount(r.curveLength(a,s,t,e,n,i)),l=0,f=0,c=1;c<=u;++c){var h=c/u;l=a+(t-a)*h,f=s+(e-s)*h,o.push(l+(t+(n-t)*h-l)*h,f+(e+(i-e)*h-f)*h)}},r}(),Bx=function(){function r(){this.reset()}return r.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},r.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),Kr,Ss=(Kr={},Kr[Nt.POLY]=$p,Kr[Nt.CIRC]=Bo,Kr[Nt.ELIP]=Bo,Kr[Nt.RECT]=Ix,Kr[Nt.RREC]=Mx,Kr),oc=[],Qi=[],ac=function(){function r(t,e,n,i){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=i,this.type=t.type}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),kn=new X,Nx=function(r){kp(t,r);function t(){var e=r.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Mo,e.boundsDirty=-1,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Qi.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var n=this.batches[e];n.reset(),oc.push(n)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,n,i,o){n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=null);var a=new ac(e,n,i,o);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(e,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new ac(e,null,null,n),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){r.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var n=this.graphicsData,i=0;i<n.length;++i){var o=n[i];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(e,kn):kn.copyFrom(e),o.shape.contains(kn.x,kn.y))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++){var u=o.holes[s];if(u.shape.contains(kn.x,kn.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,i=null,o=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],o=i.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var s=n[a],u=s.fillStyle,l=s.lineStyle,f=Ss[s.type];f.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(u.visible||l.visible)&&this.processHoles(s.holes);for(var c=0;c<2;c++){var h=c===0?u:l;if(h.visible){var d=h.texture.baseTexture,p=this.indices.length,v=this.points.length/2;d.wrapMode=De.REPEAT,c===0?this.processFill(s):this.processLine(s);var m=this.points.length/2-v;m!==0&&(i&&!this._compareStyles(o,h)&&(i.end(p,v),i=null),i||(i=oc.pop()||new Bx,i.begin(h,p,v),this.batches.push(i),o=h),this.addUvs(this.points,e,h.texture,v,m,h.matrix))}}}var y=this.indices.length,_=this.points.length/2;if(i&&i.end(y,_),this.batches.length===0){this.batchable=!0;return}var g=_>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&g===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,n){return!(!e||!n||e.texture.baseTexture!==n.texture.baseTexture||e.color+e.alpha!==n.color+n.alpha||!!e.native!=!!n.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,n=this.graphicsData.length;e<n;e++){var i=this.graphicsData[e],o=i.fillStyle,a=i.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,n=0,i=e.length;n<i;n++)for(var o=e[n],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++K._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Qi.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,a=Qi.pop();a||(a=new Ks,a.texArray=new Zs),a.texArray.count=0,a.start=0,a.size=0,a.type=Te.TRIANGLES;var s=0,u=null,l=0,f=!1,c=Te.TRIANGLES,h=0;this.drawCalls.push(a);for(var n=0;n<this.batches.length;n++){var d=this.batches[n],p=8,v=d.style,m=v.texture.baseTexture;f!==!!v.native&&(f=!!v.native,c=f?Te.LINES:Te.TRIANGLES,u=null,s=p,e++),u!==m&&(u=m,m._batchEnabled!==e&&(s===p&&(e++,s=0,a.size>0&&(a=Qi.pop(),a||(a=new Ks,a.texArray=new Zs),this.drawCalls.push(a)),a.start=h,a.size=0,a.texArray.count=0,a.type=c),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=De.REPEAT,a.texArray.elements[a.texArray.count++]=m,s++)),a.size+=d.size,h+=d.size,l=m._batchLocation,this.addColors(i,v.color,v.alpha,d.attribSize,d.attribStart),this.addTextureIds(o,l,d.attribSize,d.attribStart)}K._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,n=this.uvs,i=this.colors,o=this.textureIds,a=new ArrayBuffer(e.length*3*4),s=new Float32Array(a),u=new Uint32Array(a),l=0,f=0;f<e.length/2;f++)s[l++]=e[f*2],s[l++]=e[f*2+1],s[l++]=n[f*2],s[l++]=n[f*2+1],u[l++]=i[f],s[l++]=o[f];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)$p.triangulate(e,this);else{var n=Ss[e.type];n.triangulate(e,this)}},t.prototype.processLine=function(e){nc(e,this);for(var n=0;n<e.holes.length;n++)nc(e.holes[n],this)},t.prototype.processHoles=function(e){for(var n=0;n<e.length;n++){var i=e[n],o=Ss[i.type];o.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,n){for(var i=0;i<e.length/2;i++){var o=e[i*2],a=e[i*2+1];e[i*2]=n.a*o+n.c*a+n.tx,e[i*2+1]=n.b*o+n.d*a+n.ty}},t.prototype.addColors=function(e,n,i,o,a){a===void 0&&(a=0);var s=(n>>16)+(n&65280)+((n&255)<<16),u=Cu(s,i);e.length=Math.max(e.length,a+o);for(var l=0;l<o;l++)e[a+l]=u},t.prototype.addTextureIds=function(e,n,i,o){o===void 0&&(o=0),e.length=Math.max(e.length,o+i);for(var a=0;a<i;a++)e[o+a]=n},t.prototype.addUvs=function(e,n,i,o,a,s){s===void 0&&(s=null);for(var u=0,l=n.length,f=i.frame;u<a;){var c=e[(o+u)*2],h=e[(o+u)*2+1];if(s){var d=s.a*c+s.c*h+s.tx;h=s.b*c+s.d*h+s.ty,c=d}u++,n.push(c/f.width,h/f.height)}var p=i.baseTexture;(f.width<p.width||f.height<p.height)&&this.adjustUvs(n,i,l,a)},t.prototype.adjustUvs=function(e,n,i,o){for(var a=n.baseTexture,s=1e-6,u=i+o*2,l=n.frame,f=l.width/a.width,c=l.height/a.height,h=l.x/l.width,d=l.y/l.height,p=Math.floor(e[i]+s),v=Math.floor(e[i+1]+s),m=i+2;m<u;m+=2)p=Math.min(p,Math.floor(e[m]+s)),v=Math.min(v,Math.floor(e[m+1]+s));h-=p,d-=v;for(var m=i;m<u;m+=2)e[m]=(e[m]+h)*f,e[m+1]=(e[m+1]+d)*c},t.BATCHABLE_SIZE=100,t}(Lp),Lx=function(r){kp(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=vr.BUTT,e.join=Ye.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(jp),YM=new Float32Array(3),rf={},tr=function(r){kp(t,r);function t(e){e===void 0&&(e=null);var n=r.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new jp,n._lineStyle=new Lx,n._matrix=null,n._holeMode=!1,n.state=$r.for2d(),n._geometry=e||new Nx,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=L.NORMAL,n}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,n,i,o,a){return e===void 0&&(e=null),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=.5),a===void 0&&(a=!1),typeof e=="number"&&(e={width:e,color:n,alpha:i,alignment:o,native:a}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:G.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:vr.BUTT,join:Ye.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new so,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[n-2],e[n-1]))}else this.currentPath=new so,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,n){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=n,this},t.prototype.lineTo=function(e,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],a=i[i.length-1];return(o!==e||a!==n)&&i.push(e,n),this},t.prototype._initCurve=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,n]):this.moveTo(e,n)},t.prototype.quadraticCurveTo=function(e,n,i,o){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),Dx.curveTo(e,n,i,o,a),this},t.prototype.bezierCurveTo=function(e,n,i,o,a,s){return this._initCurve(),Fx.curveTo(e,n,i,o,a,s,this.currentPath.points),this},t.prototype.arcTo=function(e,n,i,o,a){this._initCurve(e,n);var s=this.currentPath.points,u=ic.curveTo(e,n,i,o,a,s);if(u){var l=u.cx,f=u.cy,c=u.radius,h=u.startAngle,d=u.endAngle,p=u.anticlockwise;this.arc(l,f,c,h,d,p)}return this},t.prototype.arc=function(e,n,i,o,a,s){if(s===void 0&&(s=!1),o===a)return this;!s&&a<=o?a+=oe:s&&o<=a&&(o+=oe);var u=a-o;if(u===0)return this;var l=e+Math.cos(o)*i,f=n+Math.sin(o)*i,c=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var d=Math.abs(h[h.length-2]-l),p=Math.abs(h[h.length-1]-f);d<c&&p<c||h.push(l,f)}else this.moveTo(l,f),h=this.currentPath.points;return ic.arc(l,f,e,n,i,o,a,s,h),this},t.prototype.beginFill=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=1),this.beginTextureFill({texture:G.WHITE,color:e,alpha:n})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:G.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,n,i,o){return this.drawShape(new V(e,n,i,o))},t.prototype.drawRoundedRect=function(e,n,i,o,a){return this.drawShape(new Ib(e,n,i,o,a))},t.prototype.drawCircle=function(e,n,i){return this.drawShape(new Ab(e,n,i))},t.prototype.drawEllipse=function(e,n,i,o){return this.drawShape(new Rb(e,n,i,o))},t.prototype.drawPolygon=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];var o,a=!0,s=n[0];s.points?(a=s.closeStroke,o=s.points):Array.isArray(n[0])?o=n[0]:o=n;var u=new so(o);return u.closeStroke=a,this.drawShape(u),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Nt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,n=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(var o=0;o<i;o++){var a=e.batches[o],s=a.style.color,u=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),f=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),c={vertexData:u,blendMode:n,indices:f,uvs:l,_batchRGB:Xt(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=c}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var o=this.batches[n];o.worldAlpha=this.worldAlpha*o.alpha,e.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(e){var n=this._resolveDirectShader(e),i=this._geometry,o=this.tint,a=this.worldAlpha,s=n.uniforms,u=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(o&255)/255*a,s.tint[3]=a,e.shader.bind(n),e.geometry.bind(i,n),e.state.set(this.state);for(var l=0,f=u.length;l<f;l++)this._renderDrawCallDirect(e,i.drawCalls[l])},t.prototype._renderDrawCallDirect=function(e,n){for(var i=n.texArray,o=n.type,a=n.size,s=n.start,u=i.count,l=0;l<u;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(o,a,s)},t.prototype._resolveDirectShader=function(e){var n=this.shader,i=this.pluginName;if(!n){if(!rf[i]){for(var o=e.plugins[i].MAX_TEXTURES,a=new Int32Array(o),s=0;s<o;s++)a[s]=s;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ft,default:Dr.from({uSamplers:a},!0)},l=e.plugins[i]._shader.program;rf[i]=new Qe(l,u)}n=rf[i]}return n},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var n=e.bounds,i=n.minX,o=n.minY,a=n.maxX,s=n.maxY;this._bounds.addFrame(this.transform,i,o,a,s)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Xt(this.tint,YM),n=0;n<this.batches.length;n++){var i=this.batches[n],o=i._batchRGB,a=e[0]*o[0]*255,s=e[1]*o[1]*255,u=e[2]*o[2]*255,l=(a<<16)+(s<<8)+(u|0);i._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,u=n.tx,l=n.ty,f=this._geometry.points,c=this.vertexData,h=0,d=0;d<f.length;d+=2){var p=f[d],v=f[d+1];c[h++]=i*p+a*v+u,c[h++]=s*v+o*p+l}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,e)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new X,t}(st),qM={buildPoly:$p,buildCircle:Bo,buildRectangle:Ix,buildRoundedRectangle:Mx,buildLine:nc,ArcUtils:ic,BezierUtils:Fx,QuadraticUtils:Dx,BatchPart:Bx,FILL_COMMANDS:Ss,BATCH_POOL:oc,DRAW_CALL_POOL:Qi};/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sc=function(r,t){return sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},sc(r,t)};function KM(r,t){sc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var zi=new X,ZM=new Uint16Array([0,1,2,0,2,3]),Lt=function(r){KM(t,r);function t(e){var n=r.call(this)||this;return n._anchor=new Rr(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=L.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||G.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=ZM,n.pluginName="batch",n.isSprite=!0,n._roundPixels=R.ROUND_PIXELS,n}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=on(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=on(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,u=n.tx,l=n.ty,f=this.vertexData,c=e.trim,h=e.orig,d=this._anchor,p=0,v=0,m=0,y=0;if(c?(v=c.x-d._x*h.width,p=v+c.width,y=c.y-d._y*h.height,m=y+c.height):(v=-d._x*h.width,p=v+h.width,y=-d._y*h.height,m=y+h.height),f[0]=i*v+a*y+u,f[1]=s*y+o*v+l,f[2]=i*p+a*y+u,f[3]=s*y+o*p+l,f[4]=i*p+a*m+u,f[5]=s*m+o*p+l,f[6]=i*v+a*m+u,f[7]=s*m+o*v+l,this._roundPixels)for(var _=R.RESOLUTION,g=0;g<f.length;++g)f[g]=Math.round((f[g]*_|0)/_)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,n=this.vertexTrimmedData,i=e.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,u=a.b,l=a.c,f=a.d,c=a.tx,h=a.ty,d=-o._x*i.width,p=d+i.width,v=-o._y*i.height,m=v+i.height;n[0]=s*d+l*v+c,n[1]=f*v+u*d+h,n[2]=s*p+l*v+c,n[3]=f*v+u*p+h,n[4]=s*p+l*m+c,n[5]=f*m+u*p+h,n[6]=s*d+l*m+c,n[7]=f*m+u*d+h},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Mo),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new V),e=this._localBoundsRect),this._localBounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,zi);var n=this._texture.orig.width,i=this._texture.orig.height,o=-n*this.anchor.x,a=0;return zi.x>=o&&zi.x<o+n&&(a=-i*this.anchor.y,zi.y>=a&&zi.y<a+i)},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof e=="boolean"?e:e&&e.texture;if(n){var i=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(e,n){var i=e instanceof G?e:G.from(e,n);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var n=on(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var n=on(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||G.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(st);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uc=function(r,t){return uc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},uc(r,t)};function JM(r,t){uc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var _i;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(_i||(_i={}));var nf={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:_i.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},QM=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Gr=function(){function r(t){this.styleID=0,this.reset(),af(this,t,t)}return r.prototype.clone=function(){var t={};return af(t,this,nf),new r(t)},r.prototype.reset=function(){af(this,nf,nf)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=of(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=of(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){tF(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=of(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var i=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&QM.indexOf(i)<0&&(i='"'+i+'"'),e[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r}();function iy(r){return typeof r=="number"?op(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function of(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=iy(r[t]);return r}else return iy(r)}function tF(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(var e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function af(r,t,e){for(var n in e)Array.isArray(t[n])?r[n]=t[n].slice():r[n]=t[n]}var ja={willReadFrequently:!0},ke=function(){function r(t,e,n,i,o,a,s,u,l){this.text=t,this.style=e,this.width=n,this.height=i,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=u,this.fontProperties=l}return r.measureText=function(t,e,n,i){i===void 0&&(i=r._canvas),n=n??e.wordWrap;var o=e.toFontString(),a=r.measureFont(o);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var s=i.getContext("2d",ja);s.font=o;for(var u=n?r.wordWrap(t,e,i):t,l=u.split(/(?:\r\n|\r|\n)/),f=new Array(l.length),c=0,h=0;h<l.length;h++){var d=s.measureText(l[h]).width+(l[h].length-1)*e.letterSpacing;f[h]=d,c=Math.max(c,d)}var p=c+e.strokeThickness;e.dropShadow&&(p+=e.dropShadowDistance);var v=e.lineHeight||a.fontSize+e.strokeThickness,m=Math.max(v,a.fontSize+e.strokeThickness)+(l.length-1)*(v+e.leading);return e.dropShadow&&(m+=e.dropShadowDistance),new r(t,e,p,m,l,f,v+e.leading,c,a)},r.wordWrap=function(t,e,n){n===void 0&&(n=r._canvas);for(var i=n.getContext("2d",ja),o=0,a="",s="",u=Object.create(null),l=e.letterSpacing,f=e.whiteSpace,c=r.collapseSpaces(f),h=r.collapseNewlines(f),d=!c,p=e.wordWrapWidth+l,v=r.tokenize(t),m=0;m<v.length;m++){var y=v[m];if(r.isNewline(y)){if(!h){s+=r.addLine(a),d=!c,a="",o=0;continue}y=" "}if(c){var _=r.isBreakingSpace(y),g=r.isBreakingSpace(a[a.length-1]);if(_&&g)continue}var x=r.getFromCache(y,l,u,i);if(x>p)if(a!==""&&(s+=r.addLine(a),a="",o=0),r.canBreakWords(y,e.breakWords))for(var b=r.wordWrapSplit(y),T=0;T<b.length;T++){for(var S=b[T],O=1;b[T+O];){var w=b[T+O],E=S[S.length-1];if(!r.canBreakChars(E,w,y,T,e.breakWords))S+=w;else break;O++}T+=S.length-1;var P=r.getFromCache(S,l,u,i);P+o>p&&(s+=r.addLine(a),d=!1,a="",o=0),a+=S,o+=P}else{a.length>0&&(s+=r.addLine(a),a="",o=0);var D=m===v.length-1;s+=r.addLine(y,!D),d=!1,a="",o=0}else x+o>p&&(d=!1,s+=r.addLine(a),a="",o=0),(a.length>0||!r.isBreakingSpace(y)||d)&&(a+=y,o+=x)}return s+=r.addLine(a,!1),s},r.addLine=function(t,e){return e===void 0&&(e=!0),t=r.trimRight(t),t=e?t+`
`:t,t},r.getFromCache=function(t,e,n,i){var o=n[t];if(typeof o!="number"){var a=t.length*e;o=i.measureText(t).width+a,n[t]=o}return o},r.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},r.collapseNewlines=function(t){return t==="normal"},r.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var n=t[e];if(!r.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},r.isNewline=function(t){return typeof t!="string"?!1:r._newlines.indexOf(t.charCodeAt(0))>=0},r.isBreakingSpace=function(t,e){return typeof t!="string"?!1:r._breakingSpaces.indexOf(t.charCodeAt(0))>=0},r.tokenize=function(t){var e=[],n="";if(typeof t!="string")return e;for(var i=0;i<t.length;i++){var o=t[i],a=t[i+1];if(r.isBreakingSpace(o,a)||r.isNewline(o)){n!==""&&(e.push(n),n=""),e.push(o);continue}n+=o}return n!==""&&e.push(n),e},r.canBreakWords=function(t,e){return e},r.canBreakChars=function(t,e,n,i,o){return!0},r.wordWrapSplit=function(t){return t.split("")},r.measureFont=function(t){if(r._fonts[t])return r._fonts[t];var e={ascent:0,descent:0,fontSize:0},n=r._canvas,i=r._context;i.font=t;var o=r.METRICS_STRING+r.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(r.BASELINE_SYMBOL).width),u=Math.ceil(r.HEIGHT_MULTIPLIER*s);s=s*r.BASELINE_MULTIPLIER|0,n.width=a,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var l=i.getImageData(0,0,a,u).data,f=l.length,c=a*4,h=0,d=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<c;v+=4)if(l[d+v]!==255){p=!0;break}if(!p)d+=c;else break}for(e.ascent=s-h,d=f-c,p=!1,h=u;h>s;--h){for(var v=0;v<c;v+=4)if(l[d+v]!==255){p=!0;break}if(!p)d-=c;else break}return e.descent=h-s,e.fontSize=e.ascent+e.descent,r._fonts[t]=e,e},r.clearMetrics=function(t){t===void 0&&(t=""),t?delete r._fonts[t]:r._fonts={}},Object.defineProperty(r,"_canvas",{get:function(){if(!r.__canvas){var t=void 0;try{var e=new OffscreenCanvas(0,0),n=e.getContext("2d",ja);if(n&&n.measureText)return r.__canvas=e,e;t=R.ADAPTER.createCanvas()}catch{t=R.ADAPTER.createCanvas()}t.width=t.height=10,r.__canvas=t}return r.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_context",{get:function(){return r.__context||(r.__context=r._canvas.getContext("2d",ja)),r.__context},enumerable:!1,configurable:!0}),r}();ke._fonts={};ke.METRICS_STRING="|ÉqÅ";ke.BASELINE_SYMBOL="M";ke.BASELINE_MULTIPLIER=1.4;ke.HEIGHT_MULTIPLIER=2;ke._newlines=[10,13];ke._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var eF={texture:!0,children:!1,baseTexture:!0},Le=function(r){JM(t,r);function t(e,n,i){var o=this,a=!1;i||(i=R.ADAPTER.createCanvas(),a=!0),i.width=3,i.height=3;var s=G.from(i);return s.orig=new V,s.trim=new V,o=r.call(this,s)||this,o._ownCanvas=a,o.canvas=i,o.context=i.getContext("2d",{willReadFrequently:!0}),o._resolution=R.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=e,o.style=n,o.localStyleID=-1,o}return t.prototype.updateText=function(e){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var i=this.context,o=ke.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,s=o.height,u=o.lines,l=o.lineHeight,f=o.lineWidths,c=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var d,p,v=n.dropShadow?2:1,m=0;m<v;++m){var y=n.dropShadow&&m===0,_=y?Math.ceil(Math.max(1,s)+n.padding*2):0,g=_*this._resolution;if(y){i.fillStyle="black",i.strokeStyle="black";var x=n.dropShadowColor,b=Xt(typeof x=="number"?x:ap(x)),T=n.dropShadowBlur*this._resolution,S=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=T,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*S,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*S+g}else i.fillStyle=this._generateFillStyle(n,u,o),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var O=(l-h.fontSize)/2;(!t.nextLineHeightBehavior||l-h.fontSize<0)&&(O=0);for(var w=0;w<u.length;w++)d=n.strokeThickness/2,p=n.strokeThickness/2+w*l+h.ascent+O,n.align==="right"?d+=c-f[w]:n.align==="center"&&(d+=(c-f[w])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(u[w],d+n.padding,p+n.padding-_,!0),n.fill&&this.drawLetterSpacing(u[w],d+n.padding,p+n.padding-_)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,n,i,o){o===void 0&&(o=!1);var a=this._style,s=a.letterSpacing,u=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||u){u&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),o?this.context.strokeText(e,n,i):this.context.fillText(e,n,i);return}for(var l=n,f=Array.from?Array.from(e):e.split(""),c=this.context.measureText(e).width,h=0,d=0;d<f.length;++d){var p=f[d];o?this.context.strokeText(p,l,i):this.context.fillText(p,l,i);for(var v="",m=d+1;m<f.length;++m)v+=f[m];h=this.context.measureText(v).width,l+=c-h+s,c=h}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var n=Eb(e);n.data&&(e.width=n.width,e.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,o=this._style,a=o.trim?0:o.padding,s=i.baseTexture;i.trim.width=i._frame.width=e.width/this._resolution,i.trim.height=i._frame.height=e.height/this._resolution,i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-a*2,i.orig.height=i._frame.height-a*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),i.updateUvs(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,e)},t.prototype.updateTransform=function(){this.updateText(!0),r.prototype.updateTransform.call(this)},t.prototype.getBounds=function(e,n){return this.updateText(!0),this._textureID===-1&&(e=!1),r.prototype.getBounds.call(this,e,n)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),r.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,n,i){var o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,s=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,l=this.canvas.width/this._resolution-s-u*2,f=this.canvas.height/this._resolution-s-u*2,c=o.slice(),h=e.fillGradientStops.slice();if(!h.length)for(var d=c.length+1,p=1;p<d;++p)h.push(p/d);if(c.unshift(o[0]),h.unshift(0),c.push(o[o.length-1]),h.push(1),e.fillGradientType===_i.LINEAR_VERTICAL){a=this.context.createLinearGradient(l/2,u,l/2,f+u);for(var v=i.fontProperties.fontSize+e.strokeThickness,p=0;p<n.length;p++){var m=i.lineHeight*(p-1)+v,y=i.lineHeight*p,_=y;p>0&&m>y&&(_=(y+m)/2);var g=y+v,x=i.lineHeight*(p+1),b=g;p+1<n.length&&x<g&&(b=(g+x)/2);for(var T=(b-_)/f,S=0;S<c.length;S++){var O=0;typeof h[S]=="number"?O=h[S]:O=S/c.length;var w=Math.min(1,Math.max(0,_/f+O*T));w=Number(w.toFixed(5)),a.addColorStop(w,c[S])}}}else{a=this.context.createLinearGradient(u,f/2,l+u,f/2);for(var E=c.length+1,P=1,p=0;p<c.length;p++){var D=void 0;typeof h[p]=="number"?D=h[p]:D=P/E,a.addColorStop(D,c[p]),P++}}return a},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},eF,e),r.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var n=on(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var n=on(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof Gr?this._style=e:this._style=new Gr(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(Lt);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */R.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lc=function(r,t){return lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},lc(r,t)};function rF(r,t){lc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ux=function(){function r(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},r}();function nF(r,t){var e=!1;if(r&&r._textures&&r._textures.length){for(var n=0;n<r._textures.length;n++)if(r._textures[n]instanceof G){var i=r._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),e=!0)}}return e}function iF(r,t){if(r.baseTexture instanceof K){var e=r.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function oF(r,t){if(r._texture&&r._texture instanceof G){var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function aF(r,t){return t instanceof Le?(t.updateText(!0),!0):!1}function sF(r,t){if(t instanceof Gr){var e=t.toFontString();return ke.measureFont(e),!0}return!1}function uF(r,t){if(r instanceof Le){t.indexOf(r.style)===-1&&t.push(r.style),t.indexOf(r)===-1&&t.push(r);var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function lF(r,t){return r instanceof Gr?(t.indexOf(r)===-1&&t.push(r),!0):!1}var Gx=function(){function r(t){var e=this;this.limiter=new Ux(R.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(uF),this.registerFindHook(lF),this.registerFindHook(nF),this.registerFindHook(iF),this.registerFindHook(oF),this.registerUploadHook(aF),this.registerUploadHook(sF)}return r.prototype.upload=function(t,e){var n=this;return typeof t=="function"&&(e=t,t=null),e&&ee("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){t&&n.add(t);var o=function(){e==null||e(),i()};n.queue.length?(n.completes.push(o),n.ticking||(n.ticking=!0,Bt.system.addOnce(n.tick,n,er.UTILITY))):o()})},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Bt.system.addOnce(this.tick,this,er.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var n=0,i=o.length;n<i;n++)o[n]()}},r.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},r.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},r.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof st)for(var e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},r.prototype.destroy=function(){this.ticking&&Bt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function jx(r,t){return t instanceof K?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function fF(r,t){if(!(t instanceof tr))return!1;var e=t.geometry;t.finishPoly(),e.updateBatches();for(var n=e.batches,i=0;i<n.length;i++){var o=n[i].style.texture;o&&jx(r,o.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function hF(r,t){return r instanceof tr?(t.push(r),!0):!1}var kx=function(r){rF(t,r);function t(e){var n=r.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(hF),n.registerUploadHook(jx),n.registerUploadHook(fF),n}return t.extension={name:"prepare",type:nt.RendererPlugin},t}(Gx),cF=function(){function r(t){this.maxMilliseconds=t,this.frameStart=0}return r.prototype.beginFrame=function(){this.frameStart=Date.now()},r.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},r}();/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $x=function(){function r(t,e,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=t instanceof G?t:null,this.baseTexture=t instanceof K?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r.prototype._updateResolution=function(t){t===void 0&&(t=null);var e=this.data.meta.scale,n=Io(t,null);return n===null&&(n=e!==void 0?parseFloat(e):1),n!==1&&this.baseTexture.setResolution(n),n},r.prototype.parse=function(t){var e=this;return t&&ee("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){e._callback=function(i){t==null||t(i),n(i)},e._batchIndex=0,e._frameKeys.length<=r.BATCH_SIZE?(e._processFrames(0),e._processAnimations(),e._parseComplete()):e._nextBatch()})},r.prototype._processFrames=function(t){for(var e=t,n=r.BATCH_SIZE;e-t<n&&e<this._frameKeys.length;){var i=this._frameKeys[e],o=this._frames[i],a=o.frame;if(a){var s=null,u=null,l=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,f=new V(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o.rotated?s=new V(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):s=new V(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(u=new V(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new G(this.baseTexture,s,f,u,o.rotated?2:0,o.anchor),G.addToCache(this.textures[i],i)}e++}},r.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var i=t[e][n];this.animations[e].push(this.textures[i])}}},r.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},r.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*r.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*r.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},r.prototype.destroy=function(t){var e;t===void 0&&(t=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},r.BATCH_SIZE=1e3,r}(),zx=function(){function r(){}return r.use=function(t,e){var n,i,o=this,a=t.name+"_image";if(!t.data||t.type!==xt.TYPE.JSON||!t.data.frames||o.resources[a]){e();return}var s=(i=(n=t.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(s))for(var u=function(p){if(typeof p!="string")return"continue";var v=p.replace(".json",""),m=nn.resolve(t.url.replace(o.baseUrl,""),p);if(o.resources[v]||Object.values(o.resources).some(function(_){return nn.format(nn.parse(_.url))===m}))return"continue";var y={crossOrigin:t.crossOrigin,loadType:xt.LOAD_TYPE.XHR,xhrType:xt.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};o.add(v,m,y)},l=0,f=s;l<f.length;l++){var c=f[l];u(c)}var h={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=r.getResourcePath(t,o.baseUrl);o.add(a,d,h,function(v){if(v.error){e(v.error);return}var m=new $x(v.texture,t.data,t.url);m.parse().then(function(){t.spritesheet=m,t.textures=m.textures,e()})})},r.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:nn.resolve(t.url.replace(e,""),t.data.meta.image)},r.extension=nt.Loader,r}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fc=function(r,t){return fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},fc(r,t)};function Hx(r,t){fc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Hi=new X,Xx=function(r){Hx(t,r);function t(e,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var o=r.call(this,e)||this;return o.tileTransform=new fp,o._width=n,o._height=i,o.uvMatrix=o.texture.uvMatrix||new Fu(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,i,o)},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new V),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Hi);var n=this._width,i=this._height,o=-n*this.anchor._x;if(Hi.x>=o&&Hi.x<o+n){var a=-i*this.anchor._y;if(Hi.y>=a&&Hi.y<a+i)return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,n){var i=e instanceof G?e:G.from(e,n);return new t(i,n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(Lt),dF=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,oy=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,pF=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,vF=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,mF=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,ka=new Ft,Vx=function(r){Hx(t,r);function t(e){var n=r.call(this,e)||this;return e.runners.contextChange.add(n),n.quad=new xp,n.state=$r.for2d(),n}return t.prototype.contextChange=function(){var e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Qe.from(oy,dF,n),this.shader=e.context.webGLVersion>1?Qe.from(vF,mF,n):Qe.from(oy,pF,n)},t.prototype.render=function(e){var n=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=e._width*-e.anchor.x,o[1]=o[3]=e._height*-e.anchor.y,o[2]=o[4]=e._width*(1-e.anchor.x),o[5]=o[7]=e._height*(1-e.anchor.y);var a=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;o=i.uvs,o[0]=o[6]=-a,o[1]=o[3]=-s,o[2]=o[4]=1-a,o[5]=o[7]=1-s,i.invalidate();var u=e._texture,l=u.baseTexture,f=l.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix,d=l.isPowerOfTwo&&u.frame.width===l.width&&u.frame.height===l.height;d&&(l._glTextures[n.CONTEXT_UID]?d=l.wrapMode!==De.CLAMP:l.wrapMode===De.CLAMP&&(l.wrapMode=De.REPEAT));var p=d?this.simpleShader:this.shader,v=u.width,m=u.height,y=e._width,_=e._height;ka.set(c.a*v/y,c.b*v/_,c.c*m/y,c.d*m/_,c.tx/y,c.ty/_),ka.invert(),d?ka.prepend(h.mapCoord):(p.uniforms.uMapCoord=h.mapCoord.toArray(!0),p.uniforms.uClampFrame=h.uClampFrame,p.uniforms.uClampOffset=h.uClampOffset),p.uniforms.uTransform=ka.toArray(!0),p.uniforms.uColor=lp(e.tint,e.worldAlpha,p.uniforms.uColor,f),p.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),p.uniforms.uSampler=u,n.shader.bind(p),n.geometry.bind(i),this.state.blendMode=up(e.blendMode,f),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t.extension={name:"tilingSprite",type:nt.RendererPlugin},t}(Zo);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hc=function(r,t){return hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},hc(r,t)};function zp(r,t){hc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Wx=function(){function r(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return r.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},r}(),sf=new X,ay=new so,bi=function(r){zp(t,r);function t(e,n,i,o){o===void 0&&(o=Te.TRIANGLES);var a=r.call(this)||this;return a.geometry=e,a.shader=n,a.state=i||$r.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=R.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Te.TRIANGLES&&n.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),e.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(n),e.state.set(this.state),e.geometry.bind(this.geometry,n),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var o=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[o]),e.plugins[o].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,n=e.buffers[0],i=n.data,o=n._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var a=this.transform.worldTransform,s=a.a,u=a.b,l=a.c,f=a.d,c=a.tx,h=a.ty,d=this.vertexData,p=0;p<d.length/2;p++){var v=i[p*2],m=i[p*2+1];d[p*2]=s*v+l*m+c,d[p*2+1]=u*v+f*m+h}if(this._roundPixels)for(var y=R.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*y|0)/y);this.vertexDirty=o}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Wx(e,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,sf);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=ay.points,o=this.geometry.getIndex().data,a=o.length,s=this.drawMode===4?3:1,u=0;u+2<a;u+=s){var l=o[u]*2,f=o[u+1]*2,c=o[u+2]*2;if(i[0]=n[l],i[1]=n[l+1],i[2]=n[f],i[3]=n[f+1],i[4]=n[c],i[5]=n[c+1],ay.contains(sf.x,sf.y))return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(st),yF=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,gF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,xi=function(r){zp(t,r);function t(e,n){var i=this,o={uSampler:e,alpha:1,uTextureMatrix:Ft.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(o,n.uniforms),i=r.call(this,n.program||Mi.from(gF,yF),o)||this,i._colorDirty=!1,i.uvMatrix=new Fu(e),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;lp(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Qe),Jo=function(r){zp(t,r);function t(e,n,i){var o=r.call(this)||this,a=new Mt(e),s=new Mt(n,!0),u=new Mt(i,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,U.FLOAT).addAttribute("aTextureCoord",s,2,!1,U.FLOAT).addIndex(u),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Ii);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cc=function(r,t){return cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},cc(r,t)};function _F(r,t){cc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var No=function(){function r(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return r}(),Yx=function(){function r(){}return r.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},r.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in e){var o=e[i].match(/^[a-z]+/gm)[0],a=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var u in a){var l=a[u].split("="),f=l[0],c=l[1].replace(/"/gm,""),h=parseFloat(c),d=isNaN(h)?c:h;s[f]=d}n[o].push(s)}var p=new No;return n.info.forEach(function(v){return p.info.push({face:v.face,size:parseInt(v.size,10)})}),n.common.forEach(function(v){return p.common.push({lineHeight:parseInt(v.lineHeight,10)})}),n.page.forEach(function(v){return p.page.push({id:parseInt(v.id,10),file:v.file})}),n.char.forEach(function(v){return p.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),n.kerning.forEach(function(v){return p.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),n.distanceField.forEach(function(v){return p.distanceField.push({distanceRange:parseInt(v.distanceRange,10),fieldType:v.fieldType})}),p},r}(),tu=function(){function r(){}return r.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},r.parse=function(t){for(var e=new No,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),u=t.getElementsByTagName("distanceField"),l=0;l<n.length;l++)e.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var l=0;l<i.length;l++)e.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(var l=0;l<o.length;l++)e.page.push({id:parseInt(o[l].getAttribute("id"),10)||0,file:o[l].getAttribute("file")});for(var l=0;l<a.length;l++){var f=a[l];e.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(var l=0;l<s.length;l++)e.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(var l=0;l<u.length;l++)e.distanceField.push({fieldType:u[l].getAttribute("fieldType"),distanceRange:parseInt(u[l].getAttribute("distanceRange"),10)});return e},r}(),qx=function(){function r(){}return r.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var e=new globalThis.DOMParser().parseFromString(t,"text/xml");return tu.test(e)}return!1},r.parse=function(t){var e=new globalThis.DOMParser().parseFromString(t,"text/xml");return tu.parse(e)},r}(),uf=[Yx,tu,qx];function Hp(r){for(var t=0;t<uf.length;t++)if(uf[t].test(r))return uf[t];return null}function bF(r,t,e,n,i,o){var a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var s,u=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,f=r.width/n-u-l*2,c=r.height/n-u-l*2,h=a.slice(),d=e.fillGradientStops.slice();if(!d.length)for(var p=h.length+1,v=1;v<p;++v)d.push(v/p);if(h.unshift(a[0]),d.unshift(0),h.push(a[a.length-1]),d.push(1),e.fillGradientType===_i.LINEAR_VERTICAL){s=t.createLinearGradient(f/2,l,f/2,c+l);for(var m=0,y=o.fontProperties.fontSize+e.strokeThickness,_=y/c,v=0;v<i.length;v++)for(var g=o.lineHeight*v,x=0;x<h.length;x++){var b=0;typeof d[x]=="number"?b=d[x]:b=x/h.length;var T=g/c+b*_,S=Math.max(m,T);S=Math.min(S,1),s.addColorStop(S,h[x]),m=S}}else{s=t.createLinearGradient(l,c/2,f+l,c/2);for(var O=h.length+1,w=1,v=0;v<h.length;v++){var E=void 0;typeof d[v]=="number"?E=d[v]:E=w/O,s.addColorStop(E,h[v]),w++}}return s}function xF(r,t,e,n,i,o,a){var s=e.text,u=e.fontProperties;t.translate(n,i),t.scale(o,o);var l=a.strokeThickness/2,f=-(a.strokeThickness/2);if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=bF(r,t,a,o,[s],e),t.strokeStyle=a.stroke,a.dropShadow){var c=a.dropShadowColor,h=Xt(typeof c=="number"?c:ap(c)),d=a.dropShadowBlur*o,p=a.dropShadowDistance*o;t.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+a.dropShadowAlpha+")",t.shadowBlur=d,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,l,f+e.lineHeight-u.descent),a.fill&&t.fillText(s,l,f+e.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Kx(r){return Array.from?Array.from(r):r.split("")}function TF(r){typeof r=="string"&&(r=[r]);for(var t=[],e=0,n=r.length;e<n;e++){var i=r[e];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,u=a;s<=u;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,Kx(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function ws(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}var hr=function(){function r(t,e,n){var i,o,a=t.info[0],s=t.common[0],u=t.page[0],l=t.distanceField[0],f=Io(u.file),c={};this._ownsTextures=n,this.font=a.face,this.size=a.size,this.lineHeight=s.lineHeight/f,this.chars={},this.pageTextures=c;for(var h=0;h<t.page.length;h++){var d=t.page[h],p=d.id,v=d.file;c[p]=e instanceof Array?e[h]:e[v],l!=null&&l.fieldType&&l.fieldType!=="none"&&(c[p].baseTexture.alphaMode=we.NO_PREMULTIPLIED_ALPHA,c[p].baseTexture.mipmap=le.OFF)}for(var h=0;h<t.char.length;h++){var m=t.char[h],p=m.id,y=m.page,_=t.char[h],g=_.x,x=_.y,b=_.width,T=_.height,S=_.xoffset,O=_.yoffset,w=_.xadvance;g/=f,x/=f,b/=f,T/=f,S/=f,O/=f,w/=f;var E=new V(g+c[y].frame.x/f,x+c[y].frame.y/f,b,T);this.chars[p]={xOffset:S,yOffset:O,xAdvance:w,kerning:{},texture:new G(c[y].baseTexture,E),page:y}}for(var h=0;h<t.kerning.length;h++){var P=t.kerning[h],D=P.first,N=P.second,H=P.amount;D/=f,N/=f,H/=f,this.chars[N]&&(this.chars[N].kerning[D]=H)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(o=(i=l==null?void 0:l.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&o!==void 0?o:"none"}return r.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},r.install=function(t,e,n){var i;if(t instanceof No)i=t;else{var o=Hp(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}e instanceof G&&(e=[e]);var a=new r(i,e,n);return r.available[a.font]=a,a},r.uninstall=function(t){var e=r.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete r.available[t]},r.from=function(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},r.defaultOptions,n),o=i.chars,a=i.padding,s=i.resolution,u=i.textureWidth,l=i.textureHeight,f=TF(o),c=e instanceof Gr?e:new Gr(e),h=u,d=new No;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};for(var p=0,v=0,m,y,_,g=0,x=[],b=0;b<f.length;b++){m||(m=R.ADAPTER.createCanvas(),m.width=u,m.height=l,y=m.getContext("2d"),_=new K(m,{resolution:s}),x.push(new G(_)),d.page.push({id:x.length-1,file:""}));var T=f[b],S=ke.measureText(T,c,!1,m),O=S.width,w=Math.ceil(S.height),E=Math.ceil((c.fontStyle==="italic"?2:1)*O);if(v>=l-w*s){if(v===0)throw new Error("[BitmapFont] textureHeight "+l+"px is too small "+("(fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+T+"')"));--b,m=null,y=null,_=null,v=0,p=0,g=0;continue}if(g=Math.max(w+S.fontProperties.descent,g),E*s+p>=h){if(p===0)throw new Error("[BitmapFont] textureWidth "+u+"px is too small "+("(fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+T+"')"));--b,v+=g*s,v=Math.ceil(v),p=0,g=0;continue}xF(m,y,S,p,v,s,c);var P=ws(S.text);d.char.push({id:P,page:x.length-1,x:p/s,y:v/s,width:E,height:w,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),p+=(E+2*a)*s,p=Math.ceil(p)}if(!(n!=null&&n.skipKerning))for(var b=0,D=f.length;b<D;b++)for(var N=f[b],H=0;H<D;H++){var M=f[H],F=y.measureText(N).width,$=y.measureText(M).width,It=y.measureText(N+M).width,q=It-(F+$);q&&d.kerning.push({first:ws(N),second:ws(M),amount:q})}var I=new r(d,x,!0);return r.available[t]!==void 0&&r.uninstall(t),r.available[t]=I,I},r.ALPHA=[["a","z"],["A","Z"]," "],r.NUMERIC=[["0","9"]],r.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],r.ASCII=[[" ","~"]],r.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:r.ALPHANUMERIC},r.available={},r}(),SF=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,wF=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,sy=[],uy=[],ly=[],EF=function(r){_F(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this)||this;i._tint=16777215;var o=Object.assign({},t.styleDefaults,n),a=o.align,s=o.tint,u=o.maxWidth,l=o.letterSpacing,f=o.fontName,c=o.fontSize;if(!hr.available[f])throw new Error('Missing BitmapFont "'+f+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._font=void 0,i._fontName=f,i._fontSize=c,i.text=e,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new Rr(function(){i.dirty=!0},i,0,0),i._roundPixels=R.ROUND_PIXELS,i.dirty=!0,i._resolution=R.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var e,n=hr.available[this._fontName],i=this.fontSize,o=i/n.size,a=new X,s=[],u=[],l=[],f=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=Kx(f),h=this._maxWidth*n.size/i,d=n.distanceFieldType==="none"?sy:uy,p=null,v=0,m=0,y=0,_=-1,g=0,x=0,b=0,T=0,S=0;S<c.length;S++){var O=c[S],w=ws(O);if(/(?:\s)/.test(O)&&(_=S,g=v,T++),O==="\r"||O===`
`){u.push(v),l.push(-1),m=Math.max(m,v),++y,++x,a.x=0,a.y+=n.lineHeight,p=null,T=0;continue}var E=n.chars[w];if(E){p&&E.kerning[p]&&(a.x+=E.kerning[p]);var P=ly.pop()||{texture:G.EMPTY,line:0,charCode:0,prevSpaces:0,position:new X};P.texture=E.texture,P.line=y,P.charCode=w,P.position.x=a.x+E.xOffset+this._letterSpacing/2,P.position.y=a.y+E.yOffset,P.prevSpaces=T,s.push(P),v=P.position.x+Math.max(E.xAdvance-E.xOffset,E.texture.orig.width),a.x+=E.xAdvance+this._letterSpacing,b=Math.max(b,E.yOffset+E.texture.height),p=w,_!==-1&&h>0&&a.x>h&&(++x,fn(s,1+_-x,1+S-_),S=_,_=-1,u.push(g),l.push(s.length>0?s[s.length-1].prevSpaces:0),m=Math.max(m,g),y++,a.x=0,a.y+=n.lineHeight,p=null,T=0)}}var D=c[c.length-1];D!=="\r"&&D!==`
`&&(/(?:\s)/.test(D)&&(v=g),u.push(v),m=Math.max(m,v),l.push(-1));for(var N=[],S=0;S<=y;S++){var H=0;this._align==="right"?H=m-u[S]:this._align==="center"?H=(m-u[S])/2:this._align==="justify"&&(H=l[S]<0?0:(m-u[S])/l[S]),N.push(H)}var M=s.length,F={},$=[],It=this._activePagesMeshData;d.push.apply(d,It);for(var S=0;S<M;S++){var q=s[S].texture,I=q.baseTexture.uid;if(!F[I]){var C=d.pop();if(!C){var W=new Jo,Q=void 0,rt=void 0;n.distanceFieldType==="none"?(Q=new xi(G.EMPTY),rt=L.NORMAL):(Q=new xi(G.EMPTY,{program:Mi.from(wF,SF),uniforms:{uFWidth:0}}),rt=L.NORMAL_NPM);var Ot=new bi(W,Q);Ot.blendMode=rt,C={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ot,vertices:null,uvs:null,indices:null}}C.index=0,C.indexCount=0,C.vertexCount=0,C.uvsCount=0,C.total=0;var dt=this._textureCache;dt[I]=dt[I]||new G(q.baseTexture),C.mesh.texture=dt[I],C.mesh.tint=this._tint,$.push(C),F[I]=C}F[I].total++}for(var S=0;S<It.length;S++)$.indexOf(It[S])===-1&&this.removeChild(It[S].mesh);for(var S=0;S<$.length;S++)$[S].mesh.parent!==this&&this.addChild($[S].mesh);this._activePagesMeshData=$;for(var S in F){var C=F[S],pt=C.total;if(!(((e=C.indices)===null||e===void 0?void 0:e.length)>6*pt)||C.vertices.length<bi.BATCHABLE_SIZE*2)C.vertices=new Float32Array(4*2*pt),C.uvs=new Float32Array(4*2*pt),C.indices=new Uint16Array(6*pt);else for(var jt=C.total,Wt=C.vertices,Pt=jt*4*2;Pt<Wt.length;Pt++)Wt[Pt]=0;C.mesh.size=6*pt}for(var S=0;S<M;S++){var O=s[S],at=O.position.x+N[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(at=Math.round(at));var ht=at*o,vt=O.position.y*o,q=O.texture,J=F[q.baseTexture.uid],Jt=q.frame,ne=q._uvs,it=J.index++;J.indices[it*6+0]=0+it*4,J.indices[it*6+1]=1+it*4,J.indices[it*6+2]=2+it*4,J.indices[it*6+3]=0+it*4,J.indices[it*6+4]=2+it*4,J.indices[it*6+5]=3+it*4,J.vertices[it*8+0]=ht,J.vertices[it*8+1]=vt,J.vertices[it*8+2]=ht+Jt.width*o,J.vertices[it*8+3]=vt,J.vertices[it*8+4]=ht+Jt.width*o,J.vertices[it*8+5]=vt+Jt.height*o,J.vertices[it*8+6]=ht,J.vertices[it*8+7]=vt+Jt.height*o,J.uvs[it*8+0]=ne.x0,J.uvs[it*8+1]=ne.y0,J.uvs[it*8+2]=ne.x1,J.uvs[it*8+3]=ne.y1,J.uvs[it*8+4]=ne.x2,J.uvs[it*8+5]=ne.y2,J.uvs[it*8+6]=ne.x3,J.uvs[it*8+7]=ne.y3}this._textWidth=m*o,this._textHeight=(a.y+n.lineHeight)*o;for(var S in F){var C=F[S];if(this.anchor.x!==0||this.anchor.y!==0)for(var $e=0,Dn=this._textWidth*this.anchor.x,da=this._textHeight*this.anchor.y,_v=0;_v<C.total;_v++)C.vertices[$e++]-=Dn,C.vertices[$e++]-=da,C.vertices[$e++]-=Dn,C.vertices[$e++]-=da,C.vertices[$e++]-=Dn,C.vertices[$e++]-=da,C.vertices[$e++]-=Dn,C.vertices[$e++]-=da;this._maxLineHeight=b*o;var bv=C.mesh.geometry.getBuffer("aVertexPosition"),xv=C.mesh.geometry.getBuffer("aTextureCoord"),Tv=C.mesh.geometry.getIndex();bv.data=C.vertices,xv.data=C.uvs,Tv.data=C.indices,bv.update(),xv.update(),Tv.update()}for(var S=0;S<s.length;S++)ly.push(s[S]);this._font=n,this.dirty=!1},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var n=hr.available[this._fontName],i=n.distanceFieldRange,o=n.distanceFieldType,a=n.size;if(o!=="none")for(var s=this.worldTransform,u=s.a,l=s.b,f=s.c,c=s.d,h=Math.sqrt(u*u+l*l),d=Math.sqrt(f*f+c*c),p=(Math.abs(h)+Math.abs(d))/2,v=this.fontSize/a,m=0,y=this._activePagesMeshData;m<y.length;m++){var _=y[m];_.mesh.shader.uniforms.uFWidth=p*i*v*this._resolution}r.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){var e=hr.available[this._fontName];if(!e)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!hr.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){var e;return(e=this._fontSize)!==null&&e!==void 0?e:hr.available[this._fontName].size},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e){var n=this._textureCache,i=hr.available[this._fontName],o=i.distanceFieldType==="none"?sy:uy;o.push.apply(o,this._activePagesMeshData);for(var a=0,s=this._activePagesMeshData;a<s.length;a++){var u=s[a];this.removeChild(u.mesh)}this._activePagesMeshData=[],o.filter(function(c){return n[c.mesh.texture.baseTexture.uid]}).forEach(function(c){c.mesh.texture=G.EMPTY});for(var l in n){var f=n[l];f.destroy(),delete n[l]}this._font=null,this._textureCache=null,r.prototype.destroy.call(this,e)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(st),Zx=function(){function r(){}return r.add=function(){xt.setExtensionXhrType("fnt",xt.XHR_RESPONSE_TYPE.TEXT)},r.use=function(t,e){var n=Hp(t.data);if(!n){e();return}for(var i=r.getBaseUrl(this,t),o=n.parse(t.data),a={},s=function(v){a[v.metadata.pageFile]=v.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=hr.install(o,a,!0),e())},u=0;u<o.page.length;++u){var l=o.page[u].file,f=i+l,c=!1;for(var h in this.resources){var d=this.resources[h];if(d.url===f){d.metadata.pageFile=l,d.texture?s(d):d.onAfterMiddleware.add(s),c=!0;break}}if(!c){var p={crossOrigin:t.crossOrigin,loadType:xt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(f,p,s)}}},r.getBaseUrl=function(t,e){var n=e.isDataUrl?"":r.dirname(e.url);return e.isDataUrl&&(n==="."&&(n=""),t.baseUrl&&n&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(t.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},r.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":e===""?"/":e},r.extension=nt.Loader,r}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dc=function(r,t){return dc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},dc(r,t)};function OF(r,t){dc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var PF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,Jx=function(r){OF(t,r);function t(e){e===void 0&&(e=1);var n=r.call(this,nx,PF,{uAlpha:1})||this;return n.alpha=e,n}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pc=function(r,t){return pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},pc(r,t)};function Qx(r,t){pc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var CF=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function AF(r,t){var e=Math.ceil(r/2),n=CF,i="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<r;a++){var s=o.replace("%index%",a.toString());s=s.replace("%sampleIndex%",a-(e-1)+".0"),i+=s,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var RF={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},IF=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function MF(r){for(var t=RF[r],e=t.length,n=IF,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,s=0;s<r;s++){var u=o.replace("%index%",s.toString());a=s,s>=e&&(a=r-s-1),u=u.replace("%value%",t[a].toString()),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var Lo=function(r){Qx(t,r);function t(e,n,i,o,a){n===void 0&&(n=8),i===void 0&&(i=4),o===void 0&&(o=R.FILTER_RESOLUTION),a===void 0&&(a=5);var s=this,u=AF(a,e),l=MF(a);return s=r.call(this,u,l)||this,s.horizontal=e,s.resolution=o,s._quality=0,s.quality=i,s.blur=n,s}return t.prototype.apply=function(e,n,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,i,o);else{var a=e.getFilterTexture(),s=e.renderer,u=n,l=a;this.state.blend=!1,e.applyFilter(this,u,l,ye.CLEAR);for(var f=1;f<this.passes-1;f++){e.bindAndClear(u,ye.BLIT),this.uniforms.uSampler=l;var c=l;l=u,u=c,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,o),e.returnFilterTexture(a)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(k),FF=function(r){Qx(t,r);function t(e,n,i,o){e===void 0&&(e=8),n===void 0&&(n=4),i===void 0&&(i=R.FILTER_RESOLUTION),o===void 0&&(o=5);var a=r.call(this)||this;return a.blurXFilter=new Lo(!0,e,n,i,o),a.blurYFilter=new Lo(!1,e,n,i,o),a.resolution=i,a.quality=n,a.blur=e,a.repeatEdgePixels=!1,a}return t.prototype.apply=function(e,n,i,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var u=e.getFilterTexture();this.blurXFilter.apply(e,n,u,ye.CLEAR),this.blurYFilter.apply(e,u,i,o),e.returnFilterTexture(u)}else s?this.blurYFilter.apply(e,n,i,o):this.blurXFilter.apply(e,n,i,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vc=function(r,t){return vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},vc(r,t)};function DF(r,t){vc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var BF=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,mc=function(r){DF(t,r);function t(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=r.call(this,Np,BF,n)||this,e.alpha=1,e}return t.prototype._loadMatrix=function(e,n){n===void 0&&(n=!1);var i=e;n&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(e,n,i){return e[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],e[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],e[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],e[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],e[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],e[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],e[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],e[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],e[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],e[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],e[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],e[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],e[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],e[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],e[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],e[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],e[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],e[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],e[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],e[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],e},t.prototype._colorMatrix=function(e){var n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},t.prototype.brightness=function(e,n){var i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.tint=function(e,n){var i=e>>16&255,o=e>>8&255,a=e&255,s=[i/255,0,0,0,0,0,o/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.greyscale=function(e,n){var i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.blackAndWhite=function(e){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.hue=function(e,n){e=(e||0)/180*Math.PI;var i=Math.cos(e),o=Math.sin(e),a=Math.sqrt,s=1/3,u=a(s),l=i+(1-i)*s,f=s*(1-i)-u*o,c=s*(1-i)+u*o,h=s*(1-i)+u*o,d=i+s*(1-i),p=s*(1-i)-u*o,v=s*(1-i)-u*o,m=s*(1-i)+u*o,y=i+s*(1-i),_=[l,f,c,0,0,h,d,p,0,0,v,m,y,0,0,0,0,0,1,0];this._loadMatrix(_,n)},t.prototype.contrast=function(e,n){var i=(e||0)+1,o=-.5*(i-1),a=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(a,n)},t.prototype.saturate=function(e,n){e===void 0&&(e=0);var i=e*2/3+1,o=(i-1)*-.5,a=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(a,n)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.sepia=function(e){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.technicolor=function(e){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.polaroid=function(e){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.toBGR=function(e){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.kodachrome=function(e){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.browni=function(e){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.vintage=function(e){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.colorTone=function(e,n,i,o,a){e=e||.2,n=n||.15,i=i||16770432,o=o||3375104;var s=(i>>16&255)/255,u=(i>>8&255)/255,l=(i&255)/255,f=(o>>16&255)/255,c=(o>>8&255)/255,h=(o&255)/255,d=[.3,.59,.11,0,0,s,u,l,e,0,f,c,h,n,0,s-f,u-c,l-h,0,0];this._loadMatrix(d,a)},t.prototype.night=function(e,n){e=e||.1;var i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.predator=function(e,n){var i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.lsd=function(e){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(k);mc.prototype.grayscale=mc.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yc=function(r,t){return yc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},yc(r,t)};function NF(r,t){yc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var LF=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,UF=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,GF=function(r){NF(t,r);function t(e,n){var i=this,o=new Ft;return e.renderable=!1,i=r.call(this,UF,LF,{mapSampler:e._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=e,i.maskMatrix=o,n==null&&(n=20),i.scale=new X(n,n),i}return t.prototype.apply=function(e,n,i,o){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),u=Math.sqrt(a.c*a.c+a.d*a.d);s!==0&&u!==0&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/u,this.uniforms.rotation[3]=a.d/u),e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gc=function(r,t){return gc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},gc(r,t)};function jF(r,t){gc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var kF=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,$F=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,zF=function(r){jF(t,r);function t(){return r.call(this,kF,$F)||this}return t}(k);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _c=function(r,t){return _c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},_c(r,t)};function HF(r,t){_c(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var XF=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,VF=function(r){HF(t,r);function t(e,n){e===void 0&&(e=.5),n===void 0&&(n=Math.random());var i=r.call(this,Np,XF,{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=n,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var t1=new Ft;St.prototype._cacheAsBitmap=!1;St.prototype._cacheData=null;St.prototype._cacheAsBitmapResolution=null;St.prototype._cacheAsBitmapMultisample=ct.NONE;var WF=function(){function r(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return r}();Object.defineProperties(St.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var t;r?(this._cacheData||(this._cacheData=new WF),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});St.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};St.prototype._initCachedDisplayObject=function(t){var e;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;i.pad(o)}i.ceil(R.RESOLUTION);var a=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),u=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,f=Ur.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:t.multisample}),c="cacheAsBitmap_"+Nr();this._cacheData.textureCacheId=c,K.addToCache(f.baseTexture,c),G.addToCache(f,c);var h=this.transform.localTransform.copyTo(t1).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:f,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(a,s,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new Lt(f);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(i.x/i.width),d.anchor.y=-(i.y/i.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};St.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};St.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,o=t._projTransform;e.ceil(R.RESOLUTION);var a=Ur.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+Nr();this._cacheData.textureCacheId=s,K.addToCache(a.baseTexture,s),G.addToCache(a,s);var u=t1;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:a,clear:!0,transform:u,skipUpdateTransform:!1}),t.context=i,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new Lt(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(e.x/e.width),l.anchor.y=-(e.y/e.height),l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};St.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};St.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};St.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,K.removeFromCache(this._cacheData.textureCacheId),G.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};St.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */St.prototype.name=null;st.prototype.getChildByName=function(t,e){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(e)for(var n=0,i=this.children.length;n<i;n++){var o=this.children[n];if(o.getChildByName){var a=o.getChildByName(t,!0);if(a)return a}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */St.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new X),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var e1=function(){function r(){}return r.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){e.cancelResize();var n,i;if(e._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var o=e._resizeTo,a=o.clientWidth,s=o.clientHeight;n=a,i=s}e.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},r.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},r.extension=nt.Application,r}(),r1=function(){function r(t){var e=this;this.stage=new st,t=Object.assign({forceCanvas:!1},t),this.renderer=rx(t),r._plugins.forEach(function(n){n.init.call(e,t)})}return r.registerPlugin=function(t){ee("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),ue.add({type:nt.Application,ref:t})},r.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(r.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t,e){var n=this,i=r._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(n)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},r._plugins=[],r}();ue.handleByList(nt.Application,r1._plugins);ue.add(e1);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bc=function(r,t){return bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},bc(r,t)};function Fi(r,t){bc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var n1=function(r){Fi(t,r);function t(e,n,i,o){e===void 0&&(e=100),n===void 0&&(n=100),i===void 0&&(i=10),o===void 0&&(o=10);var a=r.call(this)||this;return a.segWidth=i,a.segHeight=o,a.width=e,a.height=n,a.build(),a}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,n=[],i=[],o=[],a=this.segWidth-1,s=this.segHeight-1,u=this.width/a,l=this.height/s,f=0;f<e;f++){var c=f%this.segWidth,h=f/this.segWidth|0;n.push(c*u,h*l),i.push(c/a,h/s)}for(var d=a*s,f=0;f<d;f++){var p=f%a,v=f/a|0,m=v*this.segWidth+p,y=v*this.segWidth+p+1,_=(v+1)*this.segWidth+p,g=(v+1)*this.segWidth+p+1;o.push(m,y,_,y,g,_)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(Jo),i1=function(r){Fi(t,r);function t(e,n,i){e===void 0&&(e=200),i===void 0&&(i=0);var o=r.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return o.points=n,o._width=e,o.textureScale=i,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(e.length<1)){n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),o.data=new Uint16Array((e.length-1)*6));var a=i.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var u=0,l=e[0],f=this._width*this.textureScale,c=e.length,h=0;h<c;h++){var d=h*4;if(this.textureScale>0){var p=l.x-e[h].x,v=l.y-e[h].y,m=Math.sqrt(p*p+v*v);l=e[h],u+=m/f}else u=h/(c-1);a[d]=u,a[d+1]=0,a[d+2]=u,a[d+3]=1}for(var y=0,h=0;h<c-1;h++){var d=h*2;s[y++]=d,s[y++]=d+1,s[y++]=d+2,s[y++]=d+2,s[y++]=d+1,s[y++]=d+3}i.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var n=e[0],i,o=0,a=0,s=this.buffers[0].data,u=e.length,l=0;l<u;l++){var f=e[l],c=l*4;l<e.length-1?i=e[l+1]:i=f,a=-(i.x-n.x),o=i.y-n.y;var h=Math.sqrt(o*o+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=h,a/=h,o*=d,a*=d,s[c]=f.x+o,s[c+1]=f.y+a,s[c+2]=f.x-o,s[c+3]=f.y-a,n=f}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(Jo),YF=function(r){Fi(t,r);function t(e,n,i){i===void 0&&(i=0);var o=this,a=new i1(e.height,n,i),s=new xi(e);return i>0&&(e.baseTexture.wrapMode=De.REPEAT),o=r.call(this,a,s)||this,o.autoUpdate=!0,o}return t.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),r.prototype._render.call(this,e)},t}(bi),o1=function(r){Fi(t,r);function t(e,n,i){var o=this,a=new n1(e.width,e.height,n,i),s=new xi(G.WHITE);return o=r.call(this,a,s)||this,o.texture=e,o.autoResize=!0,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,n=this.shader.texture,i=n.width,o=n.height;this.autoResize&&(e.width!==i||e.height!==o)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,e)},t.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),r.prototype.destroy.call(this,e)},t}(bi),qF=function(r){Fi(t,r);function t(e,n,i,o,a){e===void 0&&(e=G.EMPTY);var s=this,u=new Jo(n,i,o);u.getBuffer("aVertexPosition").static=!1;var l=new xi(e);return s=r.call(this,u,l,null,a)||this,s.autoUpdate=!0,s}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,e)},t}(bi),$a=10,KF=function(r){Fi(t,r);function t(e,n,i,o,a){n===void 0&&(n=$a),i===void 0&&(i=$a),o===void 0&&(o=$a),a===void 0&&(a=$a);var s=r.call(this,G.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=o,s._topHeight=i,s._bottomHeight=a,s.texture=e,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i,a=Math.min(n,o);return a},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var i=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(o1);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xc=function(r,t){return xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},xc(r,t)};function ZF(r,t){xc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var JF=function(r){ZF(t,r);function t(e,n){n===void 0&&(n=!0);var i=r.call(this,e[0]instanceof G?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Bt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Bt.shared.add(this.update,this,er.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var n=this.animationSpeed*e,i=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=n/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(e){this.stop(),r.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var n=[],i=0;i<e.length;++i)n.push(G.from(e[i]));return new t(n)},t.fromImages=function(e){for(var n=[],i=0;i<e.length;++i)n.push(G.from(e[i]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof G)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Bt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Bt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(Lt);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ue.add(fx,px,dx,Rx,kx,Up,Vx,Zx,bx,Px,Cx,zx,Fb,mx);var a1={AlphaFilter:Jx,BlurFilter:FF,BlurFilterPass:Lo,ColorMatrixFilter:mc,DisplacementFilter:GF,FXAAFilter:zF,NoiseFilter:VF};const QF=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return we},AbstractBatchRenderer:ix,AbstractMultiResource:Iu,AbstractRenderer:ex,AccessibilityManager:fx,AnimatedSprite:JF,AppLoaderPlugin:mx,Application:r1,ArrayResource:dp,Attribute:Yh,get BLEND_MODES(){return L},get BUFFER_BITS(){return So},get BUFFER_TYPE(){return Be},BaseImageResource:rr,BasePrepare:Gx,BaseRenderTexture:_p,BaseTexture:K,BatchDrawCall:Ks,BatchGeometry:Lp,BatchPluginFactory:ax,BatchRenderer:Up,BatchShaderGenerator:ox,BatchSystem:Sp,BatchTextureArray:Zs,BitmapFont:hr,BitmapFontData:No,BitmapFontLoader:Zx,BitmapText:EF,BlobResource:_x,Bounds:Mo,BrowserAdapter:X0,Buffer:Mt,BufferResource:En,get CLEAR_MODES(){return ye},get COLOR_MASK_BITS(){return Eh},CanvasResource:pp,Circle:Ab,CompressedTextureLoader:bx,CompressedTextureResource:Qs,Container:st,ContextSystem:wp,CountLimiter:Ux,CubeResource:vp,DDSLoader:Px,DEG_TO_RAD:Lr,get DRAW_MODES(){return Te},DisplayObject:St,get ENV(){return Ge},Ellipse:Rb,get ExtensionType(){return nt},Extract:px,get FORMATS(){return A},FORMATS_TO_COMPONENTS:Sx,FillStyle:jp,Filter:k,FilterState:Lb,FilterSystem:Tp,Framebuffer:qs,FramebufferSystem:Ep,get GC_MODES(){return Eo},GLFramebuffer:Ub,GLProgram:Jb,GLTexture:xs,GRAPHICS_CURVES:gi,Geometry:Ii,GeometrySystem:Op,Graphics:tr,GraphicsData:ac,GraphicsGeometry:Nx,IGLUniformData:DI,INSTALLED:Fo,get INTERNAL_FORMATS(){return z},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Do,ImageBitmapResource:gp,ImageResource:Mu,InteractionData:qh,InteractionEvent:hx,InteractionManager:dx,InteractionTrackingData:Ts,KTXLoader:Cx,get LINE_CAP(){return vr},get LINE_JOIN(){return Ye},LineStyle:Lx,Loader:yi,get LoaderResource(){return xt},get MASK_TYPES(){return At},get MIPMAP_MODES(){return le},get MSAA_QUALITY(){return ct},MaskData:Gb,MaskSystem:Pp,Matrix:Ft,Mesh:bi,MeshBatchUvs:Wx,MeshGeometry:Jo,MeshMaterial:xi,NineSlicePlane:KF,ObjectRenderer:Zo,ObservablePoint:Rr,PI_2:oe,get PRECISION(){return te},ParticleContainer:zM,ParticleRenderer:Rx,PlaneGeometry:n1,Point:X,Polygon:so,Prepare:kx,Program:Mi,ProjectionSystem:Rp,Quad:Nb,QuadUv:xp,RAD_TO_DEG:Cb,get RENDERER_TYPE(){return di},Rectangle:V,RenderTexture:Ur,RenderTexturePool:Bb,RenderTextureSystem:Ip,Renderer:Du,ResizePlugin:e1,Resource:gn,RopeGeometry:i1,RoundedRectangle:Ib,Runner:zt,get SAMPLER_TYPES(){return wo},get SCALE_MODES(){return Qt},get SHAPES(){return Nt},SVGResource:mp,ScissorSystem:Cp,Shader:Qe,ShaderSystem:Mp,SimpleMesh:qF,SimplePlane:o1,SimpleRope:YF,Sprite:Lt,SpriteMaskFilter:Vb,Spritesheet:$x,SpritesheetLoader:zx,State:$r,StateSystem:Fp,StencilSystem:Ap,System:KI,get TARGETS(){return Fr},get TEXT_GRADIENT(){return _i},get TYPES(){return U},TYPES_TO_BYTES_PER_COMPONENT:tc,TYPES_TO_BYTES_PER_PIXEL:Ex,TemporaryDisplayObject:cp,Text:Le,TextFormat:Yx,TextMetrics:ke,TextStyle:Gr,Texture:G,TextureGCSystem:Dp,TextureLoader:yx,TextureMatrix:Fu,TextureSystem:Bp,TextureUvs:bp,Ticker:Bt,TickerPlugin:Fb,TilingSprite:Xx,TilingSpriteRenderer:Vx,TimeLimiter:cF,Transform:fp,get UPDATE_PRIORITY(){return er},UniformGroup:Dr,VERSION:QI,VideoResource:yp,ViewableBuffer:Js,get WRAP_MODES(){return De},XMLFormat:tu,XMLStringFormat:qx,accessibleTarget:lx,autoDetectFormat:Hp,autoDetectRenderer:rx,autoDetectResource:Ru,checkMaxIfStatementsInShader:Xb,createUBOElements:qb,defaultFilterVertex:Np,defaultVertex:nx,extensions:ue,filters:a1,generateProgram:Qb,generateUniformBufferSync:Zb,getTestContext:$b,getUBOData:Kb,graphicsUtils:qM,groupD8:mt,interactiveTarget:cx,isMobile:Se,parseDDS:Tx,parseKTX:Ox,resources:sx,settings:R,systems:ux,uniformParsers:hn,utils:nI},Symbol.toStringTag,{value:"Module"}));function s1(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}var fy=function(){};const Tc=(r,t,e)=>Math.min(Math.max(e,r),t),hy=.001,tD=.01,eD=10,rD=.05,nD=1;function iD({duration:r=800,bounce:t=.25,velocity:e=0,mass:n=1}){let i,o,a=1-t;a=Tc(rD,nD,a),r=Tc(tD,eD,r/1e3),a<1?(i=l=>{const f=l*a,c=f*r,h=f-e,d=Sc(l,a),p=Math.exp(-c);return hy-h/d*p},o=l=>{const c=l*a*r,h=c*e+e,d=Math.pow(a,2)*Math.pow(l,2)*r,p=Math.exp(-c),v=Sc(Math.pow(l,2),a);return(-i(l)+hy>0?-1:1)*((h-d)*p)/v}):(i=l=>{const f=Math.exp(-l*r),c=(l-e)*r+1;return-.001+f*c},o=l=>{const f=Math.exp(-l*r),c=(e-l)*(r*r);return f*c});const s=5/r,u=aD(i,o,s);if(r=r*1e3,isNaN(u))return{stiffness:100,damping:10,duration:r};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:a*2*Math.sqrt(n*l),duration:r}}}const oD=12;function aD(r,t,e){let n=e;for(let i=1;i<oD;i++)n=n-r(n)/t(n);return n}function Sc(r,t){return r*Math.sqrt(1-t*t)}const sD=["duration","bounce"],uD=["stiffness","damping","mass"];function cy(r,t){return t.some(e=>r[e]!==void 0)}function lD(r){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},r);if(!cy(r,uD)&&cy(r,sD)){const e=iD(r);t=Object.assign(Object.assign(Object.assign({},t),e),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}function Xp(r){var{from:t=0,to:e=1,restSpeed:n=2,restDelta:i}=r,o=s1(r,["from","to","restSpeed","restDelta"]);const a={done:!1,value:t};let{stiffness:s,damping:u,mass:l,velocity:f,duration:c,isResolvedFromDuration:h}=lD(o),d=dy,p=dy;function v(){const m=f?-(f/1e3):0,y=e-t,_=u/(2*Math.sqrt(s*l)),g=Math.sqrt(s/l)/1e3;if(i===void 0&&(i=Math.min(Math.abs(e-t)/100,.4)),_<1){const x=Sc(g,_);d=b=>{const T=Math.exp(-_*g*b);return e-T*((m+_*g*y)/x*Math.sin(x*b)+y*Math.cos(x*b))},p=b=>{const T=Math.exp(-_*g*b);return _*g*T*(Math.sin(x*b)*(m+_*g*y)/x+y*Math.cos(x*b))-T*(Math.cos(x*b)*(m+_*g*y)-x*y*Math.sin(x*b))}}else if(_===1)d=x=>e-Math.exp(-g*x)*(y+(m+g*y)*x);else{const x=g*Math.sqrt(_*_-1);d=b=>{const T=Math.exp(-_*g*b),S=Math.min(x*b,300);return e-T*((m+_*g*y)*Math.sinh(S)+x*y*Math.cosh(S))/x}}}return v(),{next:m=>{const y=d(m);if(h)a.done=m>=c;else{const _=p(m)*1e3,g=Math.abs(_)<=n,x=Math.abs(e-y)<=i;a.done=g&&x}return a.value=a.done?e:y,a},flipTarget:()=>{f=-f,[t,e]=[e,t],v()}}}Xp.needsInterpolation=(r,t)=>typeof r=="string"||typeof t=="string";const dy=r=>0,u1=(r,t,e)=>{const n=t-r;return n===0?1:(e-r)/n},Vp=(r,t,e)=>-e*r+e*t+r,l1=(r,t)=>e=>Math.max(Math.min(e,t),r),lo=r=>r%1?Number(r.toFixed(5)):r,eu=/(-)?([\d]*\.?[\d])+/g,wc=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,fD=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qo(r){return typeof r=="string"}const Bu={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},f1=Object.assign(Object.assign({},Bu),{transform:l1(0,1)});Object.assign(Object.assign({},Bu),{default:1});const hD=r=>({test:t=>Qo(t)&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),fo=hD("%");Object.assign(Object.assign({},fo),{parse:r=>fo.parse(r)/100,transform:r=>fo.transform(r*100)});const Wp=(r,t)=>e=>!!(Qo(e)&&fD.test(e)&&e.startsWith(r)||t&&Object.prototype.hasOwnProperty.call(e,t)),h1=(r,t,e)=>n=>{if(!Qo(n))return n;const[i,o,a,s]=n.match(eu);return{[r]:parseFloat(i),[t]:parseFloat(o),[e]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},an={test:Wp("hsl","hue"),parse:h1("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(r)+", "+fo.transform(lo(t))+", "+fo.transform(lo(e))+", "+lo(f1.transform(n))+")"},cD=l1(0,255),lf=Object.assign(Object.assign({},Bu),{transform:r=>Math.round(cD(r))}),Ir={test:Wp("rgb","red"),parse:h1("red","green","blue"),transform:({red:r,green:t,blue:e,alpha:n=1})=>"rgba("+lf.transform(r)+", "+lf.transform(t)+", "+lf.transform(e)+", "+lo(f1.transform(n))+")"};function dD(r){let t="",e="",n="",i="";return r.length>5?(t=r.substr(1,2),e=r.substr(3,2),n=r.substr(5,2),i=r.substr(7,2)):(t=r.substr(1,1),e=r.substr(2,1),n=r.substr(3,1),i=r.substr(4,1),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Ec={test:Wp("#"),parse:dD,transform:Ir.transform},Nu={test:r=>Ir.test(r)||Ec.test(r)||an.test(r),parse:r=>Ir.test(r)?Ir.parse(r):an.test(r)?an.parse(r):Ec.parse(r),transform:r=>Qo(r)?r:r.hasOwnProperty("red")?Ir.transform(r):an.transform(r)},c1="${c}",d1="${n}";function pD(r){var t,e,n,i;return isNaN(r)&&Qo(r)&&((e=(t=r.match(eu))===null||t===void 0?void 0:t.length)!==null&&e!==void 0?e:0)+((i=(n=r.match(wc))===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0}function p1(r){typeof r=="number"&&(r=`${r}`);const t=[];let e=0;const n=r.match(wc);n&&(e=n.length,r=r.replace(wc,c1),t.push(...n.map(Nu.parse)));const i=r.match(eu);return i&&(r=r.replace(eu,d1),t.push(...i.map(Bu.parse))),{values:t,numColors:e,tokenised:r}}function v1(r){return p1(r).values}function m1(r){const{values:t,numColors:e,tokenised:n}=p1(r),i=t.length;return o=>{let a=n;for(let s=0;s<i;s++)a=a.replace(s<e?c1:d1,s<e?Nu.transform(o[s]):lo(o[s]));return a}}const vD=r=>typeof r=="number"?0:r;function mD(r){const t=v1(r);return m1(r)(t.map(vD))}const y1={test:pD,parse:v1,createTransformer:m1,getAnimatableNone:mD};function ff(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r}function py({hue:r,saturation:t,lightness:e,alpha:n}){r/=360,t/=100,e/=100;let i=0,o=0,a=0;if(!t)i=o=a=e;else{const s=e<.5?e*(1+t):e+t-e*t,u=2*e-s;i=ff(u,s,r+1/3),o=ff(u,s,r),a=ff(u,s,r-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const yD=(r,t,e)=>{const n=r*r,i=t*t;return Math.sqrt(Math.max(0,e*(i-n)+n))},gD=[Ec,Ir,an],vy=r=>gD.find(t=>t.test(r)),g1=(r,t)=>{let e=vy(r),n=vy(t),i=e.parse(r),o=n.parse(t);e===an&&(i=py(i),e=Ir),n===an&&(o=py(o),n=Ir);const a=Object.assign({},i);return s=>{for(const u in a)u!=="alpha"&&(a[u]=yD(i[u],o[u],s));return a.alpha=Vp(i.alpha,o.alpha,s),e.transform(a)}},_D=r=>typeof r=="number",bD=(r,t)=>e=>t(r(e)),_1=(...r)=>r.reduce(bD);function b1(r,t){return _D(r)?e=>Vp(r,t,e):Nu.test(r)?g1(r,t):T1(r,t)}const x1=(r,t)=>{const e=[...r],n=e.length,i=r.map((o,a)=>b1(o,t[a]));return o=>{for(let a=0;a<n;a++)e[a]=i[a](o);return e}},xD=(r,t)=>{const e=Object.assign(Object.assign({},r),t),n={};for(const i in e)r[i]!==void 0&&t[i]!==void 0&&(n[i]=b1(r[i],t[i]));return i=>{for(const o in n)e[o]=n[o](i);return e}};function my(r){const t=y1.parse(r),e=t.length;let n=0,i=0,o=0;for(let a=0;a<e;a++)n||typeof t[a]=="number"?n++:t[a].hue!==void 0?o++:i++;return{parsed:t,numNumbers:n,numRGB:i,numHSL:o}}const T1=(r,t)=>{const e=y1.createTransformer(t),n=my(r),i=my(t);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?_1(x1(n.parsed,i.parsed),e):a=>`${a>0?t:r}`},TD=(r,t)=>e=>Vp(r,t,e);function SD(r){if(typeof r=="number")return TD;if(typeof r=="string")return Nu.test(r)?g1:T1;if(Array.isArray(r))return x1;if(typeof r=="object")return xD}function wD(r,t,e){const n=[],i=e||SD(r[0]),o=r.length-1;for(let a=0;a<o;a++){let s=i(r[a],r[a+1]);if(t){const u=Array.isArray(t)?t[a]:t;s=_1(u,s)}n.push(s)}return n}function ED([r,t],[e]){return n=>e(u1(r,t,n))}function OD(r,t){const e=r.length,n=e-1;return i=>{let o=0,a=!1;if(i<=r[0]?a=!0:i>=r[n]&&(o=n-1,a=!0),!a){let u=1;for(;u<e&&!(r[u]>i||u===n);u++);o=u-1}const s=u1(r[o],r[o+1],i);return t[o](s)}}function S1(r,t,{clamp:e=!0,ease:n,mixer:i}={}){const o=r.length;fy(o===t.length),fy(!n||!Array.isArray(n)||n.length===o-1),r[0]>r[o-1]&&(r=[].concat(r),t=[].concat(t),r.reverse(),t.reverse());const a=wD(t,n,i),s=o===2?ED(r,a):OD(r,a);return e?u=>s(Tc(r[0],r[o-1],u)):s}const PD=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,CD=r=>t=>Math.pow(t,r),AD=CD(2),Es=PD(AD);function RD(r,t){return r.map(()=>t||Es).splice(0,r.length-1)}function ID(r){const t=r.length;return r.map((e,n)=>n!==0?n/(t-1):0)}function MD(r,t){return r.map(e=>e*t)}function Os({from:r=0,to:t=1,ease:e,offset:n,duration:i=300}){const o={done:!1,value:r},a=Array.isArray(t)?t:[r,t],s=MD(n&&n.length===a.length?n:ID(a),i);function u(){return S1(s,a,{ease:Array.isArray(e)?e:RD(a,e)})}let l=u();return{next:f=>(o.value=l(f),o.done=f>=i,o),flipTarget:()=>{a.reverse(),l=u()}}}function FD({velocity:r=0,from:t=0,power:e=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:o}){const a={done:!1,value:t};let s=e*r;const u=t+s,l=o===void 0?u:o(u);return l!==u&&(s=l-t),{next:f=>{const c=-s*Math.exp(-f/n);return a.done=!(c>i||c<-i),a.value=a.done?l:l+c,a},flipTarget:()=>{}}}const yy={keyframes:Os,spring:Xp,decay:FD};function DD(r){if(Array.isArray(r.to))return Os;if(yy[r.type])return yy[r.type];const t=new Set(Object.keys(r));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?Os:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Xp:Os}const w1=1/60*1e3,BD=typeof performance<"u"?()=>performance.now():()=>Date.now(),E1=typeof window<"u"?r=>window.requestAnimationFrame(r):r=>setTimeout(()=>r(BD()),w1);function ND(r){let t=[],e=[],n=0,i=!1,o=!1;const a=new WeakSet,s={schedule:(u,l=!1,f=!1)=>{const c=f&&i,h=c?t:e;return l&&a.add(u),h.indexOf(u)===-1&&(h.push(u),c&&i&&(n=t.length)),u},cancel:u=>{const l=e.indexOf(u);l!==-1&&e.splice(l,1),a.delete(u)},process:u=>{if(i){o=!0;return}if(i=!0,[t,e]=[e,t],e.length=0,n=t.length,n)for(let l=0;l<n;l++){const f=t[l];f(u),a.has(f)&&(s.schedule(f),r())}i=!1,o&&(o=!1,s.process(u))}};return s}const LD=40;let Oc=!0,Uo=!1,Pc=!1;const ho={delta:0,timestamp:0},ta=["read","update","preRender","render","postRender"],Lu=ta.reduce((r,t)=>(r[t]=ND(()=>Uo=!0),r),{}),UD=ta.reduce((r,t)=>{const e=Lu[t];return r[t]=(n,i=!1,o=!1)=>(Uo||kD(),e.schedule(n,i,o)),r},{}),GD=ta.reduce((r,t)=>(r[t]=Lu[t].cancel,r),{});ta.reduce((r,t)=>(r[t]=()=>Lu[t].process(ho),r),{});const jD=r=>Lu[r].process(ho),O1=r=>{Uo=!1,ho.delta=Oc?w1:Math.max(Math.min(r-ho.timestamp,LD),1),ho.timestamp=r,Pc=!0,ta.forEach(jD),Pc=!1,Uo&&(Oc=!1,E1(O1))},kD=()=>{Uo=!0,Oc=!0,Pc||E1(O1)};function P1(r,t,e=0){return r-t-e}function $D(r,t,e=0,n=!0){return n?P1(t+-r,t,e):t-(r-t)+e}function zD(r,t,e,n){return n?r>=t+e:r<=-e}const HD=r=>{const t=({delta:e})=>r(e);return{start:()=>UD.update(t,!0),stop:()=>GD.update(t)}};function co(r){var t,e,{from:n,autoplay:i=!0,driver:o=HD,elapsed:a=0,repeat:s=0,repeatType:u="loop",repeatDelay:l=0,onPlay:f,onStop:c,onComplete:h,onRepeat:d,onUpdate:p}=r,v=s1(r,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:m}=v,y,_=0,g=v.duration,x,b=!1,T=!0,S;const O=DD(v);!((e=(t=O).needsInterpolation)===null||e===void 0)&&e.call(t,n,m)&&(S=S1([0,100],[n,m],{clamp:!1}),n=0,m=100);const w=O(Object.assign(Object.assign({},v),{from:n,to:m}));function E(){_++,u==="reverse"?(T=_%2===0,a=$D(a,g,l,T)):(a=P1(a,g,l),u==="mirror"&&w.flipTarget()),b=!1,d&&d()}function P(){y.stop(),h&&h()}function D(H){if(T||(H=-H),a+=H,!b){const M=w.next(Math.max(0,a));x=M.value,S&&(x=S(x)),b=T?M.done:a<=0}p==null||p(x),b&&(_===0&&(g??(g=a)),_<s?zD(a,g,l,T)&&E():P())}function N(){f==null||f(),y=o(D),y.start()}return i&&N(),{stop:()=>{c==null||c(),y.stop()}}}var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof oi<"u"?oi:typeof self<"u"?self:{};function On(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var C1={exports:{}},Xi=function(r){return r&&r.Math===Math&&r},Rt=Xi(typeof globalThis=="object"&&globalThis)||Xi(typeof window=="object"&&window)||Xi(typeof self=="object"&&self)||Xi(typeof za=="object"&&za)||Xi(typeof za=="object"&&za)||function(){return this}()||Function("return this")(),Et=function(r){try{return!!r()}catch{return!0}},Uu=!Et(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),XD=Uu,A1=Function.prototype,gy=A1.apply,_y=A1.call,R1=typeof Reflect=="object"&&Reflect.apply||(XD?_y.bind(gy):function(){return _y.apply(gy,arguments)}),I1=Uu,M1=Function.prototype,Cc=M1.call,VD=I1&&M1.bind.bind(Cc,Cc),Ut=I1?VD:function(r){return function(){return Cc.apply(r,arguments)}},F1=Ut,WD=F1({}.toString),YD=F1("".slice),Pn=function(r){return YD(WD(r),8,-1)},qD=Pn,KD=Ut,ru=function(r){if(qD(r)==="Function")return KD(r)},hf=typeof document=="object"&&document.all,Vt=hf===void 0&&hf!==void 0?function(r){return typeof r=="function"||r===hf}:function(r){return typeof r=="function"},Gu={},fe=!Et(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ZD=Uu,Ha=Function.prototype.call,Oe=ZD?Ha.bind(Ha):function(){return Ha.apply(Ha,arguments)},Yp={},D1={}.propertyIsEnumerable,B1=Object.getOwnPropertyDescriptor,JD=B1&&!D1.call({1:2},1);Yp.f=JD?function(r){var t=B1(this,r);return!!t&&t.enumerable}:D1;var xr,Ps,Di=function(r,t){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:t}},QD=Et,tB=Pn,cf=Object,eB=Ut("".split),N1=QD(function(){return!cf("z").propertyIsEnumerable(0)})?function(r){return tB(r)==="String"?eB(r,""):cf(r)}:cf,Bi=function(r){return r==null},rB=Bi,nB=TypeError,ju=function(r){if(rB(r))throw new nB("Can't call method on "+r);return r},iB=N1,oB=ju,zr=function(r){return iB(oB(r))},aB=Vt,qt=function(r){return typeof r=="object"?r!==null:aB(r)},Cn={},df=Cn,pf=Rt,sB=Vt,by=function(r){return sB(r)?r:void 0},Hr=function(r,t){return arguments.length<2?by(df[r])||by(pf[r]):df[r]&&df[r][t]||pf[r]&&pf[r][t]},An=Ut({}.isPrototypeOf),ku=typeof navigator<"u"&&String(navigator.userAgent)||"",L1=Rt,vf=ku,xy=L1.process,Ty=L1.Deno,Sy=xy&&xy.versions||Ty&&Ty.version,wy=Sy&&Sy.v8;wy&&(Ps=(xr=wy.split("."))[0]>0&&xr[0]<4?1:+(xr[0]+xr[1])),!Ps&&vf&&(!(xr=vf.match(/Edge\/(\d+)/))||xr[1]>=74)&&(xr=vf.match(/Chrome\/(\d+)/))&&(Ps=+xr[1]);var qp=Ps,Ey=qp,uB=Et,lB=Rt.String,U1=!!Object.getOwnPropertySymbols&&!uB(function(){var r=Symbol("symbol detection");return!lB(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&Ey&&Ey<41}),G1=U1&&!Symbol.sham&&typeof Symbol.iterator=="symbol",fB=Hr,hB=Vt,cB=An,dB=Object,j1=G1?function(r){return typeof r=="symbol"}:function(r){var t=fB("Symbol");return hB(t)&&cB(t.prototype,dB(r))},pB=String,ea=function(r){try{return pB(r)}catch{return"Object"}},vB=Vt,mB=ea,yB=TypeError,nr=function(r){if(vB(r))return r;throw new yB(mB(r)+" is not a function")},gB=nr,_B=Bi,Kp=function(r,t){var e=r[t];return _B(e)?void 0:gB(e)},Oy=Oe,Py=Vt,Cy=qt,bB=TypeError,$u={exports:{}},Ay=Rt,xB=Object.defineProperty,TB=Rt,SB=function(r,t){try{xB(Ay,r,{value:t,configurable:!0,writable:!0})}catch{Ay[r]=t}return t},Ry="__core-js_shared__",Iy=$u.exports=TB[Ry]||SB(Ry,{});(Iy.versions||(Iy.versions=[])).push({version:"3.36.1",mode:"pure",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"});var My=$u.exports,k1=function(r,t){return My[r]||(My[r]=t||{})},wB=ju,EB=Object,zu=function(r){return EB(wB(r))},OB=zu,PB=Ut({}.hasOwnProperty),Pe=Object.hasOwn||function(r,t){return PB(OB(r),t)},CB=Ut,AB=0,RB=Math.random(),IB=CB(1 .toString),Zp=function(r){return"Symbol("+(r===void 0?"":r)+")_"+IB(++AB+RB,36)},MB=k1,Fy=Pe,FB=Zp,DB=U1,BB=G1,ri=Rt.Symbol,mf=MB("wks"),NB=BB?ri.for||ri:ri&&ri.withoutSetter||FB,re=function(r){return Fy(mf,r)||(mf[r]=DB&&Fy(ri,r)?ri[r]:NB("Symbol."+r)),mf[r]},LB=Oe,Dy=qt,By=j1,UB=Kp,GB=function(r,t){var e,n;if(Py(e=r.toString)&&!Cy(n=Oy(e,r))||Py(e=r.valueOf)&&!Cy(n=Oy(e,r)))return n;throw new bB("Can't convert object to primitive value")},jB=TypeError,kB=re("toPrimitive"),$B=function(r,t){if(!Dy(r)||By(r))return r;var e,n=UB(r,kB);if(n){if(e=LB(n,r,t),!Dy(e)||By(e))return e;throw new jB("Can't convert object to primitive value")}return GB(r)},zB=j1,$1=function(r){var t=$B(r,"string");return zB(t)?t:t+""},Ny=qt,Ac=Rt.document,HB=Ny(Ac)&&Ny(Ac.createElement),Jp=function(r){return HB?Ac.createElement(r):{}},XB=Jp,z1=!fe&&!Et(function(){return Object.defineProperty(XB("div"),"a",{get:function(){return 7}}).a!==7}),VB=fe,WB=Oe,YB=Yp,qB=Di,KB=zr,ZB=$1,JB=Pe,QB=z1,Ly=Object.getOwnPropertyDescriptor;Gu.f=VB?Ly:function(r,t){if(r=KB(r),t=ZB(t),QB)try{return Ly(r,t)}catch{}if(JB(r,t))return qB(!WB(YB.f,r,t),r[t])};var tN=Et,eN=Vt,rN=/#|\.prototype\./,ra=function(r,t){var e=iN[nN(r)];return e===aN||e!==oN&&(eN(t)?tN(t):!!t)},nN=ra.normalize=function(r){return String(r).replace(rN,".").toLowerCase()},iN=ra.data={},oN=ra.NATIVE="N",aN=ra.POLYFILL="P",H1=ra,sN=nr,uN=Uu,lN=ru(ru.bind),na=function(r,t){return sN(r),t===void 0?r:uN?lN(r,t):function(){return r.apply(t,arguments)}},ir={},X1=fe&&Et(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),fN=qt,hN=String,cN=TypeError,or=function(r){if(fN(r))return r;throw new cN(hN(r)+" is not an object")},dN=fe,pN=z1,vN=X1,Xa=or,Uy=$1,mN=TypeError,yf=Object.defineProperty,yN=Object.getOwnPropertyDescriptor,gf="enumerable",_f="configurable",bf="writable";ir.f=dN?vN?function(r,t,e){if(Xa(r),t=Uy(t),Xa(e),typeof r=="function"&&t==="prototype"&&"value"in e&&bf in e&&!e[bf]){var n=yN(r,t);n&&n[bf]&&(r[t]=e.value,e={configurable:_f in e?e[_f]:n[_f],enumerable:gf in e?e[gf]:n[gf],writable:!1})}return yf(r,t,e)}:yf:function(r,t,e){if(Xa(r),t=Uy(t),Xa(e),pN)try{return yf(r,t,e)}catch{}if("get"in e||"set"in e)throw new mN("Accessors not supported");return"value"in e&&(r[t]=e.value),r};var gN=ir,_N=Di,Xr=fe?function(r,t,e){return gN.f(r,t,_N(1,e))}:function(r,t,e){return r[t]=e,r},Vi=Rt,bN=R1,xN=ru,TN=Vt,SN=Gu.f,wN=H1,$n=Cn,EN=na,zn=Xr,Gy=Pe,ON=function(r){var t=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,n)}return new r(e,n,i)}return bN(r,this,arguments)};return t.prototype=r.prototype,t},Gt=function(r,t){var e,n,i,o,a,s,u,l,f,c=r.target,h=r.global,d=r.stat,p=r.proto,v=h?Vi:d?Vi[c]:Vi[c]&&Vi[c].prototype,m=h?$n:$n[c]||zn($n,c,{})[c],y=m.prototype;for(o in t)n=!(e=wN(h?o:c+(d?".":"#")+o,r.forced))&&v&&Gy(v,o),s=m[o],n&&(u=r.dontCallGetSet?(f=SN(v,o))&&f.value:v[o]),a=n&&u?u:t[o],(e||p||typeof s!=typeof a)&&(l=r.bind&&n?EN(a,Vi):r.wrap&&n?ON(a):p&&TN(a)?xN(a):a,(r.sham||a&&a.sham||s&&s.sham)&&zn(l,"sham",!0),zn(m,o,l),p&&(Gy($n,i=c+"Prototype")||zn($n,i,{}),zn($n[i],o,a),r.real&&y&&(e||!y[o])&&zn(y,o,a)))},PN=Gt,CN=Et,AN=zr,jy=Gu.f,ky=fe;PN({target:"Object",stat:!0,forced:!ky||CN(function(){jy(1)}),sham:!ky},{getOwnPropertyDescriptor:function(r,t){return jy(AN(r),t)}});var V1=Cn.Object,RN=C1.exports=function(r,t){return V1.getOwnPropertyDescriptor(r,t)};V1.getOwnPropertyDescriptor.sham&&(RN.sham=!0);var IN=C1.exports,MN=On(IN);function qe(){}function Rc(){return wx.createImage()}var Ic=wx.createImage();function W1(){var r=wx.createCanvas();return r.style={cursor:null},r}var ui=new W1,FN=Math.ceil,DN=Math.floor,BN=Math.trunc||function(r){var t=+r;return(t>0?DN:FN)(t)},Hu=function(r){var t=+r;return t!=t||t===0?0:BN(t)},NN=Hu,LN=Math.max,UN=Math.min,Y1=function(r,t){var e=NN(r);return e<0?LN(e+t,0):UN(e,t)},GN=Hu,jN=Math.min,kN=function(r){var t=GN(r);return t>0?jN(t,9007199254740991):0},Xu=function(r){return kN(r.length)},$N=zr,zN=Y1,HN=Xu,XN=function(r){return function(t,e,n){var i=$N(t),o=HN(i);if(o===0)return!r&&-1;var a,s=zN(n,o);if(r&&e!=e){for(;o>s;)if((a=i[s++])!=a)return!0}else for(;o>s;s++)if((r||s in i)&&i[s]===e)return r||s||0;return!r&&-1}},q1={indexOf:XN(!1)},VN=Et,WN=Gt,YN=q1.indexOf,qN=function(r,t){var e=[][r];return!!e&&VN(function(){e.call(null,t||function(){return 1},1)})},Mc=ru([].indexOf),$y=!!Mc&&1/Mc([1],1,-0)<0;WN({target:"Array",proto:!0,forced:$y||!qN("indexOf")},{indexOf:function(r){var t=arguments.length>1?arguments[1]:void 0;return $y?Mc(this,r,t)||0:YN(this,r,t)}});var KN=Rt,ZN=Cn,Qp=function(r,t){var e=ZN[r+"Prototype"],n=e&&e[t];if(n)return n;var i=KN[r],o=i&&i.prototype;return o&&o[t]},JN=Qp("Array","indexOf"),QN=An,t3=JN,xf=Array.prototype,e3=On(function(r){var t=r.indexOf;return r===xf||QN(xf,r)&&t===xf.indexOf?t3:t}),r3=Pn,K1=Array.isArray||function(r){return r3(r)==="Array"},n3=fe,i3=K1,o3=TypeError,a3=Object.getOwnPropertyDescriptor,s3=n3&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(r){return r instanceof TypeError}}()?function(r,t){if(i3(r)&&!a3(r,"length").writable)throw new o3("Cannot set read only .length");return r.length=t}:function(r,t){return r.length=t},u3=TypeError,Z1={};Z1[re("toStringTag")]="z";var tv=String(Z1)==="[object z]",l3=tv,f3=Vt,Cs=Pn,h3=re("toStringTag"),c3=Object,d3=Cs(function(){return arguments}())==="Arguments",Vu=l3?Cs:function(r){var t,e,n;return r===void 0?"Undefined":r===null?"Null":typeof(e=function(i,o){try{return i[o]}catch{}}(t=c3(r),h3))=="string"?e:d3?Cs(t):(n=Cs(t))==="Object"&&f3(t.callee)?"Arguments":n},p3=Ut,v3=Vt,Fc=$u.exports,m3=p3(Function.toString);v3(Fc.inspectSource)||(Fc.inspectSource=function(r){return m3(r)});var J1=Fc.inspectSource,y3=Ut,g3=Et,Q1=Vt,_3=Vu,b3=J1,tT=function(){},eT=Hr("Reflect","construct"),ev=/^\s*(?:class|function)\b/,x3=y3(ev.exec),T3=!ev.test(tT),Wi=function(r){if(!Q1(r))return!1;try{return eT(tT,[],r),!0}catch{return!1}},rT=function(r){if(!Q1(r))return!1;switch(_3(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return T3||!!x3(ev,b3(r))}catch{return!0}};rT.sham=!0;var nT=!eT||g3(function(){var r;return Wi(Wi.call)||!Wi(Object)||!Wi(function(){r=!0})||r})?rT:Wi,zy=K1,S3=nT,w3=qt,E3=re("species"),Hy=Array,O3=function(r){var t;return zy(r)&&(t=r.constructor,(S3(t)&&(t===Hy||zy(t.prototype))||w3(t)&&(t=t[E3])===null)&&(t=void 0)),t===void 0?Hy:t},iT=function(r,t){return new(O3(r))(t===0?0:t)},P3=fe,C3=ir,A3=Di,Xy=ea,R3=TypeError,I3=Et,M3=qp,F3=re("species"),oT=function(r){return M3>=51||!I3(function(){var t=[];return(t.constructor={})[F3]=function(){return{foo:1}},t[r](Boolean).foo!==1})},D3=Gt,B3=zu,N3=Y1,L3=Hu,U3=Xu,G3=s3,j3=function(r){if(r>9007199254740991)throw u3("Maximum allowed index exceeded");return r},k3=iT,$3=function(r,t,e){P3?C3.f(r,t,A3(0,e)):r[t]=e},Tf=function(r,t){if(!delete r[t])throw new R3("Cannot delete property "+Xy(t)+" of "+Xy(r))},z3=oT("splice"),H3=Math.max,X3=Math.min;D3({target:"Array",proto:!0,forced:!z3},{splice:function(r,t){var e,n,i,o,a,s,u=B3(this),l=U3(u),f=N3(r,l),c=arguments.length;for(c===0?e=n=0:c===1?(e=0,n=l-f):(e=c-2,n=X3(H3(L3(t),0),l-f)),j3(l+e-n),i=k3(u,n),o=0;o<n;o++)(a=f+o)in u&&$3(i,o,u[a]);if(i.length=n,e<n){for(o=f;o<l-n;o++)s=o+e,(a=o+n)in u?u[s]=u[a]:Tf(u,s);for(o=l;o>l-n+e;o--)Tf(u,o-1)}else if(e>n)for(o=l-n;o>f;o--)s=o+e-1,(a=o+n-1)in u?u[s]=u[a]:Tf(u,s);for(o=0;o<e;o++)u[o+f]=arguments[o+2];return G3(u,l-n+e),i}});var V3=Qp("Array","splice"),W3=An,Y3=V3,Sf=Array.prototype,q3=On(function(r){var t=r.splice;return r===Sf||W3(Sf,r)&&t===Sf.splice?Y3:t});function aT(r,t,e){return t=nu(t),function(n,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(n)}(r,sT()?Reflect.construct(t,e||[],nu(r).constructor):t.apply(r,e))}function sT(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sT=function(){return!!r})()}function uT(r){var t=function(e,n){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,n);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}(r,"string");return typeof t=="symbol"?t:t+""}function Rn(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function K3(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,uT(n.key),n)}}function In(r,t,e){return t&&K3(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yt(r,t,e){return(t=uT(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function lT(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Dc(r,t)}function nu(r){return nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nu(r)}function Dc(r,t){return Dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Dc(r,t)}var iu,po,ou,au=function(){return In(function r(){Rn(this,r),yt(this,"style",{cursor:null}),yt(this,"pathname","")},[{key:"appendChild",value:function(){}},{key:"removeChild",value:function(){}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}},{key:"setAttribute",value:function(){}}])}(),Vy=ui.constructor,Wy=function(r){function t(){return Rn(this,t),aT(this,t,arguments)}return lT(t,Ic.constructor),In(t)}(),Yy=function(r){function t(){return Rn(this,t),aT(this,t,arguments)}return lT(t,au),In(t)}(),Tr={},Kn={body:new au("body"),cookie:"",addEventListener:function(r,t){Tr[r]=Tr[r]||[],Tr[r].push(t)},removeEventListener:function(r,t){if(Tr[r]&&Tr[r].length){var e,n,i=e3(e=Tr[r]).call(e,t);i!==-1&&q3(n=Tr[r]).call(n,i)}},dispatch:function(r){var t=Tr[r.type];t&&t.forEach(function(e){return e(r)})},createElement:function(r){switch(r=r.toLowerCase()){case"canvas":return new W1;case"image":case"img":return new Rc;default:return new au}}},Ni={},Z3=Vt,qy=Rt.WeakMap,fT=Z3(qy)&&/native code/.test(String(qy)),J3=Zp,Ky=k1("keys"),rv=function(r){return Ky[r]||(Ky[r]=J3(r))},Wu={},Q3=fT,hT=Rt,tL=qt,eL=Xr,wf=Pe,Ef=$u.exports,rL=rv,nL=Wu,Zy="Object already initialized",Bc=hT.TypeError,iL=hT.WeakMap;if(Q3||Ef.state){var He=Ef.state||(Ef.state=new iL);He.get=He.get,He.has=He.has,He.set=He.set,iu=function(r,t){if(He.has(r))throw new Bc(Zy);return t.facade=r,He.set(r,t),t},po=function(r){return He.get(r)||{}},ou=function(r){return He.has(r)}}else{var Hn=rL("state");nL[Hn]=!0,iu=function(r,t){if(wf(r,Hn))throw new Bc(Zy);return t.facade=r,eL(r,Hn,t),t},po=function(r){return wf(r,Hn)?r[Hn]:{}},ou=function(r){return wf(r,Hn)}}var Vr={set:iu,get:po,has:ou,enforce:function(r){return ou(r)?po(r):iu(r,{})},getterFor:function(r){return function(t){var e;if(!tL(t)||(e=po(t)).type!==r)throw new Bc("Incompatible receiver, "+r+" required");return e}}},Nc=fe,oL=Pe,cT=Function.prototype,aL=Nc&&Object.getOwnPropertyDescriptor,Jy=oL(cT,"name"),sL={PROPER:Jy&&(function(){}).name==="something",CONFIGURABLE:Jy&&(!Nc||Nc&&aL(cT,"name").configurable)},dT={},Of=Pe,uL=zr,lL=q1.indexOf,fL=Wu,Qy=Ut([].push),pT=function(r,t){var e,n=uL(r),i=0,o=[];for(e in n)!Of(fL,e)&&Of(n,e)&&Qy(o,e);for(;t.length>i;)Of(n,e=t[i++])&&(~lL(o,e)||Qy(o,e));return o},nv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hL=pT,cL=nv,vT=Object.keys||function(r){return hL(r,cL)},dL=fe,pL=X1,vL=ir,mL=or,yL=zr,gL=vT;dT.f=dL&&!pL?Object.defineProperties:function(r,t){mL(r);for(var e,n=yL(t),i=gL(t),o=i.length,a=0;o>a;)vL.f(r,e=i[a++],n[e]);return r};var Va,mT=Hr("document","documentElement"),_L=or,bL=dT,tg=nv,xL=Wu,TL=mT,SL=Jp,Lc="prototype",Uc="script",yT=rv("IE_PROTO"),Pf=function(){},gT=function(r){return"<"+Uc+">"+r+"</"+Uc+">"},eg=function(r){r.write(gT("")),r.close();var t=r.parentWindow.Object;return r=null,t},As=function(){try{Va=new ActiveXObject("htmlfile")}catch{}var r,t,e;As=typeof document<"u"?document.domain&&Va?eg(Va):(t=SL("iframe"),e="java"+Uc+":",t.style.display="none",TL.appendChild(t),t.src=String(e),(r=t.contentWindow.document).open(),r.write(gT("document.F=Object")),r.close(),r.F):eg(Va);for(var n=tg.length;n--;)delete As[Lc][tg[n]];return As()};xL[yT]=!0;var cn,rg,ng,iv=Object.create||function(r,t){var e;return r!==null?(Pf[Lc]=_L(r),e=new Pf,Pf[Lc]=null,e[yT]=r):e=As(),t===void 0?e:bL.f(e,t)},wL=!Et(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),EL=Pe,OL=Vt,PL=zu,CL=wL,ig=rv("IE_PROTO"),Gc=Object,AL=Gc.prototype,Yu=CL?Gc.getPrototypeOf:function(r){var t=PL(r);if(EL(t,ig))return t[ig];var e=t.constructor;return OL(e)&&t instanceof e?e.prototype:t instanceof Gc?AL:null},RL=Xr,qu=function(r,t,e,n){return n&&n.enumerable?r[t]=e:RL(r,t,e),r},IL=Et,ML=Vt,FL=qt,DL=iv,og=Yu,BL=qu,jc=re("iterator"),_T=!1;[].keys&&("next"in(ng=[].keys())?(rg=og(og(ng)))!==Object.prototype&&(cn=rg):_T=!0);var NL=!FL(cn)||IL(function(){var r={};return cn[jc].call(r)!==r});ML((cn=NL?{}:DL(cn))[jc])||BL(cn,jc,function(){return this});var bT={IteratorPrototype:cn,BUGGY_SAFARI_ITERATORS:_T},LL=Vu,UL=tv?{}.toString:function(){return"[object "+LL(this)+"]"},GL=tv,jL=ir.f,kL=Xr,$L=Pe,zL=UL,ag=re("toStringTag"),ia=function(r,t,e,n){var i=e?r:r&&r.prototype;i&&($L(i,ag)||jL(i,ag,{configurable:!0,value:t}),n&&!GL&&kL(i,"toString",zL))},HL=bT.IteratorPrototype,XL=iv,VL=Di,WL=ia,YL=Ni,qL=function(){return this},KL=Ut,ZL=nr,JL=qt,QL=function(r){return JL(r)||r===null},tU=String,eU=TypeError,rU=function(r,t,e){try{return KL(ZL(Object.getOwnPropertyDescriptor(r,t)[e]))}catch{}},nU=qt,iU=ju,oU=function(r){if(QL(r))return r;throw new eU("Can't set "+tU(r)+" as a prototype")},aU=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,e={};try{(r=rU(Object.prototype,"__proto__","set"))(e,[]),t=e instanceof Array}catch{}return function(n,i){return iU(n),oU(i),nU(n)&&(t?r(n,i):n.__proto__=i),n}}():void 0),sU=Gt,uU=Oe,lU=sL,fU=function(r,t,e,n){var i=t+" Iterator";return r.prototype=XL(HL,{next:VL(1,e)}),WL(r,i,!1,!0),YL[i]=qL,r},hU=Yu,cU=ia,sg=qu,ug=Ni,dU=bT,pU=lU.PROPER,Wa=dU.BUGGY_SAFARI_ITERATORS,Cf=re("iterator"),lg="keys",Ya="values",fg="entries",vU=function(){return this},xT=function(r,t,e,n,i,o,a){fU(e,t,n);var s,u,l,f=function(y){if(y===i&&v)return v;if(!Wa&&y&&y in d)return d[y];switch(y){case lg:case Ya:case fg:return function(){return new e(this,y)}}return function(){return new e(this)}},c=t+" Iterator",h=!1,d=r.prototype,p=d[Cf]||d["@@iterator"]||i&&d[i],v=!Wa&&p||f(i),m=t==="Array"&&d.entries||p;if(m&&(s=hU(m.call(new r)))!==Object.prototype&&s.next&&(cU(s,c,!0,!0),ug[c]=vU),pU&&i===Ya&&p&&p.name!==Ya&&(h=!0,v=function(){return uU(p,this)}),i)if(u={values:f(Ya),keys:o?v:f(lg),entries:f(fg)},a)for(l in u)(Wa||h||!(l in d))&&sg(d,l,u[l]);else sU({target:t,proto:!0,forced:Wa||h},u);return a&&d[Cf]!==v&&sg(d,Cf,v,{}),ug[t]=v,u},TT=function(r,t){return{value:r,done:t}},mU=zr,hg=Ni,ST=Vr,yU=(ir.f,xT),qa=TT,wT="Array Iterator",gU=ST.set,_U=ST.getterFor(wT);yU(Array,"Array",function(r,t){gU(this,{type:wT,target:mU(r),index:0,kind:t})},function(){var r=_U(this),t=r.target,e=r.index++;if(!t||e>=t.length)return r.target=void 0,qa(void 0,!0);switch(r.kind){case"keys":return qa(e,!1);case"values":return qa(t[e],!1)}return qa([e,t[e]],!1)},"values");hg.Arguments=hg.Array;var ET=!Et(function(){return Object.isExtensible(Object.preventExtensions({}))}),bU=qu,OT=function(r,t,e){for(var n in t)e&&e.unsafe&&r[n]?r[n]=t[n]:bU(r,n,t[n],e);return r},Ku={exports:{}},Zu={},xU=pT,TU=nv.concat("length","prototype");Zu.f=Object.getOwnPropertyNames||function(r){return xU(r,TU)};var PT={},CT=Ut([].slice),SU=Pn,wU=zr,cg=Zu.f,EU=CT,dg=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];PT.f=function(r){return dg&&SU(r)==="Window"?function(t){try{return cg(t)}catch{return EU(dg)}}(r):cg(wU(r))};var OU=Et(function(){if(typeof ArrayBuffer=="function"){var r=new ArrayBuffer(8);Object.isExtensible(r)&&Object.defineProperty(r,"a",{value:8})}}),PU=Et,CU=qt,AU=Pn,pg=OU,Ka=Object.isExtensible,RU=PU(function(){Ka(1)})||pg?function(r){return!!CU(r)&&(!pg||AU(r)!=="ArrayBuffer")&&(!Ka||Ka(r))}:Ka,IU=Gt,MU=Ut,FU=Wu,DU=qt,Af=Pe,BU=ir.f,vg=Zu,NU=PT,Rf=RU,LU=ET,mg=!1,cr=Zp("meta"),UU=0,If=function(r){BU(r,cr,{value:{objectID:"O"+UU++,weakData:{}}})},GU=Ku.exports={enable:function(){GU.enable=function(){},mg=!0;var r=vg.f,t=MU([].splice),e={};e[cr]=1,r(e).length&&(vg.f=function(n){for(var i=r(n),o=0,a=i.length;o<a;o++)if(i[o]===cr){t(i,o,1);break}return i},IU({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:NU.f}))},fastKey:function(r,t){if(!DU(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!Af(r,cr)){if(!Rf(r))return"F";if(!t)return"E";If(r)}return r[cr].objectID},getWeakData:function(r,t){if(!Af(r,cr)){if(!Rf(r))return!0;if(!t)return!1;If(r)}return r[cr].weakData},onFreeze:function(r){return LU&&mg&&Rf(r)&&!Af(r,cr)&&If(r),r}};FU[cr]=!0;var jU=Ni,kU=re("iterator"),$U=Array.prototype,zU=Vu,yg=Kp,HU=Bi,XU=Ni,VU=re("iterator"),AT=function(r){if(!HU(r))return yg(r,VU)||yg(r,"@@iterator")||XU[zU(r)]},WU=Oe,YU=nr,qU=or,KU=ea,ZU=AT,JU=TypeError,QU=Oe,gg=or,tG=Kp,eG=na,rG=Oe,nG=or,iG=ea,oG=function(r){return r!==void 0&&(jU.Array===r||$U[kU]===r)},aG=Xu,_g=An,sG=function(r,t){var e=arguments.length<2?ZU(r):t;if(YU(e))return qU(WU(e,r));throw new JU(KU(r)+" is not iterable")},uG=AT,bg=function(r,t,e){var n,i;gg(r);try{if(!(n=tG(r,"return"))){if(t==="throw")throw e;return e}n=QU(n,r)}catch(o){i=!0,n=o}if(t==="throw")throw e;if(i)throw n;return gg(n),e},lG=TypeError,Rs=function(r,t){this.stopped=r,this.result=t},xg=Rs.prototype,Mn=function(r,t,e){var n,i,o,a,s,u,l,f=e&&e.that,c=!(!e||!e.AS_ENTRIES),h=!(!e||!e.IS_RECORD),d=!(!e||!e.IS_ITERATOR),p=!(!e||!e.INTERRUPTED),v=eG(t,f),m=function(_){return n&&bg(n,"normal",_),new Rs(!0,_)},y=function(_){return c?(nG(_),p?v(_[0],_[1],m):v(_[0],_[1])):p?v(_,m):v(_)};if(h)n=r.iterator;else if(d)n=r;else{if(!(i=uG(r)))throw new lG(iG(r)+" is not iterable");if(oG(i)){for(o=0,a=aG(r);a>o;o++)if((s=y(r[o]))&&_g(xg,s))return s;return new Rs(!1)}n=sG(r,i)}for(u=h?r.next:n.next;!(l=rG(u,n)).done;){try{s=y(l.value)}catch(_){bg(n,"throw",_)}if(typeof s=="object"&&s&&_g(xg,s))return s}return new Rs(!1)},fG=An,hG=TypeError,ov=function(r,t){if(fG(t,r))return r;throw new hG("Incorrect invocation")},cG=na,dG=N1,pG=zu,vG=Xu,mG=iT,Tg=Ut([].push),Za=function(r){var t=r===1,e=r===2,n=r===3,i=r===4,o=r===6,a=r===7,s=r===5||o;return function(u,l,f,c){for(var h,d,p=pG(u),v=dG(p),m=vG(v),y=cG(l,f),_=0,g=c||mG,x=t?g(u,m):e||a?g(u,0):void 0;m>_;_++)if((s||_ in v)&&(d=y(h=v[_],_,p),r))if(t)x[_]=d;else if(d)switch(r){case 3:return!0;case 5:return h;case 6:return _;case 2:Tg(x,h)}else switch(r){case 4:return!1;case 7:Tg(x,h)}return o?-1:n||i?i:x}},Ju={forEach:Za(0),map:Za(1),find:Za(5),findIndex:Za(6)},yG=Gt,gG=Rt,_G=Ku.exports,bG=Et,xG=Xr,TG=Mn,SG=ov,wG=Vt,EG=qt,OG=Bi,PG=ia,CG=ir.f,AG=Ju.forEach,RG=fe,IG=Vr.set,MG=Vr.getterFor,FG=Ut,Sg=OT,Ja=Ku.exports.getWeakData,DG=ov,BG=or,NG=Bi,Mf=qt,LG=Mn,wg=Pe,UG=Vr.set,GG=Vr.getterFor,jG=Ju.find,kG=Ju.findIndex,$G=FG([].splice),zG=0,Qa=function(r){return r.frozen||(r.frozen=new RT)},RT=function(){this.entries=[]},Ff=function(r,t){return jG(r.entries,function(e){return e[0]===t})};RT.prototype={get:function(r){var t=Ff(this,r);if(t)return t[1]},has:function(r){return!!Ff(this,r)},set:function(r,t){var e=Ff(this,r);e?e[1]=t:this.entries.push([r,t])},delete:function(r){var t=kG(this.entries,function(e){return e[0]===r});return~t&&$G(this.entries,t,1),!!~t}};var Yi,HG={getConstructor:function(r,t,e,n){var i=r(function(u,l){DG(u,o),UG(u,{type:t,id:zG++,frozen:void 0}),NG(l)||LG(l,u[n],{that:u,AS_ENTRIES:e})}),o=i.prototype,a=GG(t),s=function(u,l,f){var c=a(u),h=Ja(BG(l),!0);return h===!0?Qa(c).set(l,f):h[c.id]=f,u};return Sg(o,{delete:function(u){var l=a(this);if(!Mf(u))return!1;var f=Ja(u);return f===!0?Qa(l).delete(u):f&&wg(f,l.id)&&delete f[l.id]},has:function(u){var l=a(this);if(!Mf(u))return!1;var f=Ja(u);return f===!0?Qa(l).has(u):f&&wg(f,l.id)}}),Sg(o,e?{get:function(u){var l=a(this);if(Mf(u)){var f=Ja(u);return f===!0?Qa(l).get(u):f?f[l.id]:void 0}},set:function(u,l){return s(this,u,l)}}:{add:function(u){return s(this,u,!0)}}),i}},XG=ET,Eg=Rt,Is=Ut,Og=OT,VG=Ku.exports,WG=function(r,t,e){var n,i=r.indexOf("Map")!==-1,o=r.indexOf("Weak")!==-1,a=i?"set":"add",s=gG[r],u=s&&s.prototype,l={};if(RG&&wG(s)&&(o||u.forEach&&!bG(function(){new s().entries().next()}))){var f=(n=t(function(h,d){IG(SG(h,f),{type:r,collection:new s}),OG(d)||TG(d,h[a],{that:h,AS_ENTRIES:i})})).prototype,c=MG(r);AG(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(h){var d=h==="add"||h==="set";!(h in u)||o&&h==="clear"||xG(f,h,function(p,v){var m=c(this).collection;if(!d&&o&&!EG(p))return h==="get"&&void 0;var y=m[h](p===0?0:p,v);return d?this:y})}),o||CG(f,"size",{configurable:!0,get:function(){return c(this).collection.size}})}else n=e.getConstructor(t,r,i,a),_G.enable();return PG(n,r,!1,!0),l[r]=n,yG({global:!0,forced:!0},l),o||e.setStrong(n,r,i),n},IT=HG,ts=qt,es=Vr.enforce,YG=Et,qG=fT,oa=Object,KG=Array.isArray,rs=oa.isExtensible,Pg=oa.isFrozen,ZG=oa.isSealed,Cg=oa.freeze,JG=oa.seal,QG=!Eg.ActiveXObject&&"ActiveXObject"in Eg,MT=function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},FT=WG("WeakMap",MT,IT),Zn=FT.prototype,ns=Is(Zn.set);if(qG)if(QG){Yi=IT.getConstructor(MT,"WeakMap",!0),VG.enable();var Ag=Is(Zn.delete),is=Is(Zn.has),Rg=Is(Zn.get);Og(Zn,{delete:function(r){if(ts(r)&&!rs(r)){var t=es(this);return t.frozen||(t.frozen=new Yi),Ag(this,r)||t.frozen.delete(r)}return Ag(this,r)},has:function(r){if(ts(r)&&!rs(r)){var t=es(this);return t.frozen||(t.frozen=new Yi),is(this,r)||t.frozen.has(r)}return is(this,r)},get:function(r){if(ts(r)&&!rs(r)){var t=es(this);return t.frozen||(t.frozen=new Yi),is(this,r)?Rg(this,r):t.frozen.get(r)}return Rg(this,r)},set:function(r,t){if(ts(r)&&!rs(r)){var e=es(this);e.frozen||(e.frozen=new Yi),is(this,r)?ns(this,r,t):e.frozen.set(r,t)}else ns(this,r,t);return this}})}else XG&&YG(function(){var r=Cg([]);return ns(new FT,r,1),!Pg(r)})&&Og(Zn,{set:function(r,t){var e;return KG(r)&&(Pg(r)?e=Cg:ZG(r)&&(e=JG)),ns(this,r,t),e&&e(r),this}});var tj=Cn.WeakMap,ej={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},rj=Rt,nj=ia,Ig=Ni;for(var Df in ej)nj(rj[Df],Df),Ig[Df]=Ig.Array;var Bf=new(On(tj)),ni=function(){function r(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(Rn(this,r),this.binaryType="",this.bufferedAmount=0,this.extensions="",this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.protocol="",this.readyState=3,typeof t!="string"||!/(^ws:\/\/)|(^wss:\/\/)/.test(t))throw new TypeError("Failed to construct 'WebSocket': The URL '".concat(t,"' is invalid"));this.url=t,this.readyState=r.CONNECTING;var i=wx.connectSocket({url:t,protocols:Array.isArray(n)?n:[n]});return Bf.set(this,i),i.onClose(function(o){e.readyState=r.CLOSED,typeof e.onclose=="function"&&e.onclose(o)}),i.onMessage(function(o){typeof e.onmessage=="function"&&e.onmessage(o)}),i.onOpen(function(){e.readyState=r.OPEN,typeof e.onopen=="function"&&e.onopen()}),i.onError(function(o){typeof e.onerror=="function"&&e.onerror(new Error(o.errMsg))}),this}return In(r,[{key:"close",value:function(t,e){this.readyState=r.CLOSING,Bf.get(this).close({code:t,reason:e})}},{key:"send",value:function(t){if(typeof t!="string"&&!(t instanceof ArrayBuffer))throw new TypeError("Failed to send message: The data ".concat(t," is invalid"));Bf.get(this).send({data:t})}}])}();yt(ni,"CONNECTING",0),yt(ni,"OPEN",1),yt(ni,"CLOSING",2),yt(ni,"CLOSED",3);var kc=In(function r(t){Rn(this,r),yt(this,"preventDefault",qe),yt(this,"stopPropagation",qe),yt(this,"target",ui),yt(this,"currentTarget",ui),this.type=t});function os(r){return function(t){var e=new kc(r);e.touches=e.targetTouches=t.touches,e.changedTouches=t.changedTouches,e.timeStamp=t.timeStamp,Kn.dispatch(e)}}wx.onTouchStart(os("touchstart")),wx.onTouchMove(os("touchmove")),wx.onTouchEnd(os("touchend")),wx.onTouchCancel(os("touchcancel"));var Mg=In(function r(){Rn(this,r)}),Fg={getItem:function(r){return wx.getStorageSync(r)},setItem:function(r,t){return wx.setStorageSync(r,t)},clear:function(){wx.clearStorageSync()}},ij=Date.now(),oj=Object.freeze({__proto__:null,now:function(){return Date.now()-ij}}),aj=Ju.map;Gt({target:"Array",proto:!0,forced:!oT("map")},{map:function(r){return aj(this,r,arguments.length>1?arguments[1]:void 0)}});var sj=Qp("Array","map"),uj=An,lj=sj,Nf=Array.prototype,fj=On(function(r){var t=r.map;return r===Nf||uj(Nf,r)&&t===Nf.map?lj:t}),DT=fe,hj=Et,BT=Ut,cj=Yu,dj=vT,pj=zr,NT=BT(Yp.f),vj=BT([].push),mj=DT&&hj(function(){var r=Object.create(null);return r[2]=2,!NT(r,2)}),yj=function(r){return function(t){for(var e,n=pj(t),i=dj(n),o=mj&&cj(n)===null,a=i.length,s=0,u=[];a>s;)e=i[s++],DT&&!(o?e in n:NT(n,e))||vj(u,r?[e,n[e]]:n[e]);return u}},gj={entries:yj(!0)}.entries;Gt({target:"Object",stat:!0},{entries:function(r){return gj(r)}});var _j=Cn.Object.entries,bj=On(_j),LT={};LT.f=Object.getOwnPropertySymbols;var xj=Hr,Tj=Zu,Sj=LT,wj=or,Ej=Ut([].concat),Oj=xj("Reflect","ownKeys")||function(r){var t=Tj.f(wj(r)),e=Sj.f;return e?Ej(t,e(r)):t},Dg=Pe,Pj=Oj,Cj=Gu,Aj=ir,Rj=qt,Ij=Xr,UT=Error,Mj=Ut("".replace),Fj=String(new UT("zxcasd").stack),GT=/\n\s*at [^:]*:[^\n]*/,Dj=GT.test(Fj),Bj=Di,Nj=!Et(function(){var r=new Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",Bj(1,7)),r.stack!==7)}),Lj=Xr,Uj=function(r,t){if(Dj&&typeof r=="string"&&!UT.prepareStackTrace)for(;t--;)r=Mj(r,GT,"");return r},Gj=Nj,Bg=Error.captureStackTrace,jj=Vu,kj=String,av=function(r){if(jj(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return kj(r)},$j=av,zj=Gt,Hj=An,Xj=Yu,su=aU,Vj=function(r,t,e){for(var n=Pj(t),i=Aj.f,o=Cj.f,a=0;a<n.length;a++){var s=n[a];Dg(r,s)||e&&Dg(e,s)||i(r,s,o(t,s))}},jT=iv,Lf=Xr,Uf=Di,Wj=function(r,t){Rj(t)&&"cause"in t&&Ij(r,"cause",t.cause)},Yj=function(r,t,e,n){Gj&&(Bg?Bg(r,t):Lj(r,"stack",Uj(e,n)))},qj=Mn,Kj=function(r,t){return r===void 0?arguments.length<2?"":t:$j(r)},Zj=re("toStringTag"),uu=Error,Jj=[].push,Ti=function(r,t){var e,n=Hj(Gf,this);su?e=su(new uu,n?Xj(this):Gf):(e=n?this:jT(Gf),Lf(e,Zj,"Error")),t!==void 0&&Lf(e,"message",Kj(t)),Yj(e,Ti,e.stack,1),arguments.length>2&&Wj(e,arguments[2]);var i=[];return qj(r,Jj,{that:i}),Lf(e,"errors",i),e};su?su(Ti,uu):Vj(Ti,uu,{name:!0});var Gf=Ti.prototype=jT(uu.prototype,{constructor:Uf(1,Ti),message:Uf(1,""),name:Uf(1,"AggregateError")});zj({global:!0},{AggregateError:Ti});var Go,Xn,Ng,jf,Qu=Pn(Rt.process)==="process",Qj=ir,t4=Hr,e4=function(r,t,e){return Qj.f(r,t,e)},r4=fe,Lg=re("species"),n4=nT,i4=ea,o4=TypeError,Ug=or,a4=function(r){if(n4(r))return r;throw new o4(i4(r)+" is not a constructor")},s4=Bi,u4=re("species"),kT=function(r,t){var e,n=Ug(r).constructor;return n===void 0||s4(e=Ug(n)[u4])?t:a4(e)},l4=TypeError,$T=/(?:ipad|iphone|ipod).*applewebkit/i.test(ku),ce=Rt,f4=R1,h4=na,Gg=Vt,c4=Pe,zT=Et,jg=mT,d4=CT,kg=Jp,p4=function(r,t){if(r<t)throw new l4("Not enough arguments");return r},v4=$T,m4=Qu,$c=ce.setImmediate,$g=ce.clearImmediate,y4=ce.process,kf=ce.Dispatch,g4=ce.Function,zg=ce.MessageChannel,_4=ce.String,$f=0,vo={},Hg="onreadystatechange";zT(function(){Go=ce.location});var sv=function(r){if(c4(vo,r)){var t=vo[r];delete vo[r],t()}},zf=function(r){return function(){sv(r)}},Xg=function(r){sv(r.data)},Vg=function(r){ce.postMessage(_4(r),Go.protocol+"//"+Go.host)};$c&&$g||($c=function(r){p4(arguments.length,1);var t=Gg(r)?r:g4(r),e=d4(arguments,1);return vo[++$f]=function(){f4(t,void 0,e)},Xn($f),$f},$g=function(r){delete vo[r]},m4?Xn=function(r){y4.nextTick(zf(r))}:kf&&kf.now?Xn=function(r){kf.now(zf(r))}:zg&&!v4?(jf=(Ng=new zg).port2,Ng.port1.onmessage=Xg,Xn=h4(jf.postMessage,jf)):ce.addEventListener&&Gg(ce.postMessage)&&!ce.importScripts&&Go&&Go.protocol!=="file:"&&!zT(Vg)?(Xn=Vg,ce.addEventListener("message",Xg,!1)):Xn=Hg in kg("script")?function(r){jg.appendChild(kg("script"))[Hg]=function(){jg.removeChild(this),sv(r)}}:function(r){setTimeout(zf(r),0)});var HT={set:$c},Wg=Rt,b4=fe,x4=Object.getOwnPropertyDescriptor,XT=function(){this.head=null,this.tail=null};XT.prototype={add:function(r){var t={item:r,next:null},e=this.tail;e?e.next=t:this.head=t,this.tail=t},get:function(){var r=this.head;if(r)return(this.head=r.next)===null&&(this.tail=null),r.item}};var Vn,Hf,Xf,Vf,Yg,VT=XT,T4=/ipad|iphone|ipod/i.test(ku)&&typeof Pebble<"u",S4=/web0s(?!.*chrome)/i.test(ku),Si=Rt,w4=function(r){if(!b4)return Wg[r];var t=x4(Wg,r);return t&&t.value},qg=na,Wf=HT.set,E4=VT,O4=$T,P4=T4,C4=S4,Yf=Qu,Kg=Si.MutationObserver||Si.WebKitMutationObserver,Zg=Si.document,Jg=Si.process,as=Si.Promise,zc=w4("queueMicrotask");if(!zc){var ss=new E4,us=function(){var r,t;for(Yf&&(r=Jg.domain)&&r.exit();t=ss.get();)try{t()}catch(e){throw ss.head&&Vn(),e}r&&r.enter()};O4||Yf||C4||!Kg||!Zg?!P4&&as&&as.resolve?((Vf=as.resolve(void 0)).constructor=as,Yg=qg(Vf.then,Vf),Vn=function(){Yg(us)}):Yf?Vn=function(){Jg.nextTick(us)}:(Wf=qg(Wf,Si),Vn=function(){Wf(us)}):(Hf=!0,Xf=Zg.createTextNode(""),new Kg(us).observe(Xf,{characterData:!0}),Vn=function(){Xf.data=Hf=!Hf}),zc=function(r){ss.head||Vn(),ss.add(r)}}var A4=zc,aa=function(r){try{return{error:!1,value:r()}}catch(t){return{error:!0,value:t}}},_n=Rt.Promise,WT=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",R4=!WT&&!Qu&&typeof window=="object"&&typeof document=="object",I4=Rt,mo=_n,M4=Vt,F4=H1,D4=J1,B4=re,N4=R4,L4=WT,qf=qp,Qg=mo&&mo.prototype,U4=B4("species"),YT=M4(I4.PromiseRejectionEvent),G4=F4("Promise",function(){var r=D4(mo),t=r!==String(mo);if(!t&&qf===66||!Qg.catch||!Qg.finally)return!0;if(!qf||qf<51||!/native code/.test(r)){var e=new mo(function(i){i(1)}),n=function(i){i(function(){},function(){})};if((e.constructor={})[U4]=n,!(e.then(function(){})instanceof n))return!0}return!t&&(N4||L4)&&!YT}),sa={CONSTRUCTOR:G4,REJECTION_EVENT:YT},yr={},t_=nr,j4=TypeError,k4=function(r){var t,e;this.promise=new r(function(n,i){if(t!==void 0||e!==void 0)throw new j4("Bad Promise constructor");t=n,e=i}),this.resolve=t_(t),this.reject=t_(e)};yr.f=function(r){return new k4(r)};var Kf,e_,$4=Gt,lu=Qu,jr=Rt,ua=Oe,z4=qu,H4=ia,X4=function(r){var t=t4(r);r4&&t&&!t[Lg]&&e4(t,Lg,{configurable:!0,get:function(){return this}})},V4=nr,Hc=Vt,W4=qt,Y4=ov,q4=kT,qT=HT.set,uv=A4,K4=function(r,t){try{arguments.length===1?console.error(r):console.error(r,t)}catch{}},Z4=aa,J4=VT,KT=Vr,Xc=_n,ZT=sa,JT=yr,Ms="Promise",r_=ZT.CONSTRUCTOR,Q4=ZT.REJECTION_EVENT,Zf=KT.getterFor(Ms),tk=KT.set,ek=Xc&&Xc.prototype,qi=Xc,Jf=ek,QT=jr.TypeError,Vc=jr.document,lv=jr.process,Wc=JT.f,rk=Wc,nk=!!(Vc&&Vc.createEvent&&jr.dispatchEvent),tS="unhandledrejection",eS=function(r){var t;return!(!W4(r)||!Hc(t=r.then))&&t},rS=function(r,t){var e,n,i,o=t.value,a=t.state===1,s=a?r.ok:r.fail,u=r.resolve,l=r.reject,f=r.domain;try{s?(a||(t.rejection===2&&ok(t),t.rejection=1),s===!0?e=o:(f&&f.enter(),e=s(o),f&&(f.exit(),i=!0)),e===r.promise?l(new QT("Promise-chain cycle")):(n=eS(e))?ua(n,e,u,l):u(e)):l(o)}catch(c){f&&!i&&f.exit(),l(c)}},nS=function(r,t){r.notified||(r.notified=!0,uv(function(){for(var e,n=r.reactions;e=n.get();)rS(e,r);r.notified=!1,t&&!r.rejection&&ik(r)}))},iS=function(r,t,e){var n,i;nk?((n=Vc.createEvent("Event")).promise=t,n.reason=e,n.initEvent(r,!1,!0),jr.dispatchEvent(n)):n={promise:t,reason:e},!Q4&&(i=jr["on"+r])?i(n):r===tS&&K4("Unhandled promise rejection",e)},ik=function(r){ua(qT,jr,function(){var t,e=r.facade,n=r.value;if(n_(r)&&(t=Z4(function(){lu?lv.emit("unhandledRejection",n,e):iS(tS,e,n)}),r.rejection=lu||n_(r)?2:1,t.error))throw t.value})},n_=function(r){return r.rejection!==1&&!r.parent},ok=function(r){ua(qT,jr,function(){var t=r.facade;lu?lv.emit("rejectionHandled",t):iS("rejectionhandled",t,r.value)})},ii=function(r,t,e){return function(n){r(t,n,e)}},li=function(r,t,e){r.done||(r.done=!0,e&&(r=e),r.value=t,r.state=2,nS(r,!0))},Yc=function(r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(r.facade===t)throw new QT("Promise can't be resolved itself");var n=eS(t);n?uv(function(){var i={done:!1};try{ua(n,t,ii(Yc,i,r),ii(li,i,r))}catch(o){li(i,o,r)}}):(r.value=t,r.state=1,nS(r,!1))}catch(i){li({done:!1},i,r)}}};r_&&(Jf=(qi=function(r){Y4(this,Jf),V4(r),ua(Kf,this);var t=Zf(this);try{r(ii(Yc,t),ii(li,t))}catch(e){li(t,e)}}).prototype,(Kf=function(r){tk(this,{type:Ms,done:!1,notified:!1,parent:!1,reactions:new J4,rejection:!1,state:0,value:void 0})}).prototype=z4(Jf,"then",function(r,t){var e=Zf(this),n=Wc(q4(this,qi));return e.parent=!0,n.ok=!Hc(r)||r,n.fail=Hc(t)&&t,n.domain=lu?lv.domain:void 0,e.state===0?e.reactions.add(n):uv(function(){rS(n,e)}),n.promise}),e_=function(){var r=new Kf,t=Zf(r);this.promise=r,this.resolve=ii(Yc,t),this.reject=ii(li,t)},JT.f=Wc=function(r){return r===qi||r===void 0?new e_(r):rk(r)}),$4({global:!0,wrap:!0,forced:r_},{Promise:qi}),H4(qi,Ms,!1,!0),X4(Ms);var oS=re("iterator"),aS=!1;try{var ak=0,i_={next:function(){return{done:!!ak++}},return:function(){aS=!0}};i_[oS]=function(){return this},Array.from(i_,function(){throw 2})}catch{}var sk=_n,uk=function(r,t){try{if(!t&&!aS)return!1}catch{return!1}var e=!1;try{var n={};n[oS]=function(){return{next:function(){return{done:e=!0}}}},r(n)}catch{}return e},tl=sa.CONSTRUCTOR||!uk(function(r){sk.all(r).then(void 0,function(){})}),lk=Oe,fk=nr,hk=yr,ck=aa,dk=Mn;Gt({target:"Promise",stat:!0,forced:tl},{all:function(r){var t=this,e=hk.f(t),n=e.resolve,i=e.reject,o=ck(function(){var a=fk(t.resolve),s=[],u=0,l=1;dk(r,function(f){var c=u++,h=!1;l++,lk(a,t,f).then(function(d){h||(h=!0,s[c]=d,--l||n(s))},i)}),--l||n(s)});return o.error&&i(o.value),e.promise}});var pk=Gt,vk=sa.CONSTRUCTOR;_n&&_n.prototype,pk({target:"Promise",proto:!0,forced:vk,real:!0},{catch:function(r){return this.then(void 0,r)}});var mk=Oe,yk=nr,gk=yr,_k=aa,bk=Mn;Gt({target:"Promise",stat:!0,forced:tl},{race:function(r){var t=this,e=gk.f(t),n=e.reject,i=_k(function(){var o=yk(t.resolve);bk(r,function(a){mk(o,t,a).then(e.resolve,n)})});return i.error&&n(i.value),e.promise}});var xk=yr;Gt({target:"Promise",stat:!0,forced:sa.CONSTRUCTOR},{reject:function(r){var t=xk.f(this);return(0,t.reject)(r),t.promise}});var Tk=or,Sk=qt,wk=yr,sS=function(r,t){if(Tk(r),Sk(t)&&t.constructor===r)return t;var e=wk.f(r);return(0,e.resolve)(t),e.promise},Ek=Gt,Ok=_n,Pk=sa.CONSTRUCTOR,Ck=sS,Ak=Hr("Promise"),Rk=!Pk;Ek({target:"Promise",stat:!0,forced:!0},{resolve:function(r){return Ck(Rk&&this===Ak?Ok:this,r)}});var Ik=Oe,Mk=nr,Fk=yr,Dk=aa,Bk=Mn;Gt({target:"Promise",stat:!0,forced:tl},{allSettled:function(r){var t=this,e=Fk.f(t),n=e.resolve,i=e.reject,o=Dk(function(){var a=Mk(t.resolve),s=[],u=0,l=1;Bk(r,function(f){var c=u++,h=!1;l++,Ik(a,t,f).then(function(d){h||(h=!0,s[c]={status:"fulfilled",value:d},--l||n(s))},function(d){h||(h=!0,s[c]={status:"rejected",reason:d},--l||n(s))})}),--l||n(s)});return o.error&&i(o.value),e.promise}});var Nk=Oe,Lk=nr,Uk=Hr,Gk=yr,jk=aa,kk=Mn,o_="No one promise resolved";Gt({target:"Promise",stat:!0,forced:tl},{any:function(r){var t=this,e=Uk("AggregateError"),n=Gk.f(t),i=n.resolve,o=n.reject,a=jk(function(){var s=Lk(t.resolve),u=[],l=0,f=1,c=!1;kk(r,function(h){var d=l++,p=!1;f++,Nk(s,t,h).then(function(v){p||c||(c=!0,i(v))},function(v){p||c||(p=!0,u[d]=v,--f||o(new e(u,o_)))})}),--f||o(new e(u,o_))});return a.error&&o(a.value),n.promise}});var $k=yr;Gt({target:"Promise",stat:!0},{withResolvers:function(){var r=$k.f(this);return{promise:r.promise,resolve:r.resolve,reject:r.reject}}});var zk=Gt,qc=_n,Hk=Et,Xk=Hr,Vk=Vt,Wk=kT,a_=sS,Yk=qc&&qc.prototype;zk({target:"Promise",proto:!0,real:!0,forced:!!qc&&Hk(function(){Yk.finally.call({then:function(){}},function(){})})},{finally:function(r){var t=Wk(this,Xk("Promise")),e=Vk(r);return this.then(e?function(n){return a_(t,r()).then(function(){return n})}:r,e?function(n){return a_(t,r()).then(function(){throw n})}:r)}});var fv=Ut,qk=Hu,Kk=av,Zk=ju,Jk=fv("".charAt),s_=fv("".charCodeAt),Qk=fv("".slice),t5=function(r){return function(t,e){var n,i,o=Kk(Zk(t)),a=qk(e),s=o.length;return a<0||a>=s?r?"":void 0:(n=s_(o,a))<55296||n>56319||a+1===s||(i=s_(o,a+1))<56320||i>57343?r?Jk(o,a):n:r?Qk(o,a,a+2):i-56320+(n-55296<<10)+65536}},e5={charAt:t5(!0)}.charAt,r5=av,uS=Vr,n5=xT,u_=TT,lS="String Iterator",i5=uS.set,o5=uS.getterFor(lS);n5(String,"String",function(r){i5(this,{type:lS,string:r5(r),index:0})},function(){var r,t=o5(this),e=t.string,n=t.index;return n>=e.length?u_(void 0,!0):(r=e5(e,n),t.index+=r.length,u_(r,!1))});var a5=On(Cn.Promise),rn=function(){function r(){Rn(this,r),yt(this,"method","GET"),yt(this,"dataType","text"),yt(this,"responseType","utf-8"),yt(this,"onreadystatechange",qe),yt(this,"onloadend",qe),yt(this,"onerror",qe),yt(this,"event",{}),yt(this,"responseHeader",{}),yt(this,"header",{Accept:"*/*"})}return In(r,[{key:"open",value:function(t,e){this.method=t,this.url=e,this.readyState=r.OPENED}},{key:"setRequestHeader",value:function(t,e){this.header[t]=e}},{key:"addEventListener",value:function(t,e){this.event[t]=this.event[t]||[],this.event[t].push(e)}},{key:"getResponseHeader",value:function(t){return this.responseHeader&&this.responseHeader[t]}},{key:"getAllResponseHeaders",value:function(){var t,e=this.responseHeader||{};return fj(t=bj(e)).call(t,function(n){return n.join(": ")}).join(`\r
`)}},{key:"emit",value:function(t){var e=this,n=this.event[t],i={type:t,target:this,method:this.method,response:this.response,responseText:this.responseText,responseType:this.responseType};n&&n.forEach(function(o){return o.call(e,i)}),t==="load"&&this.onload&&this.onload(i),t==="error"&&this.onerror&&this.onerror(i)}},{key:"readFile",value:function(t,e){return new a5(function(n,i){wx.getFileSystemManager().readFile({encoding:e,filePath:t,success:function(o){return n(o.data)},fail:i})})}},{key:"send",value:function(t){var e=this;this.readyState=r.LOADING,this.url.match(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}/)?wx.request({data:t,url:this.url,header:this.header,method:this.method,dataType:this.dataType,responseType:this.responseType==="text"||this.responseType==="arraybuffer"?this.responseType:"text",success:function(n){e.readyState=r.DONE,e.responseHeader=n.header,e.status=n.statusCode,e.response=e.responseText=n.data,e.emit("load"),e.emit("readystatechange"),e.onloadend(),e.onreadystatechange()},fail:function(n){console.log("error",n),e.readyState=r.DONE,e.status=n.statusCode,e.response=e.responseText=n,e.responseHeader=n.header,e.emit("error"),e.emit("readystatechange"),e.onerror(),e.onreadystatechange()}}):(this.readyState=r.DONE,this.status=200,this.readFile(this.url,this.responseType==="text"?"utf-8":this.responseType).then(function(n){e.response=e.responseText=n,e.emit("readystatechange"),e.emit("load")}).catch(function(n){e.response=e.responseText=n,e.emit("error")}))}}])}();yt(rn,"UNSEND",0),yt(rn,"OPENED",1),yt(rn,"HEADERS_RECEIVED",2),yt(rn,"LOADING",3),yt(rn,"DONE",4);var s5=wx.getSystemInfoSync().platform;if(GameGlobal.canvas=ui,ui.addEventListener=Kn.addEventListener,ui.removeEventListener=Kn.removeEventListener,s5==="devtools")for(var Qf in Object.defineProperties(window,{Image:{value:Rc},Element:{value:au},ontouchstart:{value:qe},WebSocket:{value:ni},addEventListener:{value:qe},TouchEvent:{value:kc},XMLDocument:{value:Mg},localStorage:{value:Fg},XMLHttpRequest:{value:rn},HTMLVideoElement:{value:Yy},HTMLImageElement:{value:Wy},HTMLCanvasElement:{value:Vy}}),Kn){var l_=MN(window.document,Qf);l_&&!l_.configurable||Object.defineProperty(window.document,Qf,{value:Kn[Qf]})}else GameGlobal.Image=Rc,GameGlobal.self=GameGlobal,GameGlobal.window=GameGlobal,GameGlobal.ontouchstart=qe,GameGlobal.document=Kn,GameGlobal.location={origin:"",href:""},GameGlobal.WebSocket=ni,GameGlobal.navigator={language:"zh-cn",appVersion:"5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36",userAgent:"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36",onLine:!0},GameGlobal.TouchEvent=kc,GameGlobal.addEventListener=qe,GameGlobal.performance=oj,GameGlobal.XMLDocument=Mg,GameGlobal.removeEventListener=qe,GameGlobal.localStorage=Fg,GameGlobal.XMLHttpRequest=rn,GameGlobal.HTMLImageElement=Ic.constructor.name!=="Object"?Ic.constructor:Wy,GameGlobal.HTMLVideoElement=Yy,GameGlobal.HTMLCanvasElement=Vy,GameGlobal.WebGLRenderingContext=GameGlobal.WebGLRenderingContext||{};/*!
 * @pixi/unsafe-eval - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/unsafe-eval is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var u5={float:function(r,t,e,n){e!==n&&(e.v=n,r.uniform1f(t,n))},vec2:function(r,t,e,n){(e[0]!==n[0]||e[1]!==n[1])&&(e[0]=n[0],e[1]=n[1],r.uniform2f(t,n[0],n[1]))},vec3:function(r,t,e,n){(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2])&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],r.uniform3f(t,n[0],n[1],n[2]))},int:function(r,t,e,n){r.uniform1i(t,n)},ivec2:function(r,t,e,n){r.uniform2i(t,n[0],n[1])},ivec3:function(r,t,e,n){r.uniform3i(t,n[0],n[1],n[2])},ivec4:function(r,t,e,n){r.uniform4i(t,n[0],n[1],n[2],n[3])},uint:function(r,t,e,n){r.uniform1ui(t,n)},uvec2:function(r,t,e,n){r.uniform2ui(t,n[0],n[1])},uvec3:function(r,t,e,n){r.uniform3ui(t,n[0],n[1],n[2])},uvec4:function(r,t,e,n){r.uniform4ui(t,n[0],n[1],n[2],n[3])},bool:function(r,t,e,n){e!==n&&(e.v=n,r.uniform1i(t,Number(n)))},bvec2:function(r,t,e,n){r.uniform2i(t,n[0],n[1])},bvec3:function(r,t,e,n){r.uniform3i(t,n[0],n[1],n[2])},bvec4:function(r,t,e,n){r.uniform4i(t,n[0],n[1],n[2],n[3])},mat2:function(r,t,e,n){r.uniformMatrix2fv(t,!1,n)},mat3:function(r,t,e,n){r.uniformMatrix3fv(t,!1,n)},mat4:function(r,t,e,n){r.uniformMatrix4fv(t,!1,n)},sampler2D:function(r,t,e,n){r.uniform1i(t,n)},samplerCube:function(r,t,e,n){r.uniform1i(t,n)},sampler2DArray:function(r,t,e,n){r.uniform1i(t,n)}},l5={float:function(r,t,e,n){r.uniform1fv(t,n)},vec2:function(r,t,e,n){r.uniform2fv(t,n)},vec3:function(r,t,e,n){r.uniform3fv(t,n)},vec4:function(r,t,e,n){r.uniform4fv(t,n)},int:function(r,t,e,n){r.uniform1iv(t,n)},ivec2:function(r,t,e,n){r.uniform2iv(t,n)},ivec3:function(r,t,e,n){r.uniform3iv(t,n)},ivec4:function(r,t,e,n){r.uniform4iv(t,n)},uint:function(r,t,e,n){r.uniform1uiv(t,n)},uvec2:function(r,t,e,n){r.uniform2uiv(t,n)},uvec3:function(r,t,e,n){r.uniform3uiv(t,n)},uvec4:function(r,t,e,n){r.uniform4uiv(t,n)},bool:function(r,t,e,n){r.uniform1iv(t,n)},bvec2:function(r,t,e,n){r.uniform2iv(t,n)},bvec3:function(r,t,e,n){r.uniform3iv(t,n)},bvec4:function(r,t,e,n){r.uniform4iv(t,n)},sampler2D:function(r,t,e,n){r.uniform1iv(t,n)},samplerCube:function(r,t,e,n){r.uniform1iv(t,n)},sampler2DArray:function(r,t,e,n){r.uniform1iv(t,n)}};function f5(r,t,e,n,i){var o=0,a=null,s=null,u=i.gl;for(var l in r.uniforms){var f=t[l],c=n[l],h=e[l],d=r.uniforms[l];if(!f){d.group&&i.shader.syncUniformGroup(c);continue}if(f.type==="float"&&f.size===1)c!==h.value&&(h.value=c,u.uniform1f(h.location,c));else if((f.type==="sampler2D"||f.type==="samplerCube"||f.type==="sampler2DArray")&&f.size===1&&!f.isArray)i.texture.bind(c,o),h.value!==o&&(h.value=o,u.uniform1i(h.location,o)),o++;else if(f.type==="mat3"&&f.size===1)d.a!==void 0?u.uniformMatrix3fv(h.location,!1,c.toArray(!0)):u.uniformMatrix3fv(h.location,!1,c);else if(f.type==="vec2"&&f.size===1)d.x!==void 0?(s=h.value,a=c,(s[0]!==a.x||s[1]!==a.y)&&(s[0]=a.x,s[1]=a.y,u.uniform2f(h.location,a.x,a.y))):(s=h.value,a=c,(s[0]!==a[0]||s[1]!==a[1])&&(s[0]=a[0],s[1]=a[1],u.uniform2f(h.location,a[0],a[1])));else if(f.type==="vec4"&&f.size===1)d.width!==void 0?(s=h.value,a=c,(s[0]!==a.x||s[1]!==a.y||s[2]!==a.width||s[3]!==a.height)&&(s[0]=a.x,s[1]=a.y,s[2]=a.width,s[3]=a.height,u.uniform4f(h.location,a.x,a.y,a.width,a.height))):(s=h.value,a=c,(s[0]!==a[0]||s[1]!==a[1]||s[2]!==a[2]||s[3]!==a[3])&&(s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],u.uniform4f(h.location,a[0],a[1],a[2],a[3])));else{var p=f.size===1?u5:l5;p[f.type].call(null,u,h.location,h.value,c)}}}function h5(r){var t=r.ShaderSystem;if(!t)throw new Error("Unable to patch ShaderSystem, class not found.");Object.assign(t.prototype,{systemCheck:function(){},syncUniforms:function(e,n){var i=this,o=i.shader,a=i.renderer;f5(e,o.program.uniformData,n.uniformData,e.uniforms,a)}})}function f_(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function ls(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?f_(Object(e),!0).forEach(function(n){lr(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):f_(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function c5(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,fS(n.key),n)}}function lr(r,t,e){return(t=fS(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function fu(r){return fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fu(r)}function Kc(r,t){return Kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Kc(r,t)}function fr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function d5(r,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fr(r)}function p5(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=fu(r);if(t){var i=fu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return d5(this,e)}}function h_(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function c_(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=function(u,l){if(u){if(typeof u=="string")return h_(u,l);var f=Object.prototype.toString.call(u).slice(8,-1);return f==="Object"&&u.constructor&&(f=u.constructor.name),f==="Map"||f==="Set"?Array.from(u):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?h_(u,l):void 0}}(r))||t){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){e=e.call(r)},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||e.return==null||e.return()}finally{if(s)throw o}}}}function fS(r){var t=function(e,n){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,n);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}(r,"string");return typeof t=="symbol"?t:String(t)}var d_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v5(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Zc={},m5={get exports(){return Zc},set exports(r){Zc=r}},gr=function(r){try{return!!r()}catch{return!0}},el=!gr(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),hS=el,cS=Function.prototype,Jc=cS.call,y5=hS&&cS.bind.bind(Jc,Jc),_r=hS?y5:function(r){return function(){return Jc.apply(r,arguments)}},dS=_r({}.isPrototypeOf),fs=function(r){return r&&r.Math==Math&&r},Fn=fs(typeof globalThis=="object"&&globalThis)||fs(typeof window=="object"&&window)||fs(typeof self=="object"&&self)||fs(typeof d_=="object"&&d_)||function(){return this}()||Function("return this")(),g5=el,pS=Function.prototype,p_=pS.apply,v_=pS.call,_5=typeof Reflect=="object"&&Reflect.apply||(g5?v_.bind(p_):function(){return v_.apply(p_,arguments)}),vS=_r,b5=vS({}.toString),x5=vS("".slice),rl=function(r){return x5(b5(r),8,-1)},T5=rl,S5=_r,Qc=function(r){if(T5(r)==="Function")return S5(r)},th=typeof document=="object"&&document.all,nl={all:th,IS_HTMLDDA:th===void 0&&th!==void 0},w5=nl.all,ar=nl.IS_HTMLDDA?function(r){return typeof r=="function"||r===w5}:function(r){return typeof r=="function"},mS={},la=!gr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),E5=el,hs=Function.prototype.call,hv=E5?hs.bind(hs):function(){return hs.apply(hs,arguments)},yS={},gS={}.propertyIsEnumerable,_S=Object.getOwnPropertyDescriptor,O5=_S&&!gS.call({1:2},1);yS.f=O5?function(r){var t=_S(this,r);return!!t&&t.enumerable}:gS;var Sr,Fs,cv=function(r,t){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:t}},P5=gr,C5=rl,eh=Object,A5=_r("".split),R5=P5(function(){return!eh("z").propertyIsEnumerable(0)})?function(r){return C5(r)=="String"?A5(r,""):eh(r)}:eh,bS=function(r){return r==null},I5=bS,M5=TypeError,xS=function(r){if(I5(r))throw M5("Can't call method on "+r);return r},F5=R5,D5=xS,TS=function(r){return F5(D5(r))},m_=ar,B5=nl.all,fa=nl.IS_HTMLDDA?function(r){return typeof r=="object"?r!==null:m_(r)||r===B5}:function(r){return typeof r=="object"?r!==null:m_(r)},dv={},rh=dv,nh=Fn,N5=ar,y_=function(r){return N5(r)?r:void 0},pv=function(r,t){return arguments.length<2?y_(rh[r])||y_(nh[r]):rh[r]&&rh[r][t]||nh[r]&&nh[r][t]},SS=Fn,ih=pv("navigator","userAgent")||"",g_=SS.process,__=SS.Deno,b_=g_&&g_.versions||__&&__.version,x_=b_&&b_.v8;x_&&(Fs=(Sr=x_.split("."))[0]>0&&Sr[0]<4?1:+(Sr[0]+Sr[1])),!Fs&&ih&&(!(Sr=ih.match(/Edge\/(\d+)/))||Sr[1]>=74)&&(Sr=ih.match(/Chrome\/(\d+)/))&&(Fs=+Sr[1]);var wS=Fs,T_=wS,L5=gr,ES=!!Object.getOwnPropertySymbols&&!L5(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&T_&&T_<41}),OS=ES&&!Symbol.sham&&typeof Symbol.iterator=="symbol",U5=pv,G5=ar,j5=dS,k5=Object,PS=OS?function(r){return typeof r=="symbol"}:function(r){var t=U5("Symbol");return G5(t)&&j5(t.prototype,k5(r))},$5=String,z5=ar,H5=function(r){try{return $5(r)}catch{return"Object"}},X5=TypeError,CS=function(r){if(z5(r))return r;throw X5(H5(r)+" is not a function")},V5=CS,W5=bS,S_=hv,w_=ar,E_=fa,Y5=TypeError,td={},q5={get exports(){return td},set exports(r){td=r}},O_=Fn,K5=Object.defineProperty,Z5=function(r,t){try{K5(O_,r,{value:t,configurable:!0,writable:!0})}catch{O_[r]=t}return t},P_="__core-js_shared__",AS=Fn[P_]||Z5(P_,{}),C_=AS;(q5.exports=function(r,t){return C_[r]||(C_[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.26.1",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"});var J5=xS,Q5=Object,t$=function(r){return Q5(J5(r))},e$=_r({}.hasOwnProperty),vv=Object.hasOwn||function(r,t){return e$(t$(r),t)},r$=_r,n$=0,i$=Math.random(),o$=r$(1 .toString),a$=Fn,A_=vv,s$=function(r){return"Symbol("+(r===void 0?"":r)+")_"+o$(++n$+i$,36)},R_=ES,RS=OS,Ki=td("wks"),dn=a$.Symbol,I_=dn&&dn.for,u$=RS?dn:dn&&dn.withoutSetter||s$,ha=function(r){if(!A_(Ki,r)||!R_&&typeof Ki[r]!="string"){var t="Symbol."+r;R_&&A_(dn,r)?Ki[r]=dn[r]:Ki[r]=RS&&I_?I_(t):u$(t)}return Ki[r]},l$=hv,M_=fa,F_=PS,f$=function(r,t){var e=r[t];return W5(e)?void 0:V5(e)},h$=function(r,t){var e,n;if(w_(e=r.toString)&&!E_(n=S_(e,r))||w_(e=r.valueOf)&&!E_(n=S_(e,r)))return n;throw Y5("Can't convert object to primitive value")},c$=TypeError,d$=ha("toPrimitive"),p$=function(r,t){if(!M_(r)||F_(r))return r;var e,n=f$(r,d$);if(n){if(e=l$(n,r,t),!M_(e)||F_(e))return e;throw c$("Can't convert object to primitive value")}return h$(r)},v$=PS,mv=function(r){var t=p$(r,"string");return v$(t)?t:t+""},D_=fa,ed=Fn.document,m$=D_(ed)&&D_(ed.createElement),y$=function(r){return m$?ed.createElement(r):{}},IS=!la&&!gr(function(){return Object.defineProperty(y$("div"),"a",{get:function(){return 7}}).a!=7}),g$=la,_$=hv,b$=yS,x$=cv,T$=TS,S$=mv,w$=vv,E$=IS,B_=Object.getOwnPropertyDescriptor;mS.f=g$?B_:function(r,t){if(r=T$(r),t=S$(t),E$)try{return B_(r,t)}catch{}if(w$(r,t))return x$(!_$(b$.f,r,t),r[t])};var O$=gr,P$=ar,C$=/#|\.prototype\./,ca=function(r,t){var e=R$[A$(r)];return e==M$||e!=I$&&(P$(t)?O$(t):!!t)},A$=ca.normalize=function(r){return String(r).replace(C$,".").toLowerCase()},R$=ca.data={},I$=ca.NATIVE="N",M$=ca.POLYFILL="P",F$=ca,D$=CS,B$=el,N$=Qc(Qc.bind),yv={},L$=la&&gr(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),U$=fa,G$=String,j$=TypeError,k$=la,$$=IS,z$=L$,cs=function(r){if(U$(r))return r;throw j$(G$(r)+" is not an object")},N_=mv,H$=TypeError,oh=Object.defineProperty,X$=Object.getOwnPropertyDescriptor,ah="enumerable",sh="configurable",uh="writable";yv.f=k$?z$?function(r,t,e){if(cs(r),t=N_(t),cs(e),typeof r=="function"&&t==="prototype"&&"value"in e&&uh in e&&!e[uh]){var n=X$(r,t);n&&n[uh]&&(r[t]=e.value,e={configurable:sh in e?e[sh]:n[sh],enumerable:ah in e?e[ah]:n[ah],writable:!1})}return oh(r,t,e)}:oh:function(r,t,e){if(cs(r),t=N_(t),cs(e),$$)try{return oh(r,t,e)}catch{}if("get"in e||"set"in e)throw H$("Accessors not supported");return"value"in e&&(r[t]=e.value),r};var V$=yv,W$=cv,Y$=la?function(r,t,e){return V$.f(r,t,W$(1,e))}:function(r,t,e){return r[t]=e,r},ds=Fn,q$=_5,K$=Qc,Z$=ar,J$=mS.f,Q$=F$,Wn=dv,t8=function(r,t){return D$(r),t===void 0?r:B$?N$(r,t):function(){return r.apply(t,arguments)}},Yn=Y$,L_=vv,e8=function(r){var t=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,n)}return new r(e,n,i)}return q$(r,this,arguments)};return t.prototype=r.prototype,t},r8=rl,n8=Array.isArray||function(r){return r8(r)=="Array"},MS={};MS[ha("toStringTag")]="z";var i8=String(MS)==="[object z]",o8=ar,Ds=rl,a8=ha("toStringTag"),s8=Object,u8=Ds(function(){return arguments}())=="Arguments",l8=i8?Ds:function(r){var t,e,n;return r===void 0?"Undefined":r===null?"Null":typeof(e=function(i,o){try{return i[o]}catch{}}(t=s8(r),a8))=="string"?e:u8?Ds(t):(n=Ds(t))=="Object"&&o8(t.callee)?"Arguments":n},f8=ar,rd=AS,h8=_r(Function.toString);f8(rd.inspectSource)||(rd.inspectSource=function(r){return h8(r)});var c8=rd.inspectSource,d8=_r,p8=gr,FS=ar,v8=l8,m8=c8,DS=function(){},y8=[],BS=pv("Reflect","construct"),gv=/^\s*(?:class|function)\b/,g8=d8(gv.exec),_8=!gv.exec(DS),Zi=function(r){if(!FS(r))return!1;try{return BS(DS,y8,r),!0}catch{return!1}},NS=function(r){if(!FS(r))return!1;switch(v8(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _8||!!g8(gv,m8(r))}catch{return!0}};NS.sham=!0;var b8=!BS||p8(function(){var r;return Zi(Zi.call)||!Zi(Object)||!Zi(function(){r=!0})||r})?NS:Zi,x8=Math.ceil,T8=Math.floor,S8=Math.trunc||function(r){var t=+r;return(t>0?T8:x8)(t)},LS=function(r){var t=+r;return t!=t||t===0?0:S8(t)},w8=LS,E8=Math.max,O8=Math.min,P8=LS,C8=Math.min,A8=function(r){return r>0?C8(P8(r),9007199254740991):0},R8=mv,I8=yv,M8=cv,F8=gr,D8=wS,B8=ha("species"),N8=_r([].slice),L8=function(r,t){var e,n,i,o,a,s,u,l,f=r.target,c=r.global,h=r.stat,d=c?ds:h?ds[f]:(ds[f]||{}).prototype,p=c?Wn:Wn[f]||Yn(Wn,f,{})[f],v=p.prototype;for(i in t)e=!Q$(c?i:f+(h?".":"#")+i,r.forced)&&d&&L_(d,i),a=p[i],e&&(s=r.dontCallGetSet?(l=J$(d,i))&&l.value:d[i]),o=e&&s?s:t[i],e&&typeof a==typeof o||(u=r.bind&&e?t8(o,ds):r.wrap&&e?e8(o):Z$(o)?K$(o):o,(r.sham||o&&o.sham||a&&a.sham)&&Yn(u,"sham",!0),Yn(p,i,u),L_(Wn,n=f+"Prototype")||Yn(Wn,n,{}),Yn(Wn[n],i,o),r.real&&v&&!v[i]&&Yn(v,i,o))},U_=n8,U8=b8,G8=fa,G_=function(r,t){var e=w8(r);return e<0?E8(e+t,0):O8(e,t)},j8=function(r){return A8(r.length)},k8=TS,$8=function(r,t,e){var n=R8(t);n in r?I8.f(r,n,M8(0,e)):r[n]=e},z8=ha,H8=N8,X8=function(r){return D8>=51||!F8(function(){var t=[];return(t.constructor={})[B8]=function(){return{foo:1}},t[r](Boolean).foo!==1})}("slice"),V8=z8("species"),lh=Array,W8=Math.max;L8({target:"Array",forced:!X8},{slice:function(r,t){var e,n,i,o=k8(this),a=j8(o),s=G_(r,a),u=G_(t===void 0?a:t,a);if(U_(o)&&(e=o.constructor,(U8(e)&&(e===lh||U_(e.prototype))||G8(e)&&(e=e[V8])===null)&&(e=void 0),e===lh||e===void 0))return H8(o,s,u);for(n=new(e===void 0?lh:e)(W8(u-s,0)),i=0;s<u;s++,i++)s in o&&$8(n,i,o[s]);return n.length=i,n}});var Y8=dv,q8=function(r){return Y8[r+"Prototype"]}("Array").slice,K8=dS,Z8=q8,fh=Array.prototype,J8=function(r){var t=r.slice;return r===fh||K8(fh,r)&&t===fh.slice?Z8:t};m5.exports=J8;var Q8=v5(Zc),tz="ontouchstart"in window,ez="onpointerdown"in window,rz=function(r){(function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),a&&Kc(o,a)})(i,wn);var t,e,n=p5(i);function i(o,a){var s;return function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,i),lr(fr(s=n.call(this)),"_touch",{}),lr(fr(s),"_event",{}),lr(fr(s),"_view",null),lr(fr(s),"_cursor",null),lr(fr(s),"_resolution",1),lr(fr(s),"_renderer",null),lr(fr(s),"_point",new X),lr(fr(s),"_local",new X),s._renderer=o,s._view=o.view,s._view.style.touchAction="none",s._resolution=o.resolution,s._cursor=o.view.style.cursor,s.addEvents(),s}return t=i,e=[{key:"mapPositionToPoint",value:function(o,a,s){var u=this._view,l=1/this._resolution,f=u.parentElement?u.getBoundingClientRect():{width:0,height:0};o.x=(a-f.left)*(u.width/f.width)*l,o.y=(s-f.top)*(u.height/f.height)*l}},{key:"copyEvent",value:function(o){var a=o.changedTouches,s=this._point,u=this._event,l=this._renderer._lastObjectRendered;if(a){var f,c=c_(a);try{for(c.s();!(f=c.n()).done;){var h=f.value;this.mapPositionToPoint(s,h.pageX,h.pageY),u.origin=o,u.stopped=o.cancelBubble,u.id=h.identifier,u.x=s.x,u.y=s.y,u.target=this.hitTest(s,l),this.handle(u,l)}}catch(d){c.e(d)}finally{c.f()}}else this.mapPositionToPoint(s,o.pageX,o.pageY),u.origin=o,u.stopped=o.cancelBubble,u.id=o.pointerId,u.x=s.x,u.y=s.y,u.target=this.hitTest(s,l),this.handle(u,l)}},{key:"onDown",value:function(o){var a=this._event;a.target=null,a.stopped=!1,a.currentTarget=null,a.type="pointerdown",this.copyEvent(o)}},{key:"onUp",value:function(o){var a=this._event;a.target=null,a.stopped=!1,a.currentTarget=null,a.type="pointerup",this.copyEvent(o)}},{key:"onMove",value:function(o){var a=this._event;a.target=null,a.stopped=!1,a.currentTarget=null,a.type="pointermove",this.copyEvent(o)}},{key:"onCancel",value:function(o){var a=this._event;a.target=null,a.stopped=!1,a.currentTarget=null,a.type="pointercancel",this.copyEvent(o)}},{key:"contains",value:function(o,a){var s=!1;if(a.hitArea){var u=this._local;a.worldTransform.applyInverse(o,u),s=a.hitArea.contains(u.x,u.y)}else a.containsPoint&&(s=a.containsPoint(o));return s&&a._mask&&a._mask.containsPoint&&(s=a._mask.containsPoint(o)),s}},{key:"hitTest",value:function(o,a){for(var s,u=[a||this._renderer._lastObjectRendered];u.length;){var l,f=u.pop();if(f&&f.visible&&!f.isMask){var c=f.interactiveChildren&&((l=f.children)===null||l===void 0?void 0:l.length)&&f.children;if(this.contains(o,f)){var h=f.pointerEvents!=="none";if(h&&(s=f),c){u=Q8(c).call(c);continue}if(h)break}if(!f._mask&&c){var d,p=c_(c);try{for(p.s();!(d=p.n()).done;){var v=d.value;u.push(v)}}catch(m){p.e(m)}finally{p.f()}}}}for(;s;){if(s.interactive)return s;s=s.parent}}},{key:"handle",value:function(o,a){if(a&&a.visible){this.dispatch(o);var s=o.id,u=o.target,l=o.type,f=this._touch;f[s]=f[s]||{};var c=f[s][l];if(f[s][l]=u,l==="pointermove"&&c!==u&&(this._view.style.cursor=(u==null?void 0:u.cursor)||this._cursor),l==="pointermove"&&c!==u){var h=ls({},o);if(h.type="pointerenter",this.dispatch(h),!c)return;(h=ls({},o)).type="pointerout",h.target=c,this.dispatch(h)}if(l==="pointerup"){var d=f[s].pointerdown;if(delete f[s],d&&d!==u){var p=ls({},o);p.type="pointerupoutside",p.target=d,this.dispatch(p)}else if(d===u){var v=ls({},o);v.type="tap",v.target=u,this.dispatch(v)}}}}},{key:"dispatch",value:function(o){var a=o.target;for(o.x,o.y;a&&!o.stopped;)o.currentTarget=a,a.interactive&&a.emit(o.type,o),a=a.parent;o.currentTarget=null,this.emit(o.type,o)}},{key:"addEvents",value:function(){var o=this._view;ez?(o.addEventListener("pointerdown",this.onDown.bind(this)),o.addEventListener("pointerup",this.onUp.bind(this)),o.addEventListener("pointermove",this.onMove.bind(this)),o.addEventListener("pointercancel",this.onCancel.bind(this))):tz?(o.addEventListener("touchstart",this.onDown.bind(this)),o.addEventListener("touchend",this.onUp.bind(this)),o.addEventListener("touchmove",this.onMove.bind(this)),o.addEventListener("touchcancel",this.onCancel.bind(this))):(o.addEventListener("mousedown",this.onDown.bind(this)),o.addEventListener("mouseup",this.onUp.bind(this)),o.addEventListener("mousemove",this.onMove.bind(this)))}}],e&&c5(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();R.SORTABLE_CHILDREN=!0;R.PREFER_ENV=Ge.WEBGL;R.PRECISION_FRAGMENT=te.HIGH;R.SCALE_MODE=Qt.LINEAR;h5(QF);for(const r in ue._queue)for(const t of ue._queue[r])t.name==="interaction"&&ue.remove(t);ue.add({name:"interaction",ref:rz,type:[nt.RendererPlugin,nt.CanvasRendererPlugin]});const nz=`
#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,iz=`
#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord)
            : texture2DLodEXT(uSampler, coord, 0.0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Ve=Ht({menuBtn:{},screen:{w:0,h:0,rw:0,rh:0,dr:1,rdr:1},font:"",visible:!0,user:{level:0,token:"",name:"",avatar:"",diamond:5,settings:{music:!0,voice:!0}}}),{devicePixelRatio:oz,windowWidth:nd,windowHeight:id}=wx.getSystemInfoSync(),ut=Bt.shared,az=yi.shared,il=new st,sz=oz,bn=new Du({width:nd,height:id,view:canvas,antialias:!0,resolution:sz,backgroundColor:1448483,powerPreference:"high-performance"});bn.plugins.tilingSprite.shader=Qe.from(nz,iz,{globals:bn.globalUniforms});nE(()=>{const{screen:{width:r,height:t}}=bn;Ve.screen.dr=Math.min(r/750,t/1334),Ve.screen.w=r,Ve.screen.h=t,Ve.screen.rw=nd,Ve.screen.rh=id,Ve.screen.rdr=Math.min(nd/750,id/1334),Ve.menuBtn=wx.getMenuButtonBoundingClientRect()});bn.plugins.accessibility.destroy();bn.plugins.interaction.mapPositionToPoint=(r,t,e)=>{r.set(t,e)};ut.add(()=>bn.render(il));const Z=bn.screen;class j_{constructor(t={}){const{texture:e="assets/images/batteryBase.png",x:n=0,y:i=0,scale:o=1,id:a="default"}=t;this.sprite=Lt.from(e),this.sprite.anchor.set(.5,1),this.sprite.position.set(n,i),this.sprite.scale.set(o),this.id=a,this.name=t.name||"标准底座",this.price=t.price||0,this.unlocked=t.unlocked||!1,this.zOffset=t.zOffset||0,this.cannonPosition={x:n,y:i+this.zOffset}}updatePosition(t,e){this.sprite.position.set(t,e),this.cannonPosition={x:t,y:e+this.zOffset}}getCannonMountPosition(){return this.cannonPosition}addToContainer(t){t&&t.addChild(this.sprite)}removeFromContainer(){this.sprite.parent&&this.sprite.parent.removeChild(this.sprite)}changeTexture(t){this.sprite.texture=G.from(t)}}class uz{constructor(t={}){const{x:e=0,y:n=0,rotation:i=0,texture:o="assets/images/bullet.png",speed:a=10,power:s=1,size:u=1,explosionRadius:l=20,explosionEffect:f="default",type:c="default"}=t;this.sprite=Lt.from(o),this.sprite.anchor.set(.5),this.sprite.position.set(e,n),this.sprite.rotation=i,this.sprite.scale.set(u*.7);const h=i-Math.PI/2;this.directionX=Math.cos(h),this.directionY=Math.sin(h),this.speed=a,this.power=s,this.size=u*.7,this.explosionRadius=l,this.explosionEffect=f,this.type=c,this.isActive=!0,this.hasExploded=!1,this.isExploding=!1,this.collisionPoint=null,this.explosionConfig={default:{texture:"assets/images/boomEffect.png",duration:500,startScale:.5,endScale:1.5,startAlpha:1,endAlpha:0},fire:{texture:"assets/images/fireEffect.png",duration:700,startScale:.3,endScale:2,startAlpha:1,endAlpha:0},ice:{texture:"assets/images/iceEffect.png",duration:600,startScale:.4,endScale:1.8,startAlpha:.8,endAlpha:0}},this.explosionContainer=null}update(t){return this.isExploding||this.hasExploded||!this.isActive?!1:(this.sprite.position.x+=this.directionX*this.speed,this.sprite.position.y+=this.directionY*this.speed,this.sprite.position.x<-50||this.sprite.position.x>Z.width+50||this.sprite.position.y<-50||this.sprite.position.y>Z.height+50?(this.isActive=!1,!1):!0)}setCollisionPoint(t,e,n=!1){if(n){const i=this.sprite.width*.4,o=t+this.directionX*i,a=e+this.directionY*i;this.collisionPoint={x:o,y:a}}else this.collisionPoint={x:t,y:e}}explode(t,e=null,n=!1){return this.hasExploded||!t?null:(e&&this.setCollisionPoint(e.x,e.y,n),this.isActive=!1,this.hasExploded=!0,this.isExploding=!0,this.createExplosionEffect(t),{x:this.collisionPoint?this.collisionPoint.x:this.sprite.position.x,y:this.collisionPoint?this.collisionPoint.y:this.sprite.position.y,radius:this.explosionRadius,power:this.power,effectType:this.explosionEffect})}createExplosionEffect(t){const e=this.explosionConfig[this.explosionEffect]||this.explosionConfig.default,n=this.collisionPoint?this.collisionPoint.x:this.sprite.position.x,i=this.collisionPoint?this.collisionPoint.y:this.sprite.position.y;this.explosionContainer=new st,this.explosionContainer.position.set(n,i);const o=new tr;o.beginFill(16777215,.8),o.drawCircle(0,0,this.size*15),o.endFill(),o.alpha=.7,o.scale.set(.1),this.explosionContainer.addChild(o);const a=200,s=Date.now(),u=S=>{const O=Date.now()-s,w=Math.min(O/a,1),E=.1+w*1.5,P=.7*(1-w*1.2);o.scale.set(E),o.alpha=Math.max(0,P),w>=1&&(this.explosionContainer.removeChild(o),ut.remove(u))};ut.add(u);const l=new tr;l.lineStyle(2,16777215,.7),l.drawCircle(0,0,this.size*15),l.alpha=.5,l.scale.set(.2),this.explosionContainer.addChild(l);const f=400,c=Date.now(),h=S=>{const O=Date.now()-c,w=Math.min(O/f,1),E=.2+w*2,P=.5*(1-w),D=Math.max(.5,2*(1-w));l.scale.set(E),l.alpha=P,w<.9&&(l.clear(),l.lineStyle(D,16777215,.7),l.drawCircle(0,0,this.size*15)),w>=1&&(this.explosionContainer.removeChild(l),ut.remove(h))};ut.add(h);const d=Lt.from(e.texture);if(d.anchor.set(.5),d.position.set(0,0),d.scale.set(e.startScale*this.size*.5),d.alpha=e.startAlpha*.7,this.explosionContainer.addChild(d),t.addChild(this.explosionContainer),this.sprite.parent){const S=e.duration*.3,O=Date.now();this.directionX,this.directionY;const w=E=>{const P=Date.now()-O,D=Math.min(P/S,1);this.sprite.alpha=1-D,D>=1&&(this.sprite.parent&&this.sprite.parent.removeChild(this.sprite),ut.remove(w))};ut.add(w)}let p;switch(this.explosionEffect){case"fire":p=[16729344,16747520,16766720];break;case"ice":p=[11393254,8900331,11591910];break;default:p=[16777215,16753920,16776960]}const v=6+Math.floor(Math.random()*5),m=[];for(let S=0;S<v;S++){const O=new tr,w=Math.floor(Math.random()*p.length);if(O.beginFill(p[w],.8),Math.random()>.5)O.drawCircle(0,0,1+Math.random()*2);else{const D=1+Math.random()*3;O.drawRect(-D/2,-D/2,D,D)}O.endFill(),O.position.set((Math.random()-.5)*5,(Math.random()-.5)*5);const E=Math.random()*Math.PI*2,P=.5+Math.random()*2;O.vx=Math.cos(E)*P,O.vy=Math.sin(E)*P,O.rotation=Math.random()*Math.PI*2,O.rotationSpeed=(Math.random()-.5)*.2,m.push(O),this.explosionContainer.addChild(O)}const y=e.duration*.8,_=Date.now(),g=S=>{const O=Date.now()-_,w=Math.min(O/y,1);for(let E=0;E<m.length;E++){const P=m[E];P.position.x+=P.vx,P.position.y+=P.vy,P.vy+=.05,P.rotation+=P.rotationSpeed,P.scale.set(1-w*.8),P.alpha=1-w}if(w>=1){for(let E=0;E<m.length;E++)this.explosionContainer.removeChild(m[E]);ut.remove(g)}};ut.add(g);const x=Date.now(),b=e.duration,T=S=>{const O=Date.now()-x,w=Math.min(O/b,1),E=Math.max(0,(w-.1)/.9);if(E<=0)return;const P=e.startScale+(e.endScale-e.startScale)*E,D=e.startAlpha+(e.endAlpha-e.startAlpha)*E;if(d.scale.set(P*this.size),d.alpha=D,E<.3){const N=1+Math.sin(E*Math.PI*5)*.1;d.scale.set(d.scale.x*N,d.scale.y*N)}w>=1&&(this.explosionContainer&&this.explosionContainer.parent&&this.explosionContainer.parent.removeChild(this.explosionContainer),ut.remove(T),this.isExploding=!1)};ut.add(T)}getBounds(){const t=this.sprite.getBounds(),e=.4,n=t.width*e,i=t.height*e;return new V(t.x+n/2,t.y+i/2,t.width-n,t.height-i)}getPosition(){return{x:this.sprite.position.x,y:this.sprite.position.y}}isPointInExplosionRadius(t,e){const n=this.collisionPoint?this.collisionPoint.x:this.sprite.position.x,i=this.collisionPoint?this.collisionPoint.y:this.sprite.position.y,o=t-n,a=e-i;return o*o+a*a<=this.explosionRadius*this.explosionRadius}addToContainer(t){t&&t.addChild(this.sprite)}removeFromContainer(){this.sprite.parent&&this.sprite.parent.removeChild(this.sprite),this.explosionContainer&&this.explosionContainer.parent&&this.explosionContainer.parent.removeChild(this.explosionContainer)}}class lz{constructor(){if(this.bgm=null,this.isBgmPlaying=!1,this.effectSounds={},this.webAudioContext=null,typeof wx<"u")try{this.webAudioContext=wx.createWebAudioContext(),console.log("WebAudioContext初始化成功")}catch(t){console.error("WebAudioContext初始化失败:",t)}}playBGM(t,e=!0){try{if(this.bgm&&this.isBgmPlaying&&this.bgm.src.includes(t)){console.log("背景音乐已在播放中");return}this.stopBGM(),console.log("开始播放背景音乐:",t),typeof wx<"u"?(this.bgm=wx.createInnerAudioContext(),this.bgm.src=t,this.bgm.loop=e,this.bgm.autoplay=!0,this.bgm.onPlay(()=>{console.log("背景音乐开始播放"),this.isBgmPlaying=!0}),this.bgm.onError(n=>{console.error("背景音乐播放失败:",n),this.isBgmPlaying=!1}),this.bgm.onEnded(()=>{console.log("背景音乐播放结束"),this.isBgmPlaying=!1,e&&this.bgm.play()})):(this.bgm=new Audio(t),this.bgm.loop=e,this.bgm.addEventListener("play",()=>{console.log("背景音乐开始播放"),this.isBgmPlaying=!0}),this.bgm.addEventListener("error",n=>{console.error("背景音乐播放失败:",n),this.isBgmPlaying=!1}),this.bgm.addEventListener("ended",()=>{console.log("背景音乐播放结束"),this.isBgmPlaying=!1}),this.bgm.play().catch(n=>{console.error("无法自动播放背景音乐:",n)}))}catch(n){console.error("播放背景音乐出错:",n)}}pauseBGM(){this.bgm&&this.isBgmPlaying&&(console.log("暂停背景音乐"),this.bgm.pause(),this.isBgmPlaying=!1)}resumeBGM(){this.bgm&&!this.isBgmPlaying&&(console.log("恢复播放背景音乐"),this.bgm.play(),this.isBgmPlaying=!0)}stopBGM(){this.bgm&&(console.log("停止背景音乐"),this.bgm.stop&&this.bgm.stop(),this.bgm.destroy&&this.bgm.destroy(),this.bgm=null,this.isBgmPlaying=!1)}playEffect(t,e){try{if(typeof wx<"u")if(this.effectSounds[t])this.effectSounds[t].loaded&&this.playLoadedEffect(t);else{const n={buffer:null,loaded:!1,isPlaying:!1};console.log("加载音效:",e);const i=wx.createWebAudioContext(),o=wx.getFileSystemManager();try{const a=o.readFileSync(e);i.decodeAudioData(a.buffer||a,s=>{n.buffer=s,n.loaded=!0,console.log("音效加载成功:",t),this.playLoadedEffect(t)},s=>{console.error("音效解码失败:",s),this.playEffectWithInnerAudio(t,e)})}catch(a){console.error("读取本地音效文件失败，尝试直接播放:",a),this.playEffectWithInnerAudio(t,e)}this.effectSounds[t]=n}else{const n=new Audio(e);n.addEventListener("ended",()=>{delete this.effectSounds[t]}),n.play().catch(i=>{console.error("无法播放音效:",i)}),this.effectSounds[t]={htmlAudio:n,isPlaying:!0}}}catch(n){console.error("播放音效出错:",n),this.playEffectWithInnerAudio(t,e)}}playLoadedEffect(t){if(!(!this.webAudioContext||!this.effectSounds[t]||!this.effectSounds[t].loaded))try{const e=this.effectSounds[t],n=this.webAudioContext.createBufferSource();n.buffer=e.buffer,n.connect(this.webAudioContext.destination),n.start(0),e.isPlaying=!0,n.onended=()=>{e.isPlaying=!1}}catch(e){console.error("播放已加载音效失败:",e)}}playEffectWithInnerAudio(t,e){if(!(typeof wx>"u"))try{console.log("使用InnerAudioContext播放音效:",e);const n=wx.createInnerAudioContext();n.src=e,n.autoplay=!0,n.onEnded(()=>{n.destroy(),this.effectSounds[t]&&this.effectSounds[t].innerAudio===n&&delete this.effectSounds[t].innerAudio}),n.onError(i=>{console.error("InnerAudioContext播放音效失败:",i),n.destroy()}),this.effectSounds[t]?this.effectSounds[t].innerAudio=n:this.effectSounds[t]={innerAudio:n,isPlaying:!0}}catch(n){console.error("使用InnerAudioContext播放音效失败:",n)}}releaseAllEffects(){this.effectSounds={},console.log("所有音效资源已释放")}}const wi=new lz;class fz{constructor(t={}){const{texture:e="assets/images/battery.png",x:n=0,y:i=0,scale:o=1,fireRate:a=500,burstCount:s=1,burstSpacing:u=100,bulletType:l="default",id:f="default"}=t;this.sprite=Lt.from(e),this.sprite.anchor.set(.5,.8),this.sprite.position.set(n,i),this.sprite.scale.set(o),this.fireRate=a,this.burstCount=s,this.burstSpacing=u,this.bulletType=l,this.lastFireTime=0,this.isFiring=!1,this.currentBurst=0,this.burstInterval=null,this.id=f,this.name=t.name||"标准炮台",this.price=t.price||0,this.unlocked=t.unlocked||!1,this.power=t.power||1,this.bulletConfig=t.bulletConfig||{}}updatePosition(t,e){this.sprite.position.set(t,e)}rotateToTarget(t,e){const n=t-this.sprite.position.x,i=e-this.sprite.position.y,o=Math.atan2(i,n);this.sprite.rotation=o+Math.PI/2}getBulletStartPosition(){const t=this.sprite.rotation-Math.PI/2,e=this.sprite.height/.8;return{x:this.sprite.position.x+Math.cos(t)*e,y:this.sprite.position.y+Math.sin(t)*e,rotation:this.sprite.rotation}}canFire(){return Date.now()-this.lastFireTime>=this.fireRate&&!this.isFiring}fire(t,e,n){if(!this.canFire()||!n)return[];wi.playEffect("shoot","assets/mp3/sound_hit.mp3"),this.lastFireTime=Date.now(),this.rotateToTarget(t,e),this.isFiring=!0,this.currentBurst=0;const i=[],o=this.fireSingleBullet(n);return o&&i.push(o),this.currentBurst++,this.burstCount>1?(this.burstInterval&&clearInterval(this.burstInterval),this.burstInterval=setInterval(()=>{const a=this.fireSingleBullet(n);a&&i.push(a),this.currentBurst++,this.currentBurst>=this.burstCount&&(clearInterval(this.burstInterval),this.burstInterval=null,this.isFiring=!1)},this.burstSpacing)):this.isFiring=!1,i}fireSingleBullet(t){const e=this.getBulletStartPosition(),n={x:e.x,y:e.y,rotation:e.rotation,type:this.bulletType,power:this.power};if(this.bulletConfig&&(Object.assign(n,this.bulletConfig),!n.explosionEffect))switch(this.bulletType){case"fire":n.explosionEffect="fire";break;case"ice":n.explosionEffect="ice";break;default:n.explosionEffect="default"}const i=new uz(n);return i.addToContainer(t),i}addToContainer(t){t&&t.addChild(this.sprite)}removeFromContainer(){this.sprite.parent&&this.sprite.parent.removeChild(this.sprite)}updateProps(t){Object.assign(this,t),t.texture&&(this.sprite.texture=G.from(t.texture)),t.scale&&this.sprite.scale.set(t.scale)}}class hz{constructor(t={}){this.position={x:t.x||Z.width/2,y:t.y||Z.height},this.base=new j_({...t.baseOptions,x:this.position.x,y:this.position.y});const e=this.base.getCannonMountPosition();this.cannon=new fz({...t.cannonOptions,x:e.x,y:e.y}),this.bulletConfig=t.bulletOptions||{},this.bullets=[],this.activeBullets=new Set}init(t){if(!t){console.error("初始化炮台系统失败：容器不存在");return}this.base.addToContainer(t),this.cannon.addToContainer(t),this.cannon.bulletConfig=this.bulletConfig,console.log("炮台系统初始化完成，位置:",this.position.x,this.position.y)}updatePosition(t,e){this.position.x=t,this.position.y=e,this.base.updatePosition(t,e);const n=this.base.getCannonMountPosition();this.cannon.updatePosition(n.x,n.y)}rotateCannon(t,e){this.cannon.rotateToTarget(t,e)}fire(t,e,n){if(!n)return console.error("发射子弹失败：容器不存在"),[];console.log("子弹已发射");const i=this.cannon.fire(t,e,n);return i.forEach(o=>{this.bullets.push(o),this.activeBullets.add(o)}),i}updateBullets(t,e){e&&(this.activeBullets.forEach(n=>{n.update(t)||(this.activeBullets.delete(n),!n.hasExploded&&!n.isExploding&&n.removeFromContainer())}),this.bullets.length>100&&(this.bullets=this.bullets.slice(-50)))}checkCollisions(t,e){if(!t||!e)return[];const n=[];return this.activeBullets.forEach(i=>{if(i.hasExploded||i.isExploding)return;let o=!1;for(const a of t){if(a.hit||a.isDeathAnimating||a.isDead)continue;const s=i.getBounds(),u=a.getBounds();if(s.x<u.x+u.width&&s.x+s.width>u.x&&s.y<u.y+u.height&&s.y+s.height>u.y){console.log("碰撞检测：子弹与鱼");const l=i.getPosition(),f=i.explode(e,{x:l.x,y:l.y},!0);o=!0;const c=a.takeDamage(i.power);if(n.push({fish:a,isDead:c,score:a.getScore()}),f&&i.explosionRadius>0)for(const h of t){if(h===a||h.hit||h.isDeathAnimating||h.isDead)continue;const d={x:h.sprite.position.x,y:h.sprite.position.y};if(i.isPointInExplosionRadius(d.x,d.y)){const p=h.takeDamage(i.power*.5);n.push({fish:h,isDead:p,score:h.getScore()})}}this.activeBullets.delete(i);break}}}),n}upgradeCannon(t){t&&(this.cannon.updateProps(t),t.bulletConfig&&(this.bulletConfig={...this.bulletConfig,...t.bulletConfig},this.cannon.bulletConfig=this.bulletConfig))}changeBase(t,e){if(!t||!e)return;this.base.removeFromContainer(),this.base=new j_({...t,x:this.position.x,y:this.position.y}),this.base.addToContainer(e);const n=this.base.getCannonMountPosition();this.cannon.updatePosition(n.x,n.y)}clearBullets(){this.activeBullets.forEach(t=>{t.removeFromContainer()}),this.activeBullets.clear(),this.bullets=[]}}class cz{constructor(t={}){this.position={x:t.x||Z.width/2,y:t.y||Z.height},this.score=0,this.coins=t.coins||0,this.batterySystem=new hz({x:this.position.x,y:this.position.y,cannonOptions:t.cannonOptions||{fireRate:500,burstCount:1,burstSpacing:100},baseOptions:t.baseOptions||{},bulletOptions:t.bulletOptions||{speed:10,power:1,size:1,explosionRadius:20,explosionEffect:"default"}})}init(t){if(!t){console.error("初始化玩家失败：容器不存在");return}this.batterySystem.init(t),console.log("玩家初始化完成，位置:",this.position.x,this.position.y)}shoot(t,e,n){return this.batterySystem.fire(t,e,n)}update(t,e,n){if(this.batterySystem.updateBullets(t,e),n){const i=this.batterySystem.checkCollisions(n,e);this.processHitResults(i)}}processHitResults(t){if(!(!t||t.length===0))for(const e of t)e.isDead&&(this.score+=e.score,this.coins+=Math.round(e.score/2),console.log(`鱼被击杀，获得分数: ${e.score}, 金币: ${Math.round(e.score/2)}`)),typeof this.onFishHit=="function"&&this.onFishHit(e.fish,e.isDead,e.score)}setOnFishHitCallback(t){typeof t=="function"&&(this.onFishHit=t)}upgradeCannon(t){return t.price&&this.coins<t.price?(console.log("金币不足，无法升级"),!1):(t.price&&(this.coins-=t.price),this.batterySystem.upgradeCannon(t),!0)}changeBase(t,e){return t.price&&this.coins<t.price?(console.log("金币不足，无法更换底座"),!1):(t.price&&(this.coins-=t.price),this.batterySystem.changeBase(t,e),!0)}getScore(){return this.score}getCoins(){return this.coins}addCoins(t){this.coins+=t}}/*!
 * @pixi/filter-adjustment - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var od=function(r,t){return od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},od(r,t)};function dz(r,t){od(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var pz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vz=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`;(function(r){dz(t,r);function t(e){var n=r.call(this,pz,vz)||this;return n.gamma=1,n.saturation=1,n.contrast=1,n.brightness=1,n.red=1,n.green=1,n.blue=1,n.alpha=1,Object.assign(n,e),n}return t.prototype.apply=function(e,n,i,o){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,e.applyFilter(this,n,i,o)},t})(k);/*!
 * @pixi/filter-kawase-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ad=function(r,t){return ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ad(r,t)};function mz(r,t){ad(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,gz=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,_z=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,jo=function(r){mz(t,r);function t(e,n,i){e===void 0&&(e=4),n===void 0&&(n=3),i===void 0&&(i=!1);var o=r.call(this,yz,i?_z:gz)||this;return o._kernels=[],o._blur=4,o._quality=3,o.uniforms.uOffset=new Float32Array(2),o._pixelSize=new X,o.pixelSize=1,o._clamp=i,Array.isArray(e)?o.kernels=e:(o._blur=e,o.quality=n),o}return t.prototype.apply=function(e,n,i,o){var a=this._pixelSize.x/n._frame.width,s=this._pixelSize.y/n._frame.height,u;if(this._quality===1||this._blur===0)u=this._kernels[0]+.5,this.uniforms.uOffset[0]=u*a,this.uniforms.uOffset[1]=u*s,e.applyFilter(this,n,i,o);else{for(var l=e.getFilterTexture(),f=n,c=l,h=void 0,d=this._quality-1,p=0;p<d;p++)u=this._kernels[p]+.5,this.uniforms.uOffset[0]=u*a,this.uniforms.uOffset[1]=u*s,e.applyFilter(this,f,c,1),h=f,f=c,c=h;u=this._kernels[d]+.5,this.uniforms.uOffset[0]=u*a,this.uniforms.uOffset[1]=u*s,e.applyFilter(this,f,i,o),e.returnFilterTexture(l)}},t.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(e,n){return e+n+.5},0))},t.prototype._generateKernels=function(){var e=this._blur,n=this._quality,i=[e];if(e>0)for(var o=e,a=e/n,s=1;s<n;s++)o-=a,i.push(o);this._kernels=i,this._updatePadding()},Object.defineProperty(t.prototype,"kernels",{get:function(){return this._kernels},set:function(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,e)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(e){typeof e=="number"?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof X?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blur},set:function(e){this._blur=e,this._generateKernels()},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/filter-advanced-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sd=function(r,t){return sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},sd(r,t)};function US(r,t){sd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var GS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,bz=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,xz=function(r){US(t,r);function t(e){e===void 0&&(e=.5);var n=r.call(this,GS,bz)||this;return n.threshold=e,n}return Object.defineProperty(t.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(e){this.uniforms.threshold=e},enumerable:!1,configurable:!0}),t}(k),Tz=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;(function(r){US(t,r);function t(e){var n=r.call(this,GS,Tz)||this;n.bloomScale=1,n.brightness=1,n._resolution=R.FILTER_RESOLUTION,typeof e=="number"&&(e={threshold:e});var i=Object.assign(t.defaults,e);n.bloomScale=i.bloomScale,n.brightness=i.brightness;var o=i.kernels,a=i.blur,s=i.quality,u=i.pixelSize,l=i.resolution;return n._extractFilter=new xz(i.threshold),n._extractFilter.resolution=l,n._blurFilter=o?new jo(o):new jo(a,s),n.pixelSize=u,n.resolution=l,n}return t.prototype.apply=function(e,n,i,o,a){var s=e.getFilterTexture();this._extractFilter.apply(e,n,s,1,a);var u=e.getFilterTexture();this._blurFilter.apply(e,s,u,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=u,e.applyFilter(this,n,i,o),e.returnFilterTexture(u),e.returnFilterTexture(s)},Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(e){this._extractFilter.threshold=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e},enumerable:!1,configurable:!0}),t.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:R.FILTER_RESOLUTION},t})(k);/*!
 * @pixi/filter-ascii - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ud=function(r,t){return ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ud(r,t)};function Sz(r,t){ud(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var wz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ez=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`;(function(r){Sz(t,r);function t(e){e===void 0&&(e=8);var n=r.call(this,wz,Ez)||this;return n.size=e,n}return Object.defineProperty(t.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(e){this.uniforms.pixelSize=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-bevel - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ld=function(r,t){return ld=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ld(r,t)};function Oz(r,t){ld(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Pz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Cz=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`;(function(r){Oz(t,r);function t(e){var n=r.call(this,Pz,Cz)||this;return n._thickness=2,n._angle=0,n.uniforms.lightColor=new Float32Array(3),n.uniforms.shadowColor=new Float32Array(3),Object.assign(n,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},e),n.padding=1,n}return t.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._angle/Lr},set:function(e){this._angle=e*Lr,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness=e,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightColor",{get:function(){return Ee(this.uniforms.lightColor)},set:function(e){Xt(e,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(e){this.uniforms.lightAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return Ee(this.uniforms.shadowColor)},set:function(e){Xt(e,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(e){this.uniforms.shadowAlpha=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fd=function(r,t){return fd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},fd(r,t)};function Az(r,t){fd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}(function(r){Az(t,r);function t(e,n,i,o){e===void 0&&(e=2),n===void 0&&(n=4),i===void 0&&(i=R.FILTER_RESOLUTION),o===void 0&&(o=5);var a=r.call(this)||this,s,u;return typeof e=="number"?(s=e,u=e):e instanceof X?(s=e.x,u=e.y):Array.isArray(e)&&(s=e[0],u=e[1]),a.blurXFilter=new Lo(!0,s,n,i,o),a.blurYFilter=new Lo(!1,u,n,i,o),a.blurYFilter.blendMode=L.SCREEN,a.defaultFilter=new Jx,a}return t.prototype.apply=function(e,n,i,o){var a=e.getFilterTexture();this.defaultFilter.apply(e,n,i,o),this.blurXFilter.apply(e,n,a,1),this.blurYFilter.apply(e,a,i,0),e.returnFilterTexture(a)},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-bulge-pinch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hd=function(r,t){return hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},hd(r,t)};function Rz(r,t){hd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Iz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Mz=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;(function(r){Rz(t,r);function t(e){var n=r.call(this,Iz,Mz)||this;return n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,e),n}return t.prototype.apply=function(e,n,i,o){var a=n.filterFrame,s=a.width,u=a.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=u,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(e){this.uniforms.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e},enumerable:!1,configurable:!0}),t.defaults={center:[.5,.5],radius:100,strength:1},t})(k);/*!
 * @pixi/filter-color-map - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cd=function(r,t){return cd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},cd(r,t)};function Fz(r,t){cd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Dz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Bz=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`;(function(r){Fz(t,r);function t(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=1);var o=r.call(this,Dz,Bz)||this;return o.mix=1,o._size=0,o._sliceSize=0,o._slicePixelSize=0,o._sliceInnerSize=0,o._nearest=!1,o._scaleMode=null,o._colorMap=null,o._scaleMode=null,o.nearest=n,o.mix=i,o.colorMap=e,o}return t.prototype.apply=function(e,n,i,o){this.uniforms._mix=this.mix,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colorMap",{get:function(){return this._colorMap},set:function(e){var n;e&&(e instanceof G||(e=G.from(e)),!((n=e)===null||n===void 0)&&n.baseTexture&&(e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=le.OFF,this._size=e.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=e),this._colorMap=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nearest",{get:function(){return this._nearest},set:function(e){this._nearest=e,this._scaleMode=e?Qt.NEAREST:Qt.LINEAR;var n=this._colorMap;n&&n.baseTexture&&(n.baseTexture._glTextures={},n.baseTexture.scaleMode=this._scaleMode,n.baseTexture.mipmap=le.OFF,n._updateID++,n.baseTexture.emit("update",n.baseTexture))},enumerable:!1,configurable:!0}),t.prototype.updateColorMap=function(){var e=this._colorMap;e&&e.baseTexture&&(e._updateID++,e.baseTexture.emit("update",e.baseTexture),this.colorMap=e)},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._colorMap&&this._colorMap.destroy(e),r.prototype.destroy.call(this)},t})(k);/*!
 * @pixi/filter-color-overlay - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dd=function(r,t){return dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},dd(r,t)};function Nz(r,t){dd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Lz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Uz=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`;(function(r){Nz(t,r);function t(e,n){e===void 0&&(e=0),n===void 0&&(n=1);var i=r.call(this,Lz,Uz)||this;return i._color=0,i._alpha=1,i.uniforms.color=new Float32Array(3),i.color=e,i.alpha=n,i}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){var n=this.uniforms.color;typeof e=="number"?(Xt(e,n),this._color=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._color=Ee(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this.uniforms.alpha=e,this._alpha=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pd=function(r,t){return pd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},pd(r,t)};function Gz(r,t){pd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var jz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,kz=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`;(function(r){Gz(t,r);function t(e,n,i){e===void 0&&(e=16711680),n===void 0&&(n=0),i===void 0&&(i=.4);var o=r.call(this,jz,kz)||this;return o._originalColor=16711680,o._newColor=0,o.uniforms.originalColor=new Float32Array(3),o.uniforms.newColor=new Float32Array(3),o.originalColor=e,o.newColor=n,o.epsilon=i,o}return Object.defineProperty(t.prototype,"originalColor",{get:function(){return this._originalColor},set:function(e){var n=this.uniforms.originalColor;typeof e=="number"?(Xt(e,n),this._originalColor=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._originalColor=Ee(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newColor",{get:function(){return this._newColor},set:function(e){var n=this.uniforms.newColor;typeof e=="number"?(Xt(e,n),this._newColor=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._newColor=Ee(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(e){this.uniforms.epsilon=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-convolution - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vd=function(r,t){return vd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},vd(r,t)};function $z(r,t){vd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var zz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Hz=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`;(function(r){$z(t,r);function t(e,n,i){n===void 0&&(n=200),i===void 0&&(i=200);var o=r.call(this,zz,Hz)||this;return o.uniforms.texelSize=new Float32Array(2),o.uniforms.matrix=new Float32Array(9),e!==void 0&&(o.matrix=e),o.width=n,o.height=i,o}return Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(e){var n=this;e.forEach(function(i,o){n.uniforms.matrix[o]=i})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(e){this.uniforms.texelSize[0]=1/e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(e){this.uniforms.texelSize[1]=1/e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-cross-hatch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var md=function(r,t){return md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},md(r,t)};function Xz(r,t){md(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Vz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Wz=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`;(function(r){Xz(t,r);function t(){return r.call(this,Vz,Wz)||this}return t})(k);/*!
 * @pixi/filter-crt - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yd=function(r,t){return yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},yd(r,t)};function Yz(r,t){yd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var qz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Kz=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;(function(r){Yz(t,r);function t(e){var n=r.call(this,qz,Kz)||this;return n.time=0,n.seed=0,n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,e),n}return t.prototype.apply=function(e,n,i,o){var a=n.filterFrame,s=a.width,u=a.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=u,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(e){this.uniforms.curvature=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(e){this.uniforms.lineWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(e){this.uniforms.lineContrast=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(e){this.uniforms.verticalLine=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e},enumerable:!1,configurable:!0}),t.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},t})(k);/*!
 * @pixi/filter-dot - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gd=function(r,t){return gd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},gd(r,t)};function Zz(r,t){gd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Jz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Qz=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`;(function(r){Zz(t,r);function t(e,n){e===void 0&&(e=1),n===void 0&&(n=5);var i=r.call(this,Jz,Qz)||this;return i.scale=e,i.angle=n,i}return Object.defineProperty(t.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(e){this.uniforms.scale=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(e){this.uniforms.angle=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-drop-shadow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _d=function(r,t){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},_d(r,t)};function t6(r,t){_d(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var hu=function(){return hu=Object.assign||function(t){for(var e=arguments,n,i=1,o=arguments.length;i<o;i++){n=e[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},hu.apply(this,arguments)},e6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,r6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`;(function(r){t6(t,r);function t(e){var n=r.call(this)||this;n.angle=45,n._distance=5,n._resolution=R.FILTER_RESOLUTION;var i=e?hu(hu({},t.defaults),e):t.defaults,o=i.kernels,a=i.blur,s=i.quality,u=i.pixelSize,l=i.resolution;n._tintFilter=new k(e6,r6),n._tintFilter.uniforms.color=new Float32Array(4),n._tintFilter.uniforms.shift=new X,n._tintFilter.resolution=l,n._blurFilter=o?new jo(o):new jo(a,s),n.pixelSize=u,n.resolution=l;var f=i.shadowOnly,c=i.rotation,h=i.distance,d=i.alpha,p=i.color;return n.shadowOnly=f,n.rotation=c,n.distance=h,n.alpha=d,n.color=p,n._updatePadding(),n}return t.prototype.apply=function(e,n,i,o){var a=e.getFilterTexture();this._tintFilter.apply(e,n,a,1),this._blurFilter.apply(e,a,i,o),this.shadowOnly!==!0&&e.applyFilter(this,n,i,0),e.returnFilterTexture(a)},t.prototype._updatePadding=function(){this.padding=this.distance+this.blur*2},t.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},set:function(e){this._distance=e,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.angle/Lr},set:function(e){this.angle=e*Lr,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(e){this._tintFilter.uniforms.alpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return Ee(this._tintFilter.uniforms.color)},set:function(e){Xt(e,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e},enumerable:!1,configurable:!0}),t.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:R.FILTER_RESOLUTION},t})(k);/*!
 * @pixi/filter-emboss - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bd=function(r,t){return bd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},bd(r,t)};function n6(r,t){bd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var i6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,o6=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`;(function(r){n6(t,r);function t(e){e===void 0&&(e=5);var n=r.call(this,i6,o6)||this;return n.strength=e,n}return Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(e){this.uniforms.strength=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-glitch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xd=function(r,t){return xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},xd(r,t)};function a6(r,t){xd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var s6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,u6=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`;(function(r){a6(t,r);function t(e){var n=r.call(this,s6,u6)||this;return n.offset=100,n.fillMode=t.TRANSPARENT,n.average=!1,n.seed=0,n.minSize=8,n.sampleSize=512,n._slices=0,n._offsets=new Float32Array(1),n._sizes=new Float32Array(1),n._direction=-1,n.uniforms.dimensions=new Float32Array(2),n._canvas=document.createElement("canvas"),n._canvas.width=4,n._canvas.height=n.sampleSize,n.texture=G.from(n._canvas,{scaleMode:Qt.NEAREST}),Object.assign(n,t.defaults,e),n}return t.prototype.apply=function(e,n,i,o){var a=n.filterFrame,s=a.width,u=a.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=u,this.uniforms.aspect=u/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,n,i,o)},t.prototype._randomizeSizes=function(){var e=this._sizes,n=this._slices-1,i=this.sampleSize,o=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var a=this._slices,s=1,u=0;u<n;u++){var l=s/(a-u),f=Math.max(l*(1-Math.random()*.6),o);e[u]=f,s-=f}e[n]=s}else{for(var s=1,c=Math.sqrt(1/this._slices),u=0;u<n;u++){var f=Math.max(c*s*Math.random(),o);e[u]=f,s-=f}e[n]=s}this.shuffle()},t.prototype.shuffle=function(){for(var e=this._sizes,n=this._slices-1,i=n;i>0;i--){var o=Math.random()*i>>0,a=e[i];e[i]=e[o],e[o]=a}},t.prototype._randomizeOffsets=function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)},t.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},t.prototype.redraw=function(){var e=this.sampleSize,n=this.texture,i=this._canvas.getContext("2d");i.clearRect(0,0,8,e);for(var o,a=0,s=0;s<this._slices;s++){o=Math.floor(this._offsets[s]*256);var u=this._sizes[s]*e,l=o>0?o:0,f=o<0?-o:0;i.fillStyle="rgba("+l+", "+f+", 0, 1)",i.fillRect(0,a>>0,e,u+1>>0),a+=u}n.baseTexture.update(),this.uniforms.displacementMap=n},Object.defineProperty(t.prototype,"sizes",{get:function(){return this._sizes},set:function(e){for(var n=Math.min(this._slices,e.length),i=0;i<n;i++)this._sizes[i]=e[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._offsets},set:function(e){for(var n=Math.min(this._slices,e.length),i=0;i<n;i++)this._offsets[i]=e[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slices",{get:function(){return this._slices},set:function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){if(this._direction!==e){this._direction=e;var n=e*Lr;this.uniforms.sinDir=Math.sin(n),this.uniforms.cosDir=Math.cos(n)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"red",{get:function(){return this.uniforms.red},set:function(e){this.uniforms.red=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.uniforms.green},set:function(e){this.uniforms.green=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(e){this.uniforms.blue=e},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var e;(e=this.texture)===null||e===void 0||e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},t.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},t.TRANSPARENT=0,t.ORIGINAL=1,t.LOOP=2,t.CLAMP=3,t.MIRROR=4,t})(k);/*!
 * @pixi/filter-glow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Td=function(r,t){return Td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Td(r,t)};function l6(r,t){Td(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var f6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,h6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;(function(r){l6(t,r);function t(e){var n=this,i=Object.assign({},t.defaults,e),o=i.outerStrength,a=i.innerStrength,s=i.color,u=i.knockout,l=i.quality,f=Math.round(i.distance);return n=r.call(this,f6,h6.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/l/f).toFixed(7)).replace(/__DIST__/gi,f.toFixed(0)+".0"))||this,n.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(n,{color:s,outerStrength:o,innerStrength:a,padding:f,knockout:u}),n}return Object.defineProperty(t.prototype,"color",{get:function(){return Ee(this.uniforms.glowColor)},set:function(e){Xt(e,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(e){this.uniforms.outerStrength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(e){this.uniforms.innerStrength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(e){this.uniforms.knockout=e},enumerable:!1,configurable:!0}),t.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},t})(k);/*!
 * @pixi/filter-godray - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sd=function(r,t){return Sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Sd(r,t)};function c6(r,t){Sd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var d6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,p6=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,v6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`;(function(r){c6(t,r);function t(e){var n=r.call(this,d6,v6.replace("${perlin}",p6))||this;n.parallel=!0,n.time=0,n._angle=0,n.uniforms.dimensions=new Float32Array(2);var i=Object.assign(t.defaults,e);return n._angleLight=new X,n.angle=i.angle,n.gain=i.gain,n.lacunarity=i.lacunarity,n.alpha=i.alpha,n.parallel=i.parallel,n.center=i.center,n.time=i.time,n}return t.prototype.apply=function(e,n,i,o){var a=n.filterFrame,s=a.width,u=a.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=u,this.uniforms.aspect=u/s,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e;var n=e*Lr;this._angleLight.x=Math.cos(n),this._angleLight.y=Math.sin(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(e){this.uniforms.gain=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(e){this.uniforms.lacunarity=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha=e},enumerable:!1,configurable:!0}),t.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},t})(k);/*!
 * @pixi/filter-motion-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wd=function(r,t){return wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},wd(r,t)};function m6(r,t){wd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var y6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,g6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`,k_=function(r){m6(t,r);function t(e,n,i){e===void 0&&(e=[0,0]),n===void 0&&(n=5),i===void 0&&(i=0);var o=r.call(this,y6,g6)||this;return o.kernelSize=5,o.uniforms.uVelocity=new Float32Array(2),o._velocity=new Rr(o.velocityChanged,o),o.setVelocity(e),o.kernelSize=n,o.offset=i,o}return t.prototype.apply=function(e,n,i,o){var a=this.velocity,s=a.x,u=a.y;this.uniforms.uKernelSize=s!==0||u!==0?this.kernelSize:0,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"velocity",{get:function(){return this._velocity},set:function(e){this.setVelocity(e)},enumerable:!1,configurable:!0}),t.prototype.setVelocity=function(e){if(Array.isArray(e)){var n=e[0],i=e[1];this._velocity.set(n,i)}else this._velocity.copyFrom(e)},t.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1},Object.defineProperty(t.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(e){this.uniforms.uOffset=e},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/filter-multi-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ed=function(r,t){return Ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Ed(r,t)};function _6(r,t){Ed(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var b6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,x6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`;(function(r){_6(t,r);function t(e,n,i){n===void 0&&(n=.05),i===void 0&&(i=e.length);var o=r.call(this,b6,x6.replace(/%maxColors%/g,i.toFixed(0)))||this;return o._replacements=[],o._maxColors=0,o.epsilon=n,o._maxColors=i,o.uniforms.originalColors=new Float32Array(i*3),o.uniforms.targetColors=new Float32Array(i*3),o.replacements=e,o}return Object.defineProperty(t.prototype,"replacements",{get:function(){return this._replacements},set:function(e){var n=this.uniforms.originalColors,i=this.uniforms.targetColors,o=e.length;if(o>this._maxColors)throw new Error("Length of replacements ("+o+") exceeds the maximum colors length ("+this._maxColors+")");n[o*3]=-1;for(var a=0;a<o;a++){var s=e[a],u=s[0];typeof u=="number"?u=Xt(u):s[0]=Ee(u),n[a*3]=u[0],n[a*3+1]=u[1],n[a*3+2]=u[2];var l=s[1];typeof l=="number"?l=Xt(l):s[1]=Ee(l),i[a*3]=l[0],i[a*3+1]=l[1],i[a*3+2]=l[2]}this._replacements=e},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(t.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(e){this.uniforms.epsilon=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-old-film - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Od=function(r,t){return Od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Od(r,t)};function T6(r,t){Od(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var S6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,w6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`;(function(r){T6(t,r);function t(e,n){n===void 0&&(n=0);var i=r.call(this,S6,w6)||this;return i.seed=0,i.uniforms.dimensions=new Float32Array(2),typeof e=="number"?(i.seed=e,e=void 0):i.seed=n,Object.assign(i,t.defaults,e),i}return t.prototype.apply=function(e,n,i,o){var a,s;this.uniforms.dimensions[0]=(a=n.filterFrame)===null||a===void 0?void 0:a.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.seed=this.seed,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(e){this.uniforms.sepia=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(e){this.uniforms.scratch=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(e){this.uniforms.scratchDensity=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(e){this.uniforms.scratchWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e},enumerable:!1,configurable:!0}),t.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},t})(k);/*!
 * @pixi/filter-outline - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pd=function(r,t){return Pd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Pd(r,t)};function E6(r,t){Pd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var O6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,P6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`,C6=function(r){E6(t,r);function t(e,n,i){e===void 0&&(e=1),n===void 0&&(n=0),i===void 0&&(i=.1);var o=r.call(this,O6,P6.replace(/\$\{angleStep\}/,t.getAngleStep(i)))||this;return o._thickness=1,o.uniforms.thickness=new Float32Array([0,0]),o.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(o,{thickness:e,color:n,quality:i}),o}return t.getAngleStep=function(e){var n=Math.max(e*t.MAX_SAMPLES,t.MIN_SAMPLES);return(Math.PI*2/n).toFixed(7)},t.prototype.apply=function(e,n,i,o){this.uniforms.thickness[0]=this._thickness/n._frame.width,this.uniforms.thickness[1]=this._thickness/n._frame.height,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"color",{get:function(){return Ee(this.uniforms.outlineColor)},set:function(e){Xt(e,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(e){this._thickness=e,this.padding=e},enumerable:!1,configurable:!0}),t.MIN_SAMPLES=1,t.MAX_SAMPLES=100,t}(k);/*!
 * @pixi/filter-pixelate - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cd=function(r,t){return Cd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Cd(r,t)};function A6(r,t){Cd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var R6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,I6=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`,M6=function(r){A6(t,r);function t(e){e===void 0&&(e=10);var n=r.call(this,R6,I6)||this;return n.size=e,n}return Object.defineProperty(t.prototype,"size",{get:function(){return this.uniforms.size},set:function(e){typeof e=="number"&&(e=[e,e]),this.uniforms.size=e},enumerable:!1,configurable:!0}),t}(k);/*!
 * @pixi/filter-radial-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ad=function(r,t){return Ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Ad(r,t)};function F6(r,t){Ad(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var D6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,B6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`;(function(r){F6(t,r);function t(e,n,i,o){e===void 0&&(e=0),n===void 0&&(n=[0,0]),i===void 0&&(i=5),o===void 0&&(o=-1);var a=r.call(this,D6,B6)||this;return a._angle=0,a.angle=e,a.center=n,a.kernelSize=i,a.radius=o,a}return t.prototype.apply=function(e,n,i,o){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this.uniforms.uRadian=e*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(e){this.uniforms.uCenter=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-reflection - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rd=function(r,t){return Rd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Rd(r,t)};function N6(r,t){Rd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var L6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,U6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`;(function(r){N6(t,r);function t(e){var n=r.call(this,L6,U6)||this;return n.time=0,n.uniforms.amplitude=new Float32Array(2),n.uniforms.waveLength=new Float32Array(2),n.uniforms.alpha=new Float32Array(2),n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,e),n}return t.prototype.apply=function(e,n,i,o){var a,s;this.uniforms.dimensions[0]=(a=n.filterFrame)===null||a===void 0?void 0:a.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.time=this.time,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(e){this.uniforms.mirror=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(e){this.uniforms.boundary=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]},enumerable:!1,configurable:!0}),t.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},t})(k);/*!
 * @pixi/filter-rgb-split - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Id=function(r,t){return Id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Id(r,t)};function G6(r,t){Id(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var j6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,k6=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`;(function(r){G6(t,r);function t(e,n,i){e===void 0&&(e=[-10,0]),n===void 0&&(n=[0,10]),i===void 0&&(i=[0,0]);var o=r.call(this,j6,k6)||this;return o.red=e,o.green=n,o.blue=i,o}return Object.defineProperty(t.prototype,"red",{get:function(){return this.uniforms.red},set:function(e){this.uniforms.red=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.uniforms.green},set:function(e){this.uniforms.green=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(e){this.uniforms.blue=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-shockwave - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Md=function(r,t){return Md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Md(r,t)};function $6(r,t){Md(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var z6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,H6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`;(function(r){$6(t,r);function t(e,n,i){e===void 0&&(e=[0,0]),i===void 0&&(i=0);var o=r.call(this,z6,H6)||this;return o.center=e,Object.assign(o,t.defaults,n),o.time=i,o}return t.prototype.apply=function(e,n,i,o){this.uniforms.time=this.time,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(e){this.uniforms.wavelength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(e){this.uniforms.brightness=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(e){this.uniforms.speed=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e},enumerable:!1,configurable:!0}),t.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},t})(k);/*!
 * @pixi/filter-simple-lightmap - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fd=function(r,t){return Fd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Fd(r,t)};function X6(r,t){Fd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var V6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,W6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`;(function(r){X6(t,r);function t(e,n,i){n===void 0&&(n=0),i===void 0&&(i=1);var o=r.call(this,V6,W6)||this;return o._color=0,o.uniforms.dimensions=new Float32Array(2),o.uniforms.ambientColor=new Float32Array([0,0,0,i]),o.texture=e,o.color=n,o}return t.prototype.apply=function(e,n,i,o){var a,s;this.uniforms.dimensions[0]=(a=n.filterFrame)===null||a===void 0?void 0:a.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,e.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(e){this.uniforms.uLightmap=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){var n=this.uniforms.ambientColor;typeof e=="number"?(Xt(e,n),this._color=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],this._color=Ee(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(e){this.uniforms.ambientColor[3]=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-tilt-shift - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Dd=function(r,t){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Dd(r,t)};function ol(r,t){Dd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Y6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,q6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,jS=function(r){ol(t,r);function t(e,n,i,o){e===void 0&&(e=100),n===void 0&&(n=600);var a=r.call(this,Y6,q6)||this;return a.uniforms.blur=e,a.uniforms.gradientBlur=n,a.uniforms.start=i||new X(0,window.innerHeight/2),a.uniforms.end=o||new X(600,window.innerHeight/2),a.uniforms.delta=new X(30,30),a.uniforms.texSize=new X(window.innerWidth,window.innerHeight),a.updateDelta(),a}return t.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(t.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(e){this.uniforms.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(e){this.uniforms.gradientBlur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.uniforms.start},set:function(e){this.uniforms.start=e,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.uniforms.end},set:function(e){this.uniforms.end=e,this.updateDelta()},enumerable:!1,configurable:!0}),t}(k),K6=function(r){ol(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(e*e+n*n);this.uniforms.delta.x=e/i,this.uniforms.delta.y=n/i},t}(jS),Z6=function(r){ol(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(e*e+n*n);this.uniforms.delta.x=-n/i,this.uniforms.delta.y=e/i},t}(jS);(function(r){ol(t,r);function t(e,n,i,o){e===void 0&&(e=100),n===void 0&&(n=600);var a=r.call(this)||this;return a.tiltShiftXFilter=new K6(e,n,i,o),a.tiltShiftYFilter=new Z6(e,n,i,o),a}return t.prototype.apply=function(e,n,i,o){var a=e.getFilterTexture();this.tiltShiftXFilter.apply(e,n,a,1),this.tiltShiftYFilter.apply(e,a,i,o),e.returnFilterTexture(a)},Object.defineProperty(t.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e},enumerable:!1,configurable:!0}),t})(k);/*!
 * @pixi/filter-twist - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bd=function(r,t){return Bd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Bd(r,t)};function J6(r,t){Bd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Q6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,tH=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;(function(r){J6(t,r);function t(e){var n=r.call(this,Q6,tH)||this;return Object.assign(n,t.defaults,e),n}return Object.defineProperty(t.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(e){this.uniforms.offset=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(e){this.uniforms.angle=e},enumerable:!1,configurable:!0}),t.defaults={radius:200,angle:4,padding:20,offset:new X},t})(k);/*!
 * @pixi/filter-zoom-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Nd=function(r,t){return Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Nd(r,t)};function eH(r,t){Nd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function rH(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}var nH=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,iH=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;(function(r){eH(t,r);function t(e){var n=this,i=Object.assign(t.defaults,e),o=i.maxKernelSize,a=rH(i,["maxKernelSize"]);return n=r.call(this,nH,iH.replace("${maxKernelSize}",o.toFixed(1)))||this,Object.assign(n,a),n}return Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(e){this.uniforms.uCenter=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(e){this.uniforms.uStrength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(e){this.uniforms.uInnerRadius=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e},enumerable:!1,configurable:!0}),t.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},t})(k);const{random:_t,PI:ie,sin:Ji,cos:wr,abs:oH}=Math,me={NORMAL:"normal",ESCAPE:"escape",AGGRESSIVE:"aggressive",ERRATIC:"erratic"},Ld={NORMAL:"normal",OCTOPUS:"octopus"};class to{constructor(t,e={}){if(this.sprite=Lt.from(`fish.${t}.png`),this.sprite.anchor.set(.5),this.type=t,this.fishCategory=e.fishCategory||Ld.NORMAL,t==="2"&&(this.fishCategory=Ld.OCTOPUS),this.size=e.size||.5,this.sprite.scale.set(this.size),this.maxHealth=e.health?e.health*2:2,this.health=this.maxHealth,this.baseSpeed=e.speed||(1+_t())*2,this.speed=this.baseSpeed,e.spawnFromEdge===!0){const{position:n,direction:i}=this.getRandomEdgePosition();this.sprite.position.set(n.x,n.y),this.direction=i}else{this.direction=e.direction||_t()*oe;const n=e.x||_t()*Z.width,i=e.y||_t()*Z.height;this.sprite.position.set(n,i)}this.targetDirection=this.direction,this.turnSpeed=e.turnSpeed||_t()-.8,this.rotationSpeed=.01,this.forcedRotationSpeed=.08,this.behavior=e.behavior||me.NORMAL,this.hit=!1,this.hitEffect=0,this.isDead=!1,this.isDeathAnimating=!1,this.deathAnimProgress=0,this.pixelateFilter=new M6,this.pixelateFilter.size=1,this.outlineFilter=new C6(2,16711680,0),this.sprite.filters=[]}getRandomEdgePosition(){const e=Math.floor(_t()*4);let n,i,o;switch(e){case 0:n=_t()*Z.width,i=-50,o=ie/2+(_t()*ie/4-ie/8);break;case 1:n=Z.width+50,i=_t()*Z.height,o=ie+(_t()*ie/4-ie/8);break;case 2:n=_t()*Z.width,i=Z.height+50,o=ie*3/2+(_t()*ie/4-ie/8);break;case 3:n=-50,i=_t()*Z.height,o=0+(_t()*ie/4-ie/8);break}return{position:{x:n,y:i},direction:o}}smoothRotation(){if(this.direction===this.targetDirection){this.direction+=this.turnSpeed*this.rotationSpeed,this.direction%=oe,this.sprite.rotation=this.direction,this.removeMotionBlurIfExists("turning");return}let t=this.targetDirection-this.direction;t>ie&&(t-=oe),t<-ie&&(t+=oe);const e=t>0?Math.min(this.forcedRotationSpeed,t):Math.max(-this.forcedRotationSpeed,t);if(this.direction+=e,this.direction%=oe,this.sprite.rotation=this.direction,Math.abs(e)>.02){const n=-Ji(this.direction)*(e>0?1:-1),i=-wr(this.direction)*(e>0?-1:1);this.applyTurningMotionBlur(n,i,Math.abs(e))}else this.removeMotionBlurIfExists("turning");oH(t)<this.forcedRotationSpeed&&(this.direction=this.targetDirection)}applyTurningMotionBlur(t,e,n){if(this.behavior===me.ESCAPE&&Math.abs(wr(this.direction)*this.speed)>3)return;const o=Math.min(n*50,20),a=t*o,s=e*o;if(!this.turningBlurFilter)this.turningBlurFilter=new k_([a,s],3),this.sprite.filters?this.sprite.filters.push(this.turningBlurFilter):this.sprite.filters=[this.turningBlurFilter];else{this.turningBlurFilter.velocity=[a,s];const u=Math.max(3,Math.min(9,Math.floor(o/3)));this.turningBlurFilter.kernelSize=u}}removeMotionBlurIfExists(t){let e=null;if(t==="turning"&&this.turningBlurFilter?e=this.turningBlurFilter:t==="escape"&&this.motionBlurFilter&&(e=this.motionBlurFilter),e&&this.sprite.filters){const n=this.sprite.filters.indexOf(e);n>-1&&(this.sprite.filters.splice(n,1),this.sprite.filters.length===0&&(this.sprite.filters=null)),t==="turning"?this.turningBlurFilter=null:t==="escape"&&(this.motionBlurFilter=null)}}update(t,e){if(this.isDeathAnimating){this.updateDeathAnimation();return}if(!this.isDead)if(this.hit&&(this.hitEffect+=1,this.sprite.alpha=this.hitEffect%10<5?.5:1,this.handleHitBehavior(),this.hitEffect>30&&(this.hit=!1,this.hitEffect=0,this.sprite.alpha=1,this.behavior===me.ESCAPE&&(this.speed=this.baseSpeed))),this.smoothRotation(),this.sprite.x-=wr(this.direction)*this.speed,this.sprite.y-=Ji(this.direction)*this.speed,e&&(this.sprite.x<e.left?this.sprite.x=e.right:this.sprite.x>e.right&&(this.sprite.x=e.left),this.sprite.y<e.top?this.sprite.y=e.bottom:this.sprite.y>e.bottom&&(this.sprite.y=e.top)),this.behavior===me.ESCAPE&&Math.abs(wr(this.direction)*this.speed)>3)if(!this.motionBlurFilter)this.motionBlurFilter=new k_([wr(this.direction)*this.speed/10,Ji(this.direction)*this.speed/10],5),this.sprite.filters?this.sprite.filters.push(this.motionBlurFilter):this.sprite.filters=[this.motionBlurFilter],this.removeMotionBlurIfExists("turning");else{this.motionBlurFilter.velocity=[wr(this.direction)*this.speed/10,Ji(this.direction)*this.speed/10];const n=Math.min(Math.abs(wr(this.direction)*this.speed)/2,15);this.motionBlurFilter.kernelSize=Math.max(3,Math.floor(n))}else this.motionBlurFilter&&this.removeMotionBlurIfExists("escape")}handleHitBehavior(){switch(this.behavior){case me.ESCAPE:this.speed=this.baseSpeed*2;break;case me.AGGRESSIVE:this.hitEffect===1&&(this.targetDirection=(this.direction+ie)%oe);break;case me.ERRATIC:this.hitEffect===1&&(this.targetDirection=_t()*oe,this.turnSpeed=(_t()-.5)*2);break}}takeDamage(t=1){var n;this.health-=t,this.hit=!0;const e=1-this.health/this.maxHealth;return this.outlineFilter.alpha=e,e>0&&!((n=this.sprite.filters)!=null&&n.includes(this.outlineFilter))&&(this.sprite.filters=[this.outlineFilter]),this.health<=0?(this.isDead=!0,this.startDeathAnimation(),!0):!1}startDeathAnimation(){this.isDeathAnimating=!0,this.deathAnimProgress=0,this.sprite.filters=[this.pixelateFilter],this.createDeathParticles()}createDeathParticles(){this.particles=[],this.particleContainer=new st,this.particleContainer.position.set(this.sprite.x,this.sprite.y);const t=this.sprite.texture,e=Math.floor(20*this.size);for(let n=0;n<e;n++){const i=new Lt(t);i.anchor.set(.5),i.scale.set(this.size*.2);const o=_t()*oe,a=_t()*this.sprite.width*.2;i.x=wr(o)*a,i.y=Ji(o)*a,i.vx=(_t()-.5)*2,i.vy=(_t()-.5)*2,i.rotation=_t()*oe,i.rotationSpeed=(_t()-.5)*.2,i.alpha=1,i.fadeSpeed=.01+_t()*.03,this.particles.push(i),this.particleContainer.addChild(i)}this.sprite.parent&&this.sprite.parent.addChild(this.particleContainer)}updateDeathAnimation(){if(this.isDeathAnimating){if(this.deathAnimProgress+=.02,this.pixelateFilter.size=1+this.deathAnimProgress*20,this.sprite.scale.set(this.size*(1-this.deathAnimProgress*.5)),this.sprite.alpha=1-this.deathAnimProgress,this.sprite.filters=[this.pixelateFilter],this.particles)for(const t of this.particles)t.x+=t.vx,t.y+=t.vy,t.rotation+=t.rotationSpeed,t.alpha-=t.fadeSpeed,t.scale.x*=.97,t.scale.y*=.97;this.deathAnimProgress>=1&&(this.isDeathAnimating=!1,this.sprite.alpha=0,this.particleContainer&&this.particleContainer.parent&&this.particleContainer.parent.removeChild(this.particleContainer),this.onDeathAnimationComplete())}}onDeathAnimationComplete(){}getBounds(){const t=this.sprite.getBounds(),e=.3,n=t.width*e,i=t.height*e;return new V(t.x+n/2,t.y+i/2,t.width-n,t.height-i)}getScore(){return Math.round(this.size*10*this.maxHealth)}}class $_ extends st{constructor(t){super(),this.options=Object.assign({text:"",bgImage:"assets/images/btnBg.png",scale:.7,textStyle:{fontFamily:"YouYuan, Microsoft YaHei, PingFang SC, sans-serif",fontSize:24,fill:16777215,align:"center",fontWeight:"bold",stroke:0,strokeThickness:5,letterSpacing:1}},t),this._init()}_init(){this.bg=Lt.from(this.options.bgImage),this.bg.anchor.set(.5),this.bg.scale.set(this.options.scale),this.text=new Le(this.options.text,this.options.textStyle),this.text.anchor.set(.5),this.addChild(this.bg,this.text),this.options.width&&(this.width=this.options.width),this.options.height&&(this.height=this.options.height),this.interactive=!0,this.buttonMode=!0,this.hitArea=new V(-this.bg.width/2*this.options.scale,-this.bg.height/2*this.options.scale,this.bg.width*this.options.scale,this.bg.height*this.options.scale),this.on("pointerdown",this._onPointerDown.bind(this)),this.on("pointerup",this._onPointerUp.bind(this)),this.on("pointerupoutside",this._onPointerUpOutside.bind(this)),this.on("touchstart",this._onPointerDown.bind(this)),this.on("touchend",this._onPointerUp.bind(this)),this.on("touchendoutside",this._onPointerUpOutside.bind(this))}_onPointerDown(){this.bg.scale.set(this.options.scale*.95)}_onPointerUp(){this.bg.scale.set(this.options.scale),typeof this.options.onClick=="function"&&this.options.onClick()}_onPointerUpOutside(){this.bg.scale.set(this.options.scale)}setText(t){this.options.text=t,this.text.text=t}setEnabled(t){this.interactive=t,this.buttonMode=t,this.alpha=t?1:.5}setOnClick(t){this.options.onClick=t}}const Or=class Or extends st{static getInstance(){return Or._instance||(Or._instance=new Or),Or._instance}static show(t){const e=Or.getInstance();return e.showToast(t),e}constructor(){super(),this.visible=!1,this.toastContainer=new st,this.addChild(this.toastContainer),this.typeColors={info:3447003,success:3066993,error:15158332,warning:15965202},this.currentTicker=null}showToast(t){const{text:e="",type:n="info",duration:i=2e3,parent:o}=t;this.clear(),this.parent&&this.parent.removeChild(this),o&&(o.addChild(this),this.parent=o,this.zIndex=1e3,(o.sortableChildren===void 0||o.sortableChildren===!1)&&(o.sortableChildren=!0,o.sortChildren()));const a=this.typeColors[n]||this.typeColors.info,s=new tr;s.beginFill(a,.9),s.drawRoundedRect(0,0,10,10,5),s.endFill();const u=new Le(e,{fontFamily:"Microsoft YaHei, PingFang SC, sans-serif",fontSize:20,fill:16777215,align:"center",fontWeight:"bold",wordWrap:!0,wordWrapWidth:Z.width*.7});u.anchor.set(.5);const l=20,f=u.width+l*2,c=u.height+l*2;s.clear(),s.beginFill(a,.9),s.drawRoundedRect(-f/2,-c/2,f,c,10),s.endFill(),this.toastContainer.removeChildren(),this.toastContainer.addChild(s,u),this.toastContainer.position.set(Z.width/2,Z.height*.2),this.toastContainer.alpha=0,this.toastContainer.scale.set(.8),this.visible=!0,this.animate(i)}animate(t){const n=t-400,i=200;let o="fadeIn",a=Date.now();const s=()=>{const u=Date.now(),l=u-a;if(o==="fadeIn"){const f=Math.min(l/200,1);this.toastContainer.alpha=f,this.toastContainer.scale.set(.8+f*.2),f>=1&&(o="stay",a=u)}else if(o==="stay")l>=n&&(o="fadeOut",a=u);else if(o==="fadeOut"){const f=Math.min(l/i,1);if(this.toastContainer.alpha=1-f,this.toastContainer.scale.set(1-f*.2),f>=1){this.clear();return}}this.currentTicker=requestAnimationFrame(s)};this.currentTicker=requestAnimationFrame(s)}clear(){this.currentTicker&&(cancelAnimationFrame(this.currentTicker),this.currentTicker=null),this.visible=!1,this.toastContainer.alpha=0,this.parent&&this.parent.removeChild(this)}};Bn(Or,"_instance",null);let Ud=Or;const aH=(r,t)=>(typeof r=="string"&&(r={text:r,parent:t}),Ud.show(r));class sH{constructor(t={}){this.options=t,this.container=new st,this.container.zIndex=100,this.container.position.set(Z.width/2,Z.height/2),this.logo=Lt.from("assets/images/gameLogo.png"),this.logo.scale.set(1.2),this.logo.anchor.set(.5),this.logo.zIndex=10,this.buttonsContainer=new st,this.buttonsContainer.zIndex=10,this.singlePlayerBtn=new $_({text:"单人模式",scale:.7,onClick:()=>{console.log("单人按钮点击 - 直接回调方式"),this.onSinglePlayerClick()}}),this.singlePlayerBtn.position.set(-120,80),this.multiPlayerBtn=new $_({text:"多人模式",scale:.7,onClick:()=>{console.log("多人按钮点击 - 直接回调方式"),this.onMultiPlayerClick()}}),this.multiPlayerBtn.position.set(120,80),this.buttonsContainer.addChild(this.singlePlayerBtn,this.multiPlayerBtn),this.container.addChild(this.logo,this.buttonsContainer),this.blurFilter=new a1.BlurFilter(8,10,!0),this.isVisible=!1}onSinglePlayerClick(){console.log("开始单人模式"),typeof this.options.onSinglePlayerStart=="function"&&(this.hide(),this.options.onSinglePlayerStart())}onMultiPlayerClick(){console.log("多人模式开发中"),this.container.parent&&aH({text:"正在开发中，敬请期待!",type:"info",duration:2e3,parent:this.container.parent}),typeof this.options.onMultiPlayerStart=="function"&&this.options.onMultiPlayerStart()}show(t){this.isVisible||(t.addChild(this.container),this.isVisible=!0,this._updatePosition())}hide(){this.isVisible&&(this.container.parent&&this.container.parent.removeChild(this.container),this.isVisible=!1)}_updatePosition(){this.logo.position.set(0,-Z.height*.2),this.buttonsContainer.position.set(0,Z.height*.05)}applyBlurFilter(t){t&&(t.filters=[this.blurFilter])}fadeOutBlurFilter(t,e=1e3){if(!t||!t.filters||!t.filters.includes(this.blurFilter))return;const n=this.blurFilter.blur;co({from:n,to:0,duration:e,onUpdate:i=>{this.blurFilter.blur=i},onComplete:()=>{t.filters=null}})}handleTouch(t,e,n){if(console.log("GameStartUI处理触摸：",t,e,n?"down":"up"),!this.isVisible)return;const i=this._checkTouchHit(t,e);i==="single"?n?this.singlePlayerBtn._onPointerDown():this.singlePlayerBtn._onPointerUp():i==="multi"&&(n?this.multiPlayerBtn._onPointerDown():this.multiPlayerBtn._onPointerUp())}_checkTouchHit(t,e){const n={x:Z.width/2+this.buttonsContainer.position.x,y:Z.height/2+this.buttonsContainer.position.y},i={x:n.x+this.singlePlayerBtn.position.x,y:n.y+this.singlePlayerBtn.position.y},o={x:n.x+this.multiPlayerBtn.position.x,y:n.y+this.multiPlayerBtn.position.y},a=this.singlePlayerBtn.hitArea,s=this.multiPlayerBtn.hitArea;return t>=i.x+a.x&&t<=i.x+a.x+a.width&&e>=i.y+a.y&&e<=i.y+a.y+a.height?"single":t>=o.x+s.x&&t<=o.x+s.x+s.width&&e>=o.y+s.y&&e<=o.y+s.y+s.height?"multi":null}}class uH extends tr{constructor(e){super();Bn(this,"alignItem");Bn(this,"areas");Bn(this,"gap");Bn(this,"anchor");this.alignItem=e.alignItem??"center",this.areas=e.areas,this.gap=e.gap??0,this.anchor=e.anchor??{x:.5,y:.5};let n=0,i=0;const o=[];for(const a of e.areas){let s=0,u=0;for(const l of a)s+=l.w+this.gap,l.h>u&&(u=l.h);s-=this.gap,i+=u+this.gap,o.push({w:s,h:u}),s>n&&(n=s)}i-=this.gap;for(let a=0,s=0;a<e.areas.length;a++){const u=e.areas[a];let l=0;for(const f of u)f.x=l+(f.w-o[a].w+n)/2,f.y=s+o[a].h/2,l+=f.w+this.gap;s+=o[a].h+this.gap}if(this.beginFill(16763955,e.debug?.3:0),this.drawRect(0,0,n,i),this.endFill(),this.anchor){const{x:a,y:s}=this.anchor;this.pivot.set(n*a,i*s)}}addChild(...e){super.addChild(...e);let n=0;for(const i of this.areas)for(const o of i){const a=this.children[n++];a&&a.position.copyFrom(o)}return e[0]}}class lH{constructor(t={}){this.container=new st,this.container.sortableChildren=!0,this.container.zIndex=100,this.score=0,this.combo=0,this.maxCombo=0,this.comboTimer=0,this.comboTimeout=t.comboTimeout||3e3,this.elements={},this.initScoreDisplay(),this.initComboDisplay(),this.updateCallbacks={},ut.add(this.update.bind(this))}initScoreDisplay(){const t=new Le("分数:",{fontFamily:"'PingFang SC', 'Hiragino Sans GB', 'Chalkboard SE', 'MarkerFelt-Thin', 'Comic Sans MS', 'Roboto Rounded', 'Noto Sans SC', '华文圆体', 'Microsoft YaHei', sans-serif",fontSize:30,fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:5,dropShadow:!1,letterSpacing:1});t.position.set(20,20),this.container.addChild(t),this.elements.scoreLabel=t;const e=new st;e.position.set(120,20),this.container.addChild(e),this.elements.scoreValueContainer=e,this.updateScoreSprites(0)}updateScoreSprites(t){const e=this.elements.scoreValueContainer;if(!e)return;e.removeChildren();const n=t.toString();for(let i=0;i<n.length;i++){const o=n[i],a=Lt.from(`num${o}.png`);a.position.x=i*(a.width+2),e.addChild(a)}}initComboDisplay(){const t=new st;t.visible=!1;const e=new Le("连击 x1",{fontFamily:"'PingFang SC', 'Hiragino Sans GB', 'Chalkboard SE', 'MarkerFelt-Thin', 'Comic Sans MS', 'Roboto Rounded', 'Noto Sans SC', '华文圆体', 'Microsoft YaHei', sans-serif",fontSize:28,fill:16747520,fontWeight:"bold",stroke:0,strokeThickness:6,dropShadow:!1,letterSpacing:1});e.anchor.set(.5),e.position.set(Z.width/2,80),t.addChild(e),this.container.addChild(t),this.elements.comboContainer=t,this.elements.comboText=e}update(t){this.combo>0&&(this.comboTimer-=ut.deltaMS,this.comboTimer<=0&&this.resetCombo()),Object.values(this.updateCallbacks).forEach(e=>{typeof e=="function"&&e(t)})}show(t){t&&t.addChild(this.container)}hide(){this.container.parent&&this.container.parent.removeChild(this.container)}updateScore(t,e=!0){const n=this.score;if(this.score=t,e){let i=0;const o=500,a=Date.now(),s=u=>{const l=Date.now()-a;i=Math.min(l/o,1);const f=1-Math.pow(1-i,3),c=Math.round(n+(t-n)*f);this.updateScoreSprites(c),i>=1&&ut.remove(s)};ut.add(s)}else this.updateScoreSprites(t)}incrementCombo(){if(this.combo++,this.combo>this.maxCombo&&(this.maxCombo=this.combo),this.comboTimer=this.comboTimeout,this.elements.comboText&&(this.elements.comboText.text=`连击 x${this.combo}`),this.elements.comboContainer&&!this.elements.comboContainer.visible){this.elements.comboContainer.visible=!0,this.elements.comboText.scale.set(.5);const t=Date.now(),e=300,n=i=>{const o=Date.now()-t,a=Math.min(o/e,1),s=.5+.5*(1+Math.sin(a*Math.PI-Math.PI/2));this.elements.comboText.scale.set(s),a>=1&&(this.elements.comboText.scale.set(1),ut.remove(n))};ut.add(n)}else if(this.elements.comboContainer&&this.combo>1){this.elements.comboText.scale.set(1.2);const e=Date.now(),n=200,i=o=>{const a=Date.now()-e,s=Math.min(a/n,1),u=1.2-(1.2-1)*s;this.elements.comboText.scale.set(u),s>=1&&(this.elements.comboText.scale.set(1),ut.remove(i))};ut.add(i)}}resetCombo(){if(this.combo!==0&&(this.combo=0,this.comboTimer=0,this.elements.comboContainer)){const t=Date.now(),e=500,n=i=>{const o=Date.now()-t,a=Math.min(o/e,1);this.elements.comboContainer.alpha=1-a,a>=1&&(this.elements.comboContainer.visible=!1,this.elements.comboContainer.alpha=1,ut.remove(n))};ut.add(n)}}registerUpdateCallback(t,e){typeof e=="function"&&(this.updateCallbacks[t]=e)}unregisterUpdateCallback(t){delete this.updateCallbacks[t]}addElement(t,e){e instanceof St&&(this.elements[t]=e,this.container.addChild(e))}getElement(t){return this.elements[t]||null}removeElement(t){this.elements[t]&&(this.container.removeChild(this.elements[t]),delete this.elements[t])}getScore(){return this.score}getCombo(){return this.combo}getMaxCombo(){return this.maxCombo}}let gt,wt=[],de,se,sn,Yt,he=!1,Gd=!1;const yo=7,fH=1e3;let Kt=null,$t=null,cu=!1,ps=null;const hH=Z.clone().pad(100),{max:cH,random:vs}=Math;function dH(){gt=new st,gt.sortableChildren=!0;const r=Lt.from("bkg.jpg");r.zIndex=-1,r.scale.set(cH(Z.width/r.width,Z.height/r.height));const t=Xx.from("overlay.png",{width:Z.width,height:Z.height});t.zIndex=1,Yt=new st,Yt.zIndex=0,mH();const e=wt.map(n=>n.sprite);Yt.addChild(...e),gt.addChild(t,r,Yt),kS(),se=new sH({onSinglePlayerStart:pH,onMultiPlayerStart:()=>{console.log("多人模式暂未实现")}}),setTimeout(()=>{console.log("显示游戏开始界面"),se.show(gt),se.applyBlurFilter(Yt),console.log("游戏开始界面添加完成")},100),sn=new lH({comboTimeout:3e3}),gH(),ut.add(n=>{he&&de&&(de.update(n,gt,wt),sn&&de.getScore()!==sn.getScore()&&sn.updateScore(de.getScore())),yH(n),t.tilePosition.x-=1,t.tilePosition.y-=1,t.tilePosition.x%=512,t.tilePosition.y%=512})}function kS(){if(!Gd)try{console.log("开始播放背景音乐"),wi.playBGM("assets/mp3/bgm_scene.mp3",!0),Gd=!0}catch(r){console.error("播放背景音乐失败:",r)}}function pH(){console.log("开始单人游戏逻辑被调用"),he=!0,console.log("游戏状态已设置为开始:",he),se&&Yt?(console.log("应用淡出模糊滤镜"),se.fadeOutBlurFilter(Yt,1500)):console.error("无法应用滤镜淡出效果:",se,Yt);try{console.log("初始化玩家"),de=new cz({}),de.init(gt),console.log("玩家初始化完成"),sn&&(sn.show(gt),console.log("HUD显示完成"),de.setOnFishHitCallback((r,t,e)=>{if(console.log(`鱼被击中回调：isDead=${t}, score=${e}`),sn.incrementCombo(),t){if(console.log(`鱼死亡，显示飘动分数: ${e}`),r&&r.fishCategory===Ld.OCTOPUS){console.log("章鱼被击杀，触发墨水效果"),wi.playEffect("ink","assets/mp3/sfx_ink.mp3"),_H();try{wx.vibrateLong(),console.log("触发长振动")}catch(o){console.error("触发长振动失败:",o)}}else{wi.playEffect("coin","assets/mp3/coin.mp3");try{wx.vibrateShort(),console.log("触发短振动")}catch(o){console.error("触发短振动失败:",o)}}let n=Z.width/2,i=Z.height/2;r&&r.sprite?(n=r.sprite.x||r.sprite.position.x,i=r.sprite.y||r.sprite.position.y,console.log(`鱼位置: (${n}, ${i})`)):console.warn("鱼或鱼精灵不存在，使用默认位置"),vH(n,i,e)}}),console.log("玩家击中鱼回调设置完成"))}catch(r){console.error("初始化玩家出错:",r)}}function vH(r,t,e){console.log(`尝试显示飘动分数: +${e} 位置(${r}, ${t})`);const n=new st;n.position.set(r,t),n.pivot.set(0,0),n.scale.set(.8);const i=`+${e}`;let o=0;const a=new Le("+",{fontFamily:"'PingFang SC', 'Hiragino Sans GB', 'Chalkboard SE', 'MarkerFelt-Thin', 'Comic Sans MS', 'Roboto Rounded', 'Noto Sans SC', '华文圆体', 'Microsoft YaHei', sans-serif",fontSize:24,fill:16776960,fontWeight:"bold",stroke:0,strokeThickness:5,letterSpacing:1});a.position.x=0,n.addChild(a),o+=a.width+2;try{for(let f=1;f<i.length;f++){const c=i[f];console.log(`尝试创建数字精灵: num${c}.png`);const h=Lt.from(`num${c}.png`);if(!h.texture||h.texture.valid===!1){console.error(`数字精灵纹理无效: num${c}.png`);const d=new Le(c,{fontFamily:"'PingFang SC', 'Hiragino Sans GB', 'Chalkboard SE', 'MarkerFelt-Thin', 'Comic Sans MS', 'Roboto Rounded', 'Noto Sans SC', '华文圆体', 'Microsoft YaHei', sans-serif",fontSize:24,fill:16776960,fontWeight:"bold",stroke:0,strokeThickness:5,letterSpacing:1});d.position.x=o,n.addChild(d),o+=d.width+2}else h.position.x=o,n.addChild(h),o+=h.width+2,console.log(`成功添加数字精灵: num${c}.png`)}}catch(f){console.error("创建数字精灵时出错:",f);const c=new Le(`+${e}`,{fontFamily:"'PingFang SC', 'Hiragino Sans GB', 'Chalkboard SE', 'MarkerFelt-Thin', 'Comic Sans MS', 'Roboto Rounded', 'Noto Sans SC', '华文圆体', 'Microsoft YaHei', sans-serif",fontSize:24,fill:16776960,fontWeight:"bold",stroke:0,strokeThickness:5,letterSpacing:1});n.removeChildren(),n.addChild(c)}for(let f=0;f<n.children.length;f++)n.children[f].position.x-=o/2;gt.addChild(n),console.log("飘动分数容器已添加到舞台");const s=Date.now(),u=1500,l=f=>{const c=Date.now()-s,h=Math.min(c/u,1);n.position.y=t-h*80,n.alpha=1-h;const d=.8+Math.sin(h*Math.PI)*.3;n.scale.set(d),h>=1&&(n.parent&&n.parent.removeChild(n),ut.remove(l))};ut.add(l)}function mH(r=!1){if(r&&wt.length>=yo)return;r||(wt=[]);const t=r?yo:Math.min(yo,7),e=t-wt.length;if(e<=0)return;console.log(`创建鱼群: 当前${wt.length}条, 目标${t}条, 将创建${e}条`);const n=Math.floor(e*.5);for(let s=0;s<n&&!(wt.length>=t);s++){const u=(s%4+1).toString(),l=new to(u,{size:.5,health:1,behavior:me.NORMAL,spawnFromEdge:!0});eo(l),wt.push(l),Yt&&Yt.addChild(l.sprite)}const i=Math.floor(e*.25);for(let s=0;s<i&&!(wt.length>=t);s++){const u=(s%4+1).toString(),l=new to(u,{size:.4,health:1,speed:3,behavior:me.ESCAPE,spawnFromEdge:!0});eo(l),wt.push(l),Yt&&Yt.addChild(l.sprite)}const o=Math.floor(e*.15);for(let s=0;s<o&&!(wt.length>=t);s++){const u=(s%4+1).toString(),l=new to(u,{size:.7,health:2,behavior:me.AGGRESSIVE,spawnFromEdge:!0});eo(l),wt.push(l),Yt&&Yt.addChild(l.sprite)}const a=Math.ceil(e*.1);for(let s=0;s<a&&!(wt.length>=t);s++){const u=(s%4+1).toString(),l=new to(u,{size:.6,health:1,behavior:me.ERRATIC,spawnFromEdge:!0});eo(l),wt.push(l),Yt&&Yt.addChild(l.sprite)}console.log(`鱼群创建完成，当前共有${wt.length}条鱼`)}function eo(r){r.onDeathAnimationComplete=function(){const t=wt.indexOf(r);t!==-1&&(r.particleContainer&&r.particleContainer.parent&&r.particleContainer.parent.removeChild(r.particleContainer),r.sprite.parent&&r.sprite.parent.removeChild(r.sprite),wt.splice(t,1),console.log(`鱼被击杀并移除，当前剩余${wt.length}条鱼`),he&&setTimeout(()=>{if(wt.length<yo){const e=(Math.floor(vs()*4)+1).toString(),n=Object.values(me),i=n[Math.floor(vs()*n.length)],o=new to(e,{size:.4+vs()*.3,health:Math.ceil(vs()*2),behavior:i,spawnFromEdge:!0});eo(o),Yt.addChild(o.sprite),wt.push(o),console.log(`延迟1秒后创建新鱼，类型: ${e}, 习性: ${i}`)}else console.log(`鱼的数量已达到上限(${yo})，不再创建新鱼`)},fH))}}function yH(r){for(let t=wt.length-1;t>=0;t--)wt[t].update(r,hH)}function gH(){try{console.log("设置微信触摸事件"),wx.onTouchStart(r=>{const t=r.touches[0];console.log("触摸开始:",t.clientX,t.clientY),console.log("游戏状态:",he?"已开始":"未开始"),!he&&se?(console.log("将触摸事件传递给UI"),se.handleTouch(t.clientX,t.clientY,!0)):he&&de&&(console.log("发射子弹"),de.shoot(t.clientX,t.clientY,gt))}),wx.onTouchEnd(r=>{const t=r.changedTouches?r.changedTouches[0]:null;t&&(console.log("触摸结束:",t.clientX,t.clientY),console.log("游戏状态:",he?"已开始":"未开始"),!he&&se&&(console.log("将触摸结束事件传递给UI"),se.handleTouch(t.clientX,t.clientY,!1)))})}catch(r){console.error("设置触摸/点击事件出错:",r);try{window.addEventListener("mousedown",t=>{!he&&se?se.handleTouch(t.clientX,t.clientY,!0):he&&de&&de.shoot(t.clientX,t.clientY,gt)}),window.addEventListener("mouseup",t=>{!he&&se&&se.handleTouch(t.clientX,t.clientY,!1)})}catch(t){console.error("设置鼠标事件出错:",t)}}}function _H(){console.log("应用墨水滤镜效果"),cu?ps&&(clearTimeout(ps),ps=null):(Kt=new jo(10,8,!0),$t=new Lt(G.WHITE),$t.width=Z.width,$t.height=Z.height,$t.tint=51,$t.alpha=.4,$t.zIndex=1e3,gt.filters?gt.filters.push(Kt):gt.filters=[Kt],gt.addChild($t),cu=!0,console.log("墨水效果已应用到场景")),ps=setTimeout(()=>{bH()},2e3)}function bH(){if(!Kt&&!$t||!cu)return;console.log("开始淡出墨水效果");const r=Date.now(),t=1500,e=(Kt==null?void 0:Kt.blur)||0,n=(Kt==null?void 0:Kt.quality)||0,i=($t==null?void 0:$t.alpha)||0,o=a=>{const s=Date.now()-r,u=Math.min(s/t,1);if(Kt&&(Kt.blur=e*(1-u),Kt.quality=Math.max(1,Math.floor(n*(1-u)))),$t&&($t.alpha=i*(1-u)),u>=1){if(ut.remove(o),gt.filters&&Kt){const l=gt.filters.indexOf(Kt);l>-1&&(gt.filters.splice(l,1),gt.filters.length===0&&(gt.filters=null))}$t&&$t.parent&&$t.parent.removeChild($t),Kt=null,$t=null,cu=!1,console.log("墨水效果已完全淡出并移除")}};ut.add(o)}function xH(){gt||dH(),il.addChild(gt),gt.alpha=0,co({from:0,to:1,duration:1e3,onUpdate:r=>gt.alpha=r}),Gd?wi.resumeBGM():kS()}function TH(){il.removeChild(gt),wi.pauseBGM(),he=!1,de&&(de=null)}const SH=Object.freeze(Object.defineProperty({__proto__:null,hide:TH,show:xH},Symbol.toStringTag,{value:"Module"}));wx.getFileSystemManager();function wH(r=0,t){return new Promise(e=>{setTimeout(e,r*1e3)})}let ms,z_;function EH(r,t){r!==z_&&(ms&&ms.hide(),ms=VS[r],z_=r,ms.show(t))}let Bs,go=[];async function OH(){Bs=new st;const r=new uH({alignItem:"center",areas:[[{w:735*.3,h:409*.3}]],anchor:{x:.5,y:.5}}),t=new st,e=Lt.from("dl-logo.png");e.scale.set(2),e.anchor.set(.5,.5),t.addChild(e);const n="游戏工作室",i=new Gr({fontFamily:"YouYuan, Microsoft YaHei, PingFang SC, sans-serif",fontSize:70,fontWeight:"bold",fill:["#4FC3F7","#03A9F4","#0288D1"],fillGradientType:1,fillGradientStops:[0,.5,1],stroke:"#01579B",strokeThickness:6,dropShadow:!1,letterSpacing:4,lineJoin:"round"}),o=[];let a=e.width+230;for(let s=0;s<n.length;s++){const u=new Le(n[s],i);u.anchor.set(0,.5),u.position.x=a,u.alpha=0,a+=u.width+6,o.push(u),t.addChild(u)}t.pivot.x=a/2,r.addChild(t),r.scale.set(Ve.screen.dr),r.position.set(Z.width/2,Z.height/2),Bs.addChild(r),il.addChild(Bs),go.push(co({from:1,to:.2,ease:Es,duration:2e3,repeat:1/0,repeatType:"mirror",onUpdate:s=>e.alpha=s})),o.forEach((s,u)=>{setTimeout(()=>{go.push(co({from:{y:-20,alpha:0},to:{y:0,alpha:1},duration:400,ease:Es,onUpdate:l=>{s.position.y=l.y,s.alpha=l.alpha},onComplete:()=>{go.push(co({from:0,to:1,duration:1800,ease:Es,repeat:1/0,repeatType:"mirror",onUpdate:l=>{s.position.y=Math.sin(l*Math.PI)*5}}))}}))},250*u)}),await new Promise(s=>{az.add("misc.json").add("score.json").load(s)}),await Promise.all([wH(3)])}async function $S(){await OH()}function zS(){go.forEach(r=>r.stop()),go=[],Bs.destroy({children:!0})}const PH=Object.freeze(Object.defineProperty({__proto__:null,hide:zS,show:$S},Symbol.toStringTag,{value:"Module"}));wx.onShow(Pr(({query:r})=>{Ve.visible=!0}));wx.onHide(Pr(()=>Ve.visible=!1));$S().then(()=>{zS(),EH("game")}).catch(r=>{console.log(r),wx.showModal({title:"出错啦",confirmText:"退出",showCancel:!1,success:()=>wx.exitMiniProgram()})});wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]});const H_=wx.getUpdateManager();H_.onUpdateReady(function(){wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success(r){r.confirm&&H_.applyUpdate()}})});
